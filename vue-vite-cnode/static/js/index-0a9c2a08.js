import{p as f,q as g,r as k,d as C,f as F,e as B}from"./element-plus-087faedc.js";import{_ as E,u as v,r as S}from"./index-6ed5d7bd.js";import{b as V}from"./vue-router-9467f4ca.js";import{u as y}from"./vuex-a79d8c7c.js";import{d as D,r as R,_,c as q,U as o,S as t,a as b,o as I,a2 as h}from"./@vue-a3b8ecb2.js";import"./@vueuse-972b0b46.js";import"./@element-plus-2403d92f.js";import"./@ctrl-eb0b847c.js";import"./lodash-es-8dd21e31.js";import"./async-validator-1193b133.js";import"./@popperjs-892fd7f5.js";import"./axios-eec2155c.js";import"./vite-plugin-qiankun-075a3e44.js";import"./mitt-dab1f1cb.js";const N=D({components:{ElForm:f,ElFormItem:g,ElInput:k,ElButton:C},setup(){const{isLoading:e,adornUrl:r,httpRequest:m}=v(),{commit:u}=y(),d=V(),a=R(),n=_({token:""}),l=_({token:[{required:!0,message:"\u8BF7\u8F93\u5165token\u6821\u9A8C",trigger:"blur"}]});return{ruleFormRef:a,form:n,rules:l,onSubmit:()=>{!a.value||a.value.validate(c=>{if(c)m({url:r("/api/v1/accesstoken"),method:"post",data:{accesstoken:n.token}}).then(({data:s})=>{localStorage.setItem("loginname",s.loginname),localStorage.setItem("token",n.token),u("user/updateToken",n.token),u("user/updateSimpleUserData",s),S("/")}).catch(s=>{B.error("\u767B\u5F55\u5931\u8D25"),console.error(s)});else return!1})},isLoading:e,onCancel:()=>{d.go(-1)}}}}),U={class:"login-body"},$=b("span",{class:"login-slogan"},"\u6B22\u8FCE\u6765\u5230 CNode \u4E2D\u6587\u793E\u533A",-1),A=b("span",{class:"login-title"},"token \u767B\u5F55",-1),L=h("\u767B\u5F55"),w=h("\u53D6\u6D88");function x(e,r,m,u,d,a){const n=k,l=g,i=C,p=f,c=F;return I(),q("div",U,[$,o(c,{class:"box-card"},{header:t(()=>[A]),default:t(()=>[o(p,{class:"login-form",model:e.form,rules:e.rules,ref:"ruleFormRef","label-width":"0px"},{default:t(()=>[o(l,{prop:"token"},{default:t(()=>[o(n,{modelValue:e.form.token,"onUpdate:modelValue":r[0]||(r[0]=s=>e.form.token=s),placeholder:"accesstoken \u767B\u5F55\u6821\u9A8C",clearable:""},null,8,["modelValue"])]),_:1}),o(l,null,{default:t(()=>[o(i,{class:"login-btn",type:"primary",onClick:e.onSubmit,loading:e.isLoading},{default:t(()=>[L]),_:1},8,["onClick","loading"]),o(i,{class:"cencel-btn",onClick:e.onCancel,loading:e.isLoading},{default:t(()=>[w]),_:1},8,["onClick","loading"])]),_:1})]),_:1},8,["model","rules"])]),_:1})])}var Z=E(N,[["render",x]]);export{Z as default};
