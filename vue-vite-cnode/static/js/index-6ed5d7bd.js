import{r as F,d as U,y as T,w as A,c as v,a as _,U as m,S as d,R as $,O as C,o as p,a2 as f,b as j,Z as R,al as W}from"./@vue-a3b8ecb2.js";import{q as P,r as Y}from"./vite-plugin-qiankun-075a3e44.js";import{E as q,a as O,b as w,c as M,d as N,z,e as K}from"./element-plus-087faedc.js";import{c as Q,u as V}from"./vuex-a79d8c7c.js";import{c as G,a as Z,u as J}from"./vue-router-9467f4ca.js";import{a as X}from"./axios-eec2155c.js";import{m as ee}from"./mitt-dab1f1cb.js";import{y as te}from"./@element-plus-2403d92f.js";import"./@vueuse-972b0b46.js";import"./@ctrl-eb0b847c.js";import"./lodash-es-8dd21e31.js";import"./async-validator-1193b133.js";import"./@popperjs-892fd7f5.js";const oe=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function o(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerpolicy&&(a.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?a.credentials="include":r.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=o(r);fetch(r.href,a)}};oe();const x=()=>{const e=F(!1),t=n=>"https://cnodejs.org"+n,o=X.create({timeout:1e3*60,withCredentials:!1,headers:{"Content-Type":"application/json; charset=utf-8"}});return o.interceptors.request.use(n=>(e.value=!0,n)),o.interceptors.response.use(n=>(n&&n.status===403?console.error("\u767B\u5F55\u5931\u8D25"):n&&n.status!==200&&console.error("\u8BF7\u6C42\u5931\u8D25"),e.value=!1,n),n=>(e.value=!1,Promise.reject(n))),{isLoading:e,adornUrl:t,httpRequest:o}},ne=[{key:"all",name:"\u5168\u90E8"},{key:"good",name:"\u7CBE\u534E"},{key:"share",name:"\u5206\u4EAB"},{key:"ask",name:"\u95EE\u7B54"},{key:"job",name:"\u62DB\u8058"},{key:"dev",name:"\u5BA2\u6237\u7AEF\u6D4B\u8BD5"}],re="modulepreload",S={},se="/vue-vite-cnode/",g=function(t,o){return!o||o.length===0?t():Promise.all(o.map(n=>{if(n=`${se}${n}`,n in S)return;S[n]=!0;const r=n.endsWith(".css"),a=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${a}`))return;const s=document.createElement("link");if(s.rel=r?"stylesheet":re,r||(s.as="script",s.crossOrigin=""),s.href=n,document.head.appendChild(s),r)return new Promise((u,c)=>{s.addEventListener("load",u),s.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>t())};var ae={namespaced:!0,state:{entryUrl:""},mutations:{updateEntryUrl(e,t){e.entryUrl=t}}},ue={namespaced:!0,state:{token:"",simpleUserData:{},userData:{},isLoading:!1},mutations:{updateToken(e,t){e.token=t},updateSimpleUserData(e,t){e.simpleUserData=t},updateUserData(e,t){e.userData=t},updateLoading(e,t){e.isLoading=t}}},b=Q({modules:{grobal:ae,user:ue}});let i="";P.__POWERED_BY_QIANKUN__&&(i="/vue-vite-cnode");const ie=[{path:i+"/",name:"index",component:()=>g(()=>import("./index-ab657368.js"),["static/js/index-ab657368.js","static/css/index-0df67971.css","static/js/index-de5dcdad.js","static/css/index-7e0276fb.css","static/js/@vue-a3b8ecb2.js","static/js/element-plus-087faedc.js","static/css/element-plus-d5ff388e.css","static/js/@vueuse-972b0b46.js","static/js/@element-plus-2403d92f.js","static/js/@ctrl-eb0b847c.js","static/js/lodash-es-8dd21e31.js","static/js/async-validator-1193b133.js","static/js/@popperjs-892fd7f5.js","static/js/axios-eec2155c.js","static/js/vue-router-9467f4ca.js","static/js/vuex-a79d8c7c.js","static/js/index-1a292921.js","static/css/index-bea68ba5.css","static/js/vite-plugin-qiankun-075a3e44.js","static/js/mitt-dab1f1cb.js"])},{path:i+"/login",name:"login",component:()=>g(()=>import("./index-0a9c2a08.js"),["static/js/index-0a9c2a08.js","static/css/index-7ba6909c.css","static/js/element-plus-087faedc.js","static/css/element-plus-d5ff388e.css","static/js/@vue-a3b8ecb2.js","static/js/@vueuse-972b0b46.js","static/js/@element-plus-2403d92f.js","static/js/@ctrl-eb0b847c.js","static/js/lodash-es-8dd21e31.js","static/js/async-validator-1193b133.js","static/js/@popperjs-892fd7f5.js","static/js/axios-eec2155c.js","static/js/vue-router-9467f4ca.js","static/js/vuex-a79d8c7c.js","static/js/vite-plugin-qiankun-075a3e44.js","static/js/mitt-dab1f1cb.js"])},{path:i+"/detail",name:"detail",component:()=>g(()=>import("./index-498e6e45.js"),["static/js/index-498e6e45.js","static/css/index-3de2b40f.css","static/js/index-de5dcdad.js","static/css/index-7e0276fb.css","static/js/@vue-a3b8ecb2.js","static/js/element-plus-087faedc.js","static/css/element-plus-d5ff388e.css","static/js/@vueuse-972b0b46.js","static/js/@element-plus-2403d92f.js","static/js/@ctrl-eb0b847c.js","static/js/lodash-es-8dd21e31.js","static/js/async-validator-1193b133.js","static/js/@popperjs-892fd7f5.js","static/js/axios-eec2155c.js","static/js/vue-router-9467f4ca.js","static/js/vuex-a79d8c7c.js","static/js/@tinymce-d9c43e5a.js","static/js/vite-plugin-qiankun-075a3e44.js","static/js/mitt-dab1f1cb.js"])},{path:i+"/add-topic",name:"addTopic",meta:{requiredLogin:!0},component:()=>g(()=>import("./index-3feba175.js"),["static/js/index-3feba175.js","static/css/index-1a50ff44.css","static/js/index-de5dcdad.js","static/css/index-7e0276fb.css","static/js/@vue-a3b8ecb2.js","static/js/element-plus-087faedc.js","static/css/element-plus-d5ff388e.css","static/js/@vueuse-972b0b46.js","static/js/@element-plus-2403d92f.js","static/js/@ctrl-eb0b847c.js","static/js/lodash-es-8dd21e31.js","static/js/async-validator-1193b133.js","static/js/@popperjs-892fd7f5.js","static/js/axios-eec2155c.js","static/js/vue-router-9467f4ca.js","static/js/vuex-a79d8c7c.js","static/js/@tinymce-d9c43e5a.js","static/js/vite-plugin-qiankun-075a3e44.js","static/js/mitt-dab1f1cb.js"])},{path:i+"/edit-topic/:id",name:"editTopic",meta:{requiredLogin:!0},component:()=>g(()=>import("./index-3feba175.js"),["static/js/index-3feba175.js","static/css/index-1a50ff44.css","static/js/index-de5dcdad.js","static/css/index-7e0276fb.css","static/js/@vue-a3b8ecb2.js","static/js/element-plus-087faedc.js","static/css/element-plus-d5ff388e.css","static/js/@vueuse-972b0b46.js","static/js/@element-plus-2403d92f.js","static/js/@ctrl-eb0b847c.js","static/js/lodash-es-8dd21e31.js","static/js/async-validator-1193b133.js","static/js/@popperjs-892fd7f5.js","static/js/axios-eec2155c.js","static/js/vue-router-9467f4ca.js","static/js/vuex-a79d8c7c.js","static/js/@tinymce-d9c43e5a.js","static/js/vite-plugin-qiankun-075a3e44.js","static/js/mitt-dab1f1cb.js"])},{path:i+"/message",name:"message",meta:{requiredLogin:!0},component:()=>g(()=>import("./index-a9b7b708.js"),["static/js/index-a9b7b708.js","static/css/index-8cd9f4a6.css","static/js/index-de5dcdad.js","static/css/index-7e0276fb.css","static/js/@vue-a3b8ecb2.js","static/js/element-plus-087faedc.js","static/css/element-plus-d5ff388e.css","static/js/@vueuse-972b0b46.js","static/js/@element-plus-2403d92f.js","static/js/@ctrl-eb0b847c.js","static/js/lodash-es-8dd21e31.js","static/js/async-validator-1193b133.js","static/js/@popperjs-892fd7f5.js","static/js/axios-eec2155c.js","static/js/vue-router-9467f4ca.js","static/js/vuex-a79d8c7c.js","static/js/vite-plugin-qiankun-075a3e44.js","static/js/mitt-dab1f1cb.js"])},{path:i+"/collect",name:"collect",meta:{requiredLogin:!0},component:()=>g(()=>import("./index-d70d9f9e.js"),["static/js/index-d70d9f9e.js","static/css/index-960b9e23.css","static/js/index-de5dcdad.js","static/css/index-7e0276fb.css","static/js/@vue-a3b8ecb2.js","static/js/element-plus-087faedc.js","static/css/element-plus-d5ff388e.css","static/js/@vueuse-972b0b46.js","static/js/@element-plus-2403d92f.js","static/js/@ctrl-eb0b847c.js","static/js/lodash-es-8dd21e31.js","static/js/async-validator-1193b133.js","static/js/@popperjs-892fd7f5.js","static/js/axios-eec2155c.js","static/js/vue-router-9467f4ca.js","static/js/vuex-a79d8c7c.js","static/js/index-1a292921.js","static/css/index-bea68ba5.css","static/js/vite-plugin-qiankun-075a3e44.js","static/js/mitt-dab1f1cb.js"])},{path:i+"/user/:userName",name:"userDetail",meta:{requiredLogin:!0},component:()=>g(()=>import("./index-79a38928.js"),["static/js/index-79a38928.js","static/css/index-d60539d1.css","static/js/index-de5dcdad.js","static/css/index-7e0276fb.css","static/js/@vue-a3b8ecb2.js","static/js/element-plus-087faedc.js","static/css/element-plus-d5ff388e.css","static/js/@vueuse-972b0b46.js","static/js/@element-plus-2403d92f.js","static/js/@ctrl-eb0b847c.js","static/js/lodash-es-8dd21e31.js","static/js/async-validator-1193b133.js","static/js/@popperjs-892fd7f5.js","static/js/axios-eec2155c.js","static/js/vue-router-9467f4ca.js","static/js/vuex-a79d8c7c.js","static/js/index-1a292921.js","static/css/index-bea68ba5.css","static/js/vite-plugin-qiankun-075a3e44.js","static/js/mitt-dab1f1cb.js"])}],I=G({history:Z("/vue-vite-cnode"),routes:ie});I.beforeEach((e,t,o)=>{e.name==="login"&&!!b.state.user.token?o("/"):e.meta.requiredLogin&&!b.state.user.token?o({name:"login"}):o()});const et=(e,t)=>{const o=new Date(e);if(e!==""&&!o.getFullYear())return console.error("\u65F6\u95F4\u683C\u5F0F\u9519\u8BEF\uFF01"),"";/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(o.getFullYear()+"").substr(4-RegExp.$1.length)));const n={"M+":o.getMonth()+1,"d+":o.getDate(),"h+":o.getHours(),"m+":o.getMinutes(),"s+":o.getSeconds()};for(const r in n)if(new RegExp(`(${r})`).test(t)){const a=n[r]+"";t=t.replace(RegExp.$1,RegExp.$1.length===1?a:ce(a))}return t},ce=e=>("00"+e).substr(e.length),tt=(e,t)=>e?"\u7F6E\u9876":ne.find(o=>o.key===t)?.name??"\u672A\u77E5",ot=(e,t)=>e!==void 0&&t!==void 0?parseInt(String(Math.random()*(t-e+1)+e),10):e!==void 0?parseInt(String(Math.random()*e+1),10):0,nt=e=>{let t=e.replace(/“|”/g,'"');return t=t.replace(/href="+(\/.?user.?\/|user.?\/)/g,'href="./#/user/'),t=t.replace(/&lt;/g,"<"),t.replace(/&gt;/g,">")},L=e=>{const{path:t}=typeof e=="string"?{path:void 0}:{path:void 0,...e},o=typeof e=="string"?i+e:{...e,...t?{path:i+t}:{}};I.push(o)},le=ee(),de=()=>[le];var B=(e,t)=>{const o=e.__vccOpts||e;for(const[n,r]of t)o[n]=r;return o};const pe=U({name:"HeaderComp",components:{ElLink:q,ElBadge:O},setup(){const{state:e,commit:t}=V(),o=J(),{adornUrl:n,httpRequest:r}=x(),a=T(()=>new URL("/vue-vite-cnode/static/svg/logo-5acbd731.svg",self.location).href),s=T(()=>e.user.token),u=()=>{o.path!=="/index"&&L({path:"/"})},[c]=de();c.on("read-msg",()=>{h()});const E=F(0);A(s,y=>{y?h():t("user/updateUserData",{})});const h=()=>{r({url:n("/api/v1/message/count"),method:"get",params:{accesstoken:s.value||""}}).then(({data:y})=>{E.value=y.data}).catch(y=>{console.error(y)})};return s.value&&h(),{logoImage:a,token:s,gotoIndex:u,count:E,gotoMessage:()=>{o.path!=="/message"&&L({path:"/message"})},gotoCollect:()=>{o.path!=="/collect"&&L({path:"/collect"})},gotoLogin:()=>{o.path!=="/login"&&L({path:"/login"})},logout:()=>{localStorage.removeItem("loginname"),localStorage.removeItem("token"),t("user/updateToken",""),t("user/updateSimpleUserData",{}),u()}}}}),me={class:"navbar"},_e={class:"navbar-content"},ge=["src"],fe={class:"navbar-link navbar-noright-link"},he=f("\u9996\u9875"),ve={key:0},ke=f("\u6D88\u606F"),Ee=f("\u6D88\u606F"),ye={key:1},Ce=f("\u6536\u85CF"),be=f("GitHub\u4ED3\u5E93"),De={key:2},Le=f("\u767B\u5F55"),Fe={key:3},$e=f("\u9000\u51FA");function Re(e,t,o,n,r,a){const s=q,u=O;return p(),v("div",me,[_("div",_e,[_("span",{class:"navbar-logo",onClick:t[0]||(t[0]=(...c)=>e.gotoIndex&&e.gotoIndex(...c))},[_("img",{src:e.logoImage},null,8,ge)]),_("span",fe,[_("span",null,[m(s,{underline:!1,onClick:e.gotoIndex},{default:d(()=>[he]),_:1},8,["onClick"])]),e.token!==""?(p(),v("span",ve,[e.count>0?(p(),$(u,{key:0,value:e.count,class:"badge-item"},{default:d(()=>[m(s,{underline:!1,onClick:e.gotoMessage},{default:d(()=>[ke]),_:1},8,["onClick"])]),_:1},8,["value"])):(p(),$(s,{key:1,underline:!1,onClick:e.gotoMessage},{default:d(()=>[Ee]),_:1},8,["onClick"]))])):C("",!0),e.token!==""?(p(),v("span",ye,[m(s,{underline:!1,onClick:e.gotoCollect},{default:d(()=>[Ce]),_:1},8,["onClick"])])):C("",!0),_("span",null,[m(s,{underline:!1,href:"https://github.com/guoqirong/vue-vite-cnode",target:"_blank"},{default:d(()=>[be]),_:1})]),e.token===""?(p(),v("span",De,[m(s,{underline:!1,onClick:e.gotoLogin},{default:d(()=>[Le]),_:1},8,["onClick"])])):C("",!0),e.token!==""?(p(),v("span",Fe,[m(s,{underline:!1,onClick:e.logout},{default:d(()=>[$e]),_:1},8,["onClick"])])):C("",!0)])])])}var Te=B(pe,[["render",Re]]);const Ae=U({name:"FooterComp"}),Ue={class:"body-footer"},Ie=_("div",{class:"footer-content"},[_("div",null,"CNode \u793E\u533A\u4E3A\u56FD\u5185\u6700\u4E13\u4E1A\u7684 Node.js \u5F00\u6E90\u6280\u672F\u793E\u533A\uFF0C\u81F4\u529B\u4E8E Node.js \u7684\u6280\u672F\u7814\u7A76\u3002"),_("div",null,"CNode \u793E\u533A\u7248\u6743\u5F52xxxxxx\u6240\u6709")],-1),Be=[Ie];function Se(e,t,o,n,r,a){return p(),v("div",Ue,Be)}var Pe=B(Ae,[["render",Se]]);const qe=U({components:{HeaderComp:Te,FooterComp:Pe,ElConfigProvider:w,ElScrollbar:M,ElButton:N},setup(){const{isLoading:e,adornUrl:t,httpRequest:o}=x(),{state:n,commit:r}=V(),a=T(()=>n.user.token);A(a,l=>{l&&s(n.user.simpleUserData.loginname)}),A(e,l=>{r("user/updateLoading",l)});const s=l=>{o({url:t(`/api/v1/user/${l}`),method:"get"}).then(({data:D})=>{r("user/updateUserData",D.data)}).catch(D=>{K.error("\u8BF7\u6C42\u5931\u8D25"),console.error(D)})};a.value&&s(n.user.simpleUserData.loginname),j(()=>{r("user/updateSimpleUserData",{loginname:localStorage.getItem("loginname")||""}),r("user/updateToken",localStorage.getItem("token")||"")});const u=F(0),c=F();return{locale:z,top:u,scrollbarRef:c,scroll:l=>{u.value=l.scrollTop},CaretTop:te,backTop:()=>{c.value?.setScrollTop(0)}}}});function Oe(e,t,o,n,r,a){const s=R("header-comp"),u=R("router-view"),c=R("footer-comp"),E=N,h=M,l=w;return p(),$(l,{locale:e.locale},{default:d(()=>[m(h,{ref:"scrollbarRef",height:"100vh",onScroll:e.scroll},{default:d(()=>[m(s),m(u),m(c),e.top>200?(p(),$(E,{key:0,class:"back-top",size:"large",icon:e.CaretTop,circle:"",onClick:e.backTop},null,8,["icon","onClick"])):C("",!0)]),_:1},8,["onScroll"])]),_:1},8,["locale"])}var we=B(qe,[["render",Oe]]);let k;async function H(e){const{container:t,entry:o}=e??{};k=W(we),k.use(b).use(I).mount(t?t.querySelector("#app"):"#app"),b.commit("grobal/updateEntryUrl",o)}Y({bootstrap(){console.log("bootstrap")},mount(e){console.log("mount",e),H(e)},update:function(e){throw console.log(e),new Error("Function not implemented.")},unmount(e){k&&(console.log("[vue] vue app unmount"),b.commit("grobal/updateEntryUrl",""),k.unmount(),k._instance=null,k=void 0)}});P.__POWERED_BY_QIANKUN__||H({});export{B as _,ot as a,de as b,nt as c,et as f,tt as g,L as r,ne as t,x as u};
