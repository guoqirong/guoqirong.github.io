var F=Object.defineProperty;var k=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var D=(n,e,t)=>e in n?F(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,N=(n,e)=>{for(var t in e||(e={}))j.call(e,t)&&D(n,t,e[t]);if(k)for(var t of k(e))H.call(e,t)&&D(n,t,e[t]);return n};import{_ as M,a as A,b as G}from"./index-5ba76d30.js";import{e as I,f as J,g as K,h as O,i as Q,d as W}from"./element-plus-978032fc.js";import{u as X,t as Y,r as x}from"./index-e80b1955.js";import{_ as Z}from"./index-1572a517.js";import{u as aa}from"./vue-router-9467f4ca.js";import{d as ea,r as f,o as b,c as E,U as s,S as c,P as ta,a7 as oa,u as P,a2 as na,R as la}from"./@vue-a3b8ecb2.js";import"./vuex-a79d8c7c.js";import"./@vueuse-972b0b46.js";import"./@element-plus-ed130b8d.js";import"./@ctrl-eb0b847c.js";import"./lodash-es-8dd21e31.js";import"./async-validator-1193b133.js";import"./@popperjs-892fd7f5.js";import"./axios-eec2155c.js";import"./mitt-dab1f1cb.js";const sa={class:"content-body"},ia=na("\u53D1\u5E03\u8BDD\u9898"),ka=ea({setup(n){var $;const e=aa(),{isLoading:t,adornUrl:z,httpRequest:B}=X(),h=f([]),p=a=>{var r,m,_;B({url:z("/api/v1/topics"),method:"get",params:N({page:(r=l.value)!=null?r:1,tab:(m=i.value)!=null?m:"all",limit:(_=u.value)!=null?_:20,mdrender:!1},a)}).then(o=>{var d,g;(d=o==null?void 0:o.data)!=null&&d.success&&(h.value=(g=o==null?void 0:o.data.data)!=null?g:[])}).catch(o=>{W.error("\u8BF7\u6C42\u5931\u8D25"),console.error(o)})},i=f("all"),L=a=>{l.value=1,i.value=a.paneName,p({tab:a.paneName})},S=()=>{x({path:"/add-topic",query:{listParm:`${i.value}|${l.value}|${u.value}`}})},l=f(1),u=f(20),V=a=>{l.value=a,p({page:a})},q=a=>{l.value=1,u.value=a,p({limit:a})},[C,y,T]=($=String(e.params.listParm).split("|"))!=null?$:[];C&&y&&T&&(i.value=C,l.value=Number(y),u.value=Number(T)),p({});const R=a=>{x({path:"/detail",query:{id:a,listParm:`${i.value}|${l.value}|${u.value}`}})};return(a,r)=>{const m=I,_=J,o=K,d=O,g=Q,U=M;return b(),E("div",sa,[s(U,null,{right:c(()=>[s(A),s(G)]),default:c(()=>[s(g,{class:"box-card"},{default:c(()=>[s(m,{class:"add-topic-btn",type:"primary",onClick:S},{default:c(()=>[ia]),_:1}),s(d,{modelValue:i.value,"onUpdate:modelValue":r[0]||(r[0]=v=>i.value=v),class:"topic-tabs",onTabClick:L},{default:c(()=>[(b(!0),E(ta,null,oa(P(Y),(v,w)=>(b(),la(_,{key:w,label:v.name,name:v.key},null,8,["label","name"]))),128)),s(Z,{isLoading:P(t),limit:u.value,listData:h.value,onSeeDetail:R},null,8,["isLoading","limit","listData"]),s(o,{class:"pagination",onSizeChange:q,onCurrentChange:V,"current-page":l.value,"pager-count":5,"page-sizes":[10,20,50,100],"page-size":u.value,layout:"total, sizes, prev, pager, next, jumper",total:400},null,8,["current-page","page-size"])]),_:1},8,["modelValue","onTabClick"])]),_:1})]),_:1})])}}});export{ka as default};
