(this["webpackJsonpreact-cnode"]=this["webpackJsonpreact-cnode"]||[]).push([[4],{105:function(e,t,n){},12:function(e,t,n){"use strict";function a(e,t){var n=new Date(e);/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length)));var a={"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds()};for(var c in a)if(new RegExp("(".concat(c,")")).test(t)){var r=a[c]+"";t=t.replace(RegExp.$1,1===RegExp.$1.length?r:o(r))}return t}function o(e){return("00"+e).substr(e.length)}function c(e,t){localStorage.setItem(e,t)}function r(e){return localStorage.getItem(e)}n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return r}))},13:function(e,t,n){"use strict";n.d(t,"h",(function(){return a})),n.d(t,"g",(function(){return o})),n.d(t,"f",(function(){return c})),n.d(t,"a",(function(){return r})),n.d(t,"e",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return l}));var a="SETLISTLOADING",o="SETDETAILLOADING",c="SETCOLLECTLISTLOADING",r="CHANGETABITEM",i="GETTOPICDETAIL",u="COLLECTTOPIC",s="DECOLLECTTOPIC",l="GETCOLLECTLIST"},179:function(e,t,n){},18:function(e,t,n){"use strict";n(110);var a=n(36),o=n(83),c=n.n(o).a.create({timeout:6e4,withCredentials:!1,headers:{"Content-Type":"application/json; charset=utf-8"}});c.interceptors.response.use((function(e){return e.data}),(function(e){void 0!==e&&"ECONNABORTED"!==e.code||a.a.warning("\u670d\u52a1\u8bf7\u6c42\u8d85\u65f6");var t=e.response;return 401===t.status?a.a.error(t.data.error_msg||"\u767b\u5f55\u5931\u8d25"):200!==t.status&&a.a.error(t.data.error_msg||"\u8bf7\u6c42\u5931\u8d25"),Promise.reject(e)})),t.a=c},187:function(e,t,n){e.exports=n.p+"../static/media/logo.e2b40b75.svg"},188:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(16),r=n.n(c),i=n(33),u=n(20),s=n(82),l=n(1),d=n(13),f={listLoading:!1,detailLoading:!1,collectListLoading:!1,tabList:[{key:"all",tab:"\u5168\u90e8"},{key:"good",tab:"\u7cbe\u534e"},{key:"share",tab:"\u5206\u4eab"},{key:"ask",tab:"\u95ee\u7b54"},{key:"job",tab:"\u62db\u8058"},{key:"dev",tab:"\u5ba2\u6237\u7aef\u6d4b\u8bd5"}],changetab:{key:"all",tab:"\u5168\u90e8"},searchData:{page:1,tab:"all",limit:20,mdrender:!0},dataList:[],dataDetail:{},collectList:[]};var g=n(5),b={loginLoading:!1,userinfoLoading:!1,messageListLoading:!1,token:"",simpleUserInfo:{},userInfo:{},messageCount:0,messageList:{}};var m=Object(u.c)({index:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.h:return Object(l.a)(Object(l.a)({},e),{},{listLoading:t.listLoading});case d.g:return Object(l.a)(Object(l.a)({},e),{},{detailLoading:t.detailLoading});case d.f:return Object(l.a)(Object(l.a)({},e),{},{collectListLoading:t.collectListLoading});case d.a:return Object(l.a)(Object(l.a)({},e),{},{listLoading:!1,changetab:t.data,searchData:t.searchData,dataList:t.dataList});case d.e:return Object(l.a)(Object(l.a)({},e),{},{detailLoading:!1,dataDetail:t.dataDetail});case d.b:var n=e.dataDetail;return n.is_collect=t.is_collect,Object(l.a)(Object(l.a)({},e),{},{dataDetail:n});case d.c:var a=e.dataDetail;return a.is_collect=t.is_collect,Object(l.a)(Object(l.a)({},e),{},{dataDetail:a});case d.d:return Object(l.a)(Object(l.a)({},e),{},{collectListLoading:!1,collectList:t.collectList});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.e:return Object(l.a)(Object(l.a)({},e),{},{loginLoading:t.loginLoading});case g.h:return Object(l.a)(Object(l.a)({},e),{},{userinfoLoading:t.userinfoLoading});case g.f:return Object(l.a)(Object(l.a)({},e),{},{messageListLoading:t.messageListLoading});case g.g:return Object(l.a)(Object(l.a)({},e),{},{loginLoading:!1,token:t.token});case g.a:return Object(l.a)(Object(l.a)({},e),{},{simpleUserInfo:t.data});case g.d:return Object(l.a)(Object(l.a)({},e),{},{userinfoLoading:!1,userInfo:t.data});case g.b:return Object(l.a)(Object(l.a)({},e),{},{messageCount:t.data});case g.c:return Object(l.a)(Object(l.a)({},e),{},{messageListLoading:!1,messageList:t.data});default:return e}}}),p=[s.a];var h=u.a.apply(void 0,p);n(105),n(106);var E=n(88),O=n(29),L=n(30),v=n(32),j=n(31),k=(n(108),n(27)),T=n(22),A=n(4),y=n(12),S=n(52),_=n(23),G=n.n(_),C=(n(94),n(73)),I=function(e){Object(v.a)(n,e);var t=Object(j.a)(n);function n(){return Object(O.a)(this,n),t.apply(this,arguments)}return Object(L.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{style:{width:"90vw",height:"80vh"}},o.a.createElement(C.a,{tip:"Loading...",size:"large",style:{width:"90vw",height:"80vh"}},this.props.children))}}]),n}(a.Component),D=[{path:"/",exact:!0,component:G()({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(10)]).then(n.bind(null,386))},loading:I})},{path:"/message",component:G()({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(12)]).then(n.bind(null,387))},loading:I})},{path:"/collect",component:G()({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(9)]).then(n.bind(null,388))},loading:I})},{path:"/login",component:G()({loader:function(){return Promise.all([n.e(0),n.e(3),n.e(7),n.e(13)]).then(n.bind(null,389))},loading:I})},{path:"/detail",component:G()({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(3),n.e(8),n.e(11)]).then(n.bind(null,390))},loading:I})}],N=(n(179),k.a.Header),R=k.a.Content,w=k.a.Footer,x=function(e){Object(v.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(O.a)(this,a),(n=t.call(this,e)).state={},n}return Object(L.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){(this.props.user.token||Object(y.b)("token"))&&this.props.getmessagecount({token:this.props.user.token||Object(y.b)("token")})}},{key:"goLoginOut",value:function(){localStorage.clear(),window.history.go(0)}},{key:"render",value:function(){return o.a.createElement(T.a,null,o.a.createElement(k.a,{id:"components-layout-index"},o.a.createElement(N,{style:{width:"100%"}},o.a.createElement("div",{className:"site-header"},o.a.createElement("img",{className:"logo",src:n(187),alt:"logo"}),o.a.createElement("span",{className:"navbar-link navbar-noright-link"},o.a.createElement("span",null,o.a.createElement(T.b,{to:"/"},"\u9996\u9875")),this.props.user.token||Object(y.b)("token")?o.a.createElement(E.a,{dot:!0,count:this.props.user.messageCount},o.a.createElement("span",null,o.a.createElement(T.b,{to:"/message"},"\u6d88\u606f"))):"",this.props.user.token||Object(y.b)("token")?o.a.createElement("span",null,o.a.createElement(T.b,{to:"/collect"},"\u6536\u85cf")):"",o.a.createElement("span",null,o.a.createElement("a",{href:"https://github.com/guoqirong/react-cnode",rel:"noopener noreferrer",target:"_blank"},"GitHub\u4ed3\u5e93")),this.props.user.token||Object(y.b)("token")?o.a.createElement("span",null,o.a.createElement("span",{onClick:this.goLoginOut.bind(this)},"\u9000\u51fa")):o.a.createElement("span",null,o.a.createElement(T.b,{to:"/login"},"\u767b\u5f55"))))),o.a.createElement(R,{className:"site-layout",style:{width:"90%",margin:"10px auto"}},o.a.createElement("div",null,o.a.createElement(A.d,null,D.map((function(e,t){return e.exact?o.a.createElement(A.b,{key:t,exact:!0,path:e.path,render:function(t){return o.a.createElement(e.component,Object.assign({},t,{routes:e.routes}))}}):o.a.createElement(A.b,{key:t,path:e.path,render:function(t){return o.a.createElement(e.component,Object.assign({},t,{routes:e.routes}))}})})),o.a.createElement(A.a,{from:"/*",to:"/"})))),o.a.createElement(w,{style:{textAlign:"center",backgroundColor:"#ffffff",color:"#ababab"}},o.a.createElement("div",null,"CNode \u793e\u533a\u4e3a\u56fd\u5185\u6700\u4e13\u4e1a\u7684 Node.js \u5f00\u6e90\u6280\u672f\u793e\u533a\uff0c\u81f4\u529b\u4e8e Node.js \u7684\u6280\u672f\u7814\u7a76\u3002"),o.a.createElement("div",null,"CNode \u793e\u533a\u7248\u6743\u5f52xxxxxx\u6240\u6709"))))}}]),a}(a.Component),U=Object(i.b)((function(e){return{user:e.user}}),(function(e){return{getmessagecount:function(t){return e(Object(S.b)(t))}}}))(x);var P=function(){return o.a.createElement(U,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var W=Object(u.d)(m,h);r.a.render(o.a.createElement(i.a,{store:W},o.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},19:function(e,t,n){"use strict";n.d(t,"g",(function(){return c})),n.d(t,"f",(function(){return r})),n.d(t,"h",(function(){return i})),n.d(t,"j",(function(){return u})),n.d(t,"i",(function(){return s})),n.d(t,"k",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return g})),n.d(t,"d",(function(){return b})),n.d(t,"e",(function(){return m}));var a={IS_PROD:!0};a.BASE_URL=(a.IS_PROD,"https://cnodejs.org"),a.CODE_BASE_PORT="",a.GATEWAY_URL=a.BASE_URL+a.CODE_BASE_PORT;var o=a,c="".concat(o.GATEWAY_URL,"/api/v1/topics"),r="".concat(o.GATEWAY_URL,"/api/v1/topic/"),i="".concat(o.GATEWAY_URL,"/api/v1/topic_collect/collect"),u="".concat(o.GATEWAY_URL,"/api/v1/topic_collect/de_collect"),s="".concat(o.GATEWAY_URL,"/api/v1/topic_collect/"),l="".concat(o.GATEWAY_URL,"/api/v1/user/"),d="".concat(o.GATEWAY_URL,"/api/v1/accesstoken"),f="".concat(o.GATEWAY_URL,"/api/v1/message/count"),g="".concat(o.GATEWAY_URL,"/api/v1/messages"),b="".concat(o.GATEWAY_URL,"/api/v1/message/mark_all"),m="".concat(o.GATEWAY_URL,"/api/v1/message/mark_one/")},5:function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"h",(function(){return o})),n.d(t,"f",(function(){return c})),n.d(t,"g",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return u})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return l}));var a="SETLOGINLOADING",o="SETUSERINFOLOADING",c="SETMESSAGELISTLOADING",r="SETTOKEN",i="ACCESSTOKEN",u="GETUSERINFO",s="GETMESSAGECOUNT",l="GETMESSAGELIST"},52:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"f",(function(){return f})),n.d(t,"e",(function(){return g}));var a=n(5),o=n(18),c=n(12),r=n(19),i=function(e){return{type:a.e,loginLoading:e}},u=function(e){return function(t){t(i(!0)),Object(o.a)({url:r.a,method:"POST",data:{accesstoken:e.token}}).then((function(n){var o={type:a.a,data:n};n.success&&(Object(c.c)("token",e.token),Object(c.c)("userName",n.loginname),t(o))})).catch((function(e){t(i(!1)),console.log(e)}))}},s=function(e){return function(t){var n;t((n=!0,{type:a.h,userinfoLoading:n})),Object(o.a)({url:r.k+e.userName,method:"GET"}).then((function(e){var n={type:a.d,data:e.data};t(n)})).catch((function(e){console.log(e)}))}},l=function(e){return function(t){Object(o.a)({url:r.c,method:"GET",params:{accesstoken:e.token}}).then((function(e){var n={type:a.b,data:e.success?e.data:e};t(n)})).catch((function(e){console.log(e)}))}},d=function(e){return function(t){var n;t((n=!0,{type:a.f,messageListLoading:n})),Object(o.a)({url:r.b,method:"GET",params:{accesstoken:e.token,mdrender:!0}}).then((function(e){var n={type:a.c,data:e.data};t(n)})).catch((function(e){console.log(e)}))}},f=function(e){return function(t){Object(o.a)({url:r.e+e.id,method:"POST",data:{accesstoken:e.token}}).then((function(){t(d({token:e.token}))})).catch((function(e){console.log(e)}))}},g=function(e){return function(t){Object(o.a)({url:r.d,method:"POST",data:{accesstoken:e.token}}).then((function(){t(d({token:e.token}))})).catch((function(e){console.log(e)}))}}},96:function(e,t,n){e.exports=n(188)}},[[96,5,6]]]);
//# sourceMappingURL=main.90808e40.chunk.js.map