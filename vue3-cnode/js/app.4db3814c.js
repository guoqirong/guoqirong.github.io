(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["vue3-cnode-app"]=t():e["vue3-cnode-app"]=t()})(window,(function(){return function(e){function t(t){for(var c,o,l=t[0],i=t[1],u=t[2],s=0,d=[];s<l.length;s++)o=l[s],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&d.push(r[o][0]),r[o]=0;for(c in i)Object.prototype.hasOwnProperty.call(i,c)&&(e[c]=i[c]);b&&b(t);while(d.length)d.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],c=!0,o=1;o<n.length;o++){var l=n[o];0!==r[l]&&(c=!1)}c&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var c={},o={app:0},r={app:0},a=[];function l(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-35dc3348":"26a94378","chunk-4f1d36c4":"ad173389","chunk-588ce536":"53841d9b","chunk-0f12c864":"b7ff8cfa","chunk-1a683f4b":"22a0f132","chunk-52e07ad6":"8f8eebda","chunk-8a8e1dbc":"93ee1b02","chunk-54115dd3":"30cccf20","chunk-78fe3498":"c24f123c"}[e]+".js"}function i(t){if(c[t])return c[t].exports;var n=c[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n={"chunk-35dc3348":1,"chunk-4f1d36c4":1,"chunk-588ce536":1,"chunk-0f12c864":1,"chunk-1a683f4b":1,"chunk-52e07ad6":1,"chunk-8a8e1dbc":1,"chunk-54115dd3":1,"chunk-78fe3498":1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=new Promise((function(t,n){for(var c="css/"+({}[e]||e)+"."+{"chunk-35dc3348":"668e332d","chunk-4f1d36c4":"4581cc28","chunk-588ce536":"aabf391c","chunk-0f12c864":"e52db302","chunk-1a683f4b":"8b4f25bc","chunk-52e07ad6":"288f46cd","chunk-8a8e1dbc":"54109829","chunk-54115dd3":"7755c8a0","chunk-78fe3498":"364ff98d"}[e]+".css",r=i.p+c,a=document.getElementsByTagName("link"),l=0;l<a.length;l++){var u=a[l],s=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(s===c||s===r))return t()}var d=document.getElementsByTagName("style");for(l=0;l<d.length;l++){u=d[l],s=u.getAttribute("data-href");if(s===c||s===r)return t()}var b=document.createElement("link");b.rel="stylesheet",b.type="text/css",b.onload=t,b.onerror=function(t){var c=t&&t.target&&t.target.src||r,a=new Error("Loading CSS chunk "+e+" failed.\n("+c+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=c,delete o[e],b.parentNode.removeChild(b),n(a)},b.href=r;var f=document.getElementsByTagName("head")[0];f.appendChild(b)})).then((function(){o[e]=0})));var c=r[e];if(0!==c)if(c)t.push(c[2]);else{var a=new Promise((function(t,n){c=r[e]=[t,n]}));t.push(c[2]=a);var u,s=document.createElement("script");s.charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.src=l(e);var d=new Error;u=function(t){s.onerror=s.onload=null,clearTimeout(b);var n=r[e];if(0!==n){if(n){var c=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+c+": "+o+")",d.name="ChunkLoadError",d.type=c,d.request=o,n[1](d)}r[e]=void 0}};var b=setTimeout((function(){u({type:"timeout",target:s})}),12e4);s.onerror=s.onload=u,document.head.appendChild(s)}return Promise.all(t)},i.m=e,i.c=c,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)i.d(n,c,function(t){return e[t]}.bind(null,c));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/vue3-cnode/",i.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp_vue3-cnode"]=window["webpackJsonp_vue3-cnode"]||[],s=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var b=s;return a.push([0,"chunk-vendors"]),n()}({0:function(e,t,n){e.exports=n("cd49")},"0613":function(e,t,n){"use strict";var c=n("5502"),o={namespaced:!0,state:{entryUrl:""},mutations:{updateEntryUrl:function(e,t){e.entryUrl=t}}},r={namespaced:!0,state:{token:"",simpleUserData:{},userData:{},isLoading:!1},mutations:{updateToken:function(e,t){e.token=t},updateSimpleUserData:function(e,t){e.simpleUserData=t},updateUserData:function(e,t){e.userData=t},updateLoading:function(e,t){e.isLoading=t}}};t["a"]=Object(c["a"])({modules:{grobal:o,user:r}})},"0f6d":function(e,t,n){},1420:function(e,t,n){"use strict";n("809a"),n("7a64"),n("0997"),n("83b2"),n("26f5");var c=n("9caa"),o=n("bfd2"),r=n("4c02"),a=n("def7"),l=n("7a23"),i={class:"not-login"},u=Object(l["createElementVNode"])("div",{class:"title"}," CNode：Node.js专业中文社区 ",-1),s={class:"describe"},d=Object(l["createElementVNode"])("span",{class:"not-bottom"},"当前为游客状态，您可以",-1),b=Object(l["createTextVNode"])("登录"),f={class:"card-title"},p={class:"user-skeleton"},m={class:"user-img"},j={class:"user-name"},O={key:0,class:"user-score"},h=Object(l["createElementVNode"])("span",{class:"card-title"},"我的主题",-1),g=["title"],k={key:0,class:"recent_topics"},v=Object(l["createElementVNode"])("div",null,"暂无数据",-1),C=[v],N=Object(l["createElementVNode"])("span",{class:"card-title"},"我的参与",-1),y=["title"],E={key:0,class:"recent_topics"},_=Object(l["createElementVNode"])("div",null,"暂无数据",-1),V=[_];function x(e,t,n,v,_,x){var B=a["a"],w=r["a"],D=c["b"],L=o["a"],S=c["a"];return Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],null,[e.token||e.authorData?Object(l["createCommentVNode"])("",!0):(Object(l["openBlock"])(),Object(l["createBlock"])(w,{key:0,class:"box-card"},{default:Object(l["withCtx"])((function(){return[Object(l["createElementVNode"])("span",i,[u,Object(l["createElementVNode"])("div",s,[d,Object(l["createVNode"])(B,{underline:!1,onClick:e.gotoLogin},{default:Object(l["withCtx"])((function(){return[b]})),_:1},8,["onClick"])])])]})),_:1})),e.token||e.authorData?(Object(l["openBlock"])(),Object(l["createBlock"])(w,{key:1,class:"box-card"},{header:Object(l["withCtx"])((function(){return[Object(l["createElementVNode"])("span",f,Object(l["toDisplayString"])(e.title),1)]})),default:Object(l["withCtx"])((function(){return[Object(l["createVNode"])(S,{loading:e.loading,animated:""},{template:Object(l["withCtx"])((function(){return[Object(l["createElementVNode"])("div",p,[Object(l["createVNode"])(D,{class:"skeleton-user-img"}),Object(l["createVNode"])(D,{class:"skeleton-user-name"}),Object(l["createVNode"])(D,{class:"skeleton-user-score"})])]})),default:Object(l["withCtx"])((function(){return[Object(l["createElementVNode"])("div",{class:"user",onClick:t[0]||(t[0]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.gotoUserDetail&&e.gotoUserDetail.apply(e,t)})},[Object(l["createElementVNode"])("div",m,[(Object(l["openBlock"])(),Object(l["createBlock"])(L,{shape:"square",size:40,src:e.userData.avatar_url||"",key:e.userData.avatar_url||"",alt:e.userData.loginname||""},null,8,["src","alt"]))]),Object(l["createElementVNode"])("div",j,Object(l["toDisplayString"])(e.userData.loginname||""),1),e.userData.score?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",O,"积分："+Object(l["toDisplayString"])(e.userData.score||""),1)):Object(l["createCommentVNode"])("",!0)])]})),_:1},8,["loading"])]})),_:1})):Object(l["createCommentVNode"])("",!0),e.isTopicsRepliesList&&e.token&&e.userData.recent_topics?(Object(l["openBlock"])(),Object(l["createBlock"])(w,{key:2,class:"box-card list-card"},{header:Object(l["withCtx"])((function(){return[h]})),default:Object(l["withCtx"])((function(){return[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(e.userData.recent_topics,(function(e,t){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:t,class:"recent_topics"},[Object(l["createElementVNode"])("div",{title:e.title},Object(l["toDisplayString"])(e.title),9,g)])})),128)),e.userData.recent_topics&&e.userData.recent_topics.length<1?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",k,C)):Object(l["createCommentVNode"])("",!0)]})),_:1})):Object(l["createCommentVNode"])("",!0),e.isTopicsRepliesList&&e.token&&e.userData.recent_replies?(Object(l["openBlock"])(),Object(l["createBlock"])(w,{key:3,class:"box-card list-card"},{header:Object(l["withCtx"])((function(){return[N]})),default:Object(l["withCtx"])((function(){return[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(e.userData.recent_replies,(function(e,t){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:t,class:"recent_topics"},[Object(l["createElementVNode"])("div",{title:e.title},Object(l["toDisplayString"])(e.title),9,y)])})),128)),e.userData.recent_replies&&e.userData.recent_replies.length<1?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",E,V)):Object(l["createCommentVNode"])("",!0)]})),_:1})):Object(l["createCommentVNode"])("",!0)],64)}var B=n("6c02"),w=n("5502"),D=Object(l["defineComponent"])({name:"UserInfoComp",components:{ElSkeleton:c["a"],ElSkeletonItem:c["b"]},props:{title:{type:String,default:"个人信息"},authorData:{type:Object,default:void 0},authorLoading:Boolean,isTopicsRepliesList:{type:Boolean,default:!0}},setup:function(e){var t=Object(w["b"])().state,n=Object(B["c"])(),c=Object(B["d"])(),o=Object(l["computed"])((function(){return t.user.token})),r=Object(l["computed"])((function(){var n;return null!==(n=e.authorLoading)&&void 0!==n?n:t.user.isLoading})),a=Object(l["computed"])((function(){var n;return null!==(n=e.authorData)&&void 0!==n?n:t.user.userData})),i=function(){"/login"!==n.path&&c.push({path:"/login"})},u=function(){c.push({path:"/user/"+a.value.loginname})};return{token:o,loading:r,userData:a,gotoLogin:i,gotoUserDetail:u}}}),L=(n("7d2e"),n("6b0d")),S=n.n(L);const T=S()(D,[["render",x]]);t["a"]=T},"1d11":function(e,t,n){"use strict";n.r(t),n.d(t,"emitter",(function(){return P}));n("83b2"),n("809a"),n("0a78"),n("7a64"),n("797a");var c=n("8c98"),o=n("4c02"),r=n("9caa"),a=n("d09f"),l=n("bfd2"),i=n("cf2e"),u=n("7a23"),s={class:"my-message"},d=Object(u["createElementVNode"])("span",{class:"card-title"},"未读信息",-1),b=Object(u["createTextVNode"])("全部已读"),f={class:"user-img"},p={class:"read-messages-title"},m={class:"title"},j={class:"desc"},O={class:"read-btn"},h=Object(u["createTextVNode"])("已读"),g=["innerHTML"],k={class:"topic-title"},v=Object(u["createElementVNode"])("span",{class:"card-title"},"已读信息",-1),C={class:"user-img"},N={class:"read-messages-title"},y={class:"title"},E={class:"desc"},_=["innerHTML"],V={class:"topic-title"};function x(e,t,n,x,B,w){var D=i["a"],L=l["a"],S=a["a"],T=r["a"],U=o["a"],P=Object(u["resolveComponent"])("user-info-comp"),I=Object(u["resolveComponent"])("client-qr-code-comp"),M=c["a"];return Object(u["openBlock"])(),Object(u["createElementBlock"])("div",s,[Object(u["createVNode"])(M,null,{right:Object(u["withCtx"])((function(){return[Object(u["createVNode"])(P),Object(u["createVNode"])(I)]})),default:Object(u["withCtx"])((function(){return[Object(u["createVNode"])(U,{class:"box-card"},{header:Object(u["withCtx"])((function(){return[d,e.message&&e.message.hasnot_read_messages&&e.message.hasnot_read_messages.length>0?(Object(u["openBlock"])(),Object(u["createBlock"])(D,{key:0,class:"all-read",onClick:e.readAll},{default:Object(u["withCtx"])((function(){return[b]})),_:1},8,["onClick"])):Object(u["createCommentVNode"])("",!0)]})),default:Object(u["withCtx"])((function(){return[Object(u["createVNode"])(T,{class:"message-skeleton",loading:e.isLoading,animated:"",rows:6},{default:Object(u["withCtx"])((function(){return[e.message&&e.message.hasnot_read_messages&&e.message.hasnot_read_messages.length>0?(Object(u["openBlock"])(!0),Object(u["createElementBlock"])(u["Fragment"],{key:0},Object(u["renderList"])(e.message.hasnot_read_messages,(function(t,n){return Object(u["openBlock"])(),Object(u["createElementBlock"])("div",{key:n,class:"notread-item"},[Object(u["createElementVNode"])("div",f,[(Object(u["openBlock"])(),Object(u["createBlock"])(L,{shape:"square",size:40,src:t.author.avatar_url,key:t.author.avatar_url,alt:t.author.loginname},null,8,["src","alt"]))]),Object(u["createElementVNode"])("div",p,[Object(u["createElementVNode"])("div",m,Object(u["toDisplayString"])(t.author.loginname+"回复了您的话题"),1),Object(u["createElementVNode"])("div",j,Object(u["toDisplayString"])(e.formatDate(t.create_at,"yyyy-MM-dd")),1)]),Object(u["createElementVNode"])("div",O,[Object(u["createVNode"])(D,{onClick:function(n){return e.readOne(t.id)}},{default:Object(u["withCtx"])((function(){return[h]})),_:2},1032,["onClick"])]),Object(u["createElementVNode"])("div",{class:"reply-content",innerHTML:t.reply.content},null,8,g),Object(u["createElementVNode"])("div",k,"话题："+Object(u["toDisplayString"])(t.topic.title),1)])})),128)):(Object(u["openBlock"])(),Object(u["createBlock"])(S,{key:1,description:"暂无数据"}))]})),_:1},8,["loading"])]})),_:1}),Object(u["createVNode"])(U,{class:"box-card"},{header:Object(u["withCtx"])((function(){return[v]})),default:Object(u["withCtx"])((function(){return[Object(u["createVNode"])(T,{class:"message-skeleton",loading:e.isLoading,animated:"",rows:6},{default:Object(u["withCtx"])((function(){return[e.message&&e.message.has_read_messages&&e.message.has_read_messages.length>0?(Object(u["openBlock"])(!0),Object(u["createElementBlock"])(u["Fragment"],{key:0},Object(u["renderList"])(e.message.has_read_messages,(function(t,n){return Object(u["openBlock"])(),Object(u["createElementBlock"])("div",{key:n,class:"read-item"},[Object(u["createElementVNode"])("div",C,[(Object(u["openBlock"])(),Object(u["createBlock"])(L,{shape:"square",size:40,src:t.author.avatar_url,key:t.author.avatar_url,alt:t.author.loginname},null,8,["src","alt"]))]),Object(u["createElementVNode"])("div",N,[Object(u["createElementVNode"])("div",y,Object(u["toDisplayString"])(t.author.loginname+"回复了您的话题"),1),Object(u["createElementVNode"])("div",E,Object(u["toDisplayString"])(e.formatDate(t.create_at,"yyyy-MM-dd")),1)]),Object(u["createElementVNode"])("div",{class:"reply-content",innerHTML:t.reply.content},null,8,_),Object(u["createElementVNode"])("div",V,"话题："+Object(u["toDisplayString"])(t.topic.title),1)])})),128)):(Object(u["openBlock"])(),Object(u["createBlock"])(S,{key:1,description:"暂无数据"}))]})),_:1},8,["loading"])]})),_:1})]})),_:1})])}var B=n("7780"),w=n("1420"),D=n("b32d"),L=n("5502"),S=n("3ef4"),T=n("d257"),U=n("1344"),P=Object(U["a"])(),I=Object(u["defineComponent"])({components:{ElSkeleton:r["a"],ElEmpty:a["a"],ClientQrCodeComp:B["a"],UserInfoComp:w["a"]},setup:function(){var e=Object(L["b"])().state,t=Object(u["computed"])((function(){return e.user.token})),n=Object(D["a"])(),c=n.isLoading,o=n.adornUrl,r=n.httpRequest,a=Object(u["ref"])(),l=function(){t.value&&r({url:o("/api/v1/messages"),method:"get",params:{accesstoken:t.value,mdrender:!0}}).then((function(e){var t=e.data;t.data.has_read_messages.forEach((function(e){e.reply.content=Object(T["a"])(e.reply.content)})),t.data.hasnot_read_messages.forEach((function(e){e.reply.content=Object(T["a"])(e.reply.content)})),a.value=t.data})).catch((function(e){S["a"].error("请求失败"),console.error(e)}))};l();var i=Object(D["a"])().httpRequest,s=function(){i({url:o("/api/v1/message/mark_all"),method:"post",params:{accesstoken:t.value}}).then((function(){P.emit("read-msg"),l()})).catch((function(e){S["a"].error("请求失败"),console.error(e)}))},d=function(e){i({url:o("/api/v1/message/mark_one/"+e),method:"post",params:{accesstoken:t.value}}).then((function(){P.emit("read-msg"),l()})).catch((function(e){S["a"].error("请求失败"),console.error(e)}))};return{message:a,isLoading:c,readAll:s,readOne:d,formatDate:T["b"]}}}),M=(n("408d"),n("6b0d")),q=n.n(M);const R=q()(I,[["render",x]]);t["default"]=R},"20b3":function(e,t,n){},"408d":function(e,t,n){"use strict";n("a3cb")},"491b":function(e,t,n){"use strict";n("c463")},"4a3f":function(e,t,n){},"53f3":function(e,t,n){"use strict";n("4a3f")},7780:function(e,t,n){"use strict";n("83b2"),n("26f5"),n("effa");var c=n("4c02"),o=n("def7"),r=n("03ae"),a=n("7a23"),l=Object(a["createElementVNode"])("span",{class:"card-title"},"客户端二维码",-1),i={class:"client-box"},u=Object(a["createTextVNode"])("客户端源码地址");function s(e,t,n,s,d,b){var f=r["a"],p=o["a"],m=c["a"];return Object(a["openBlock"])(),Object(a["createBlock"])(m,{class:"box-card"},{header:Object(a["withCtx"])((function(){return[l]})),default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(f,{class:"qr-image",src:"https://static.cnodejs.org/FtG0YVgQ6iginiLpf9W4_ShjiLfU",fit:"fill"}),Object(a["createElementVNode"])("div",i,[Object(a["createVNode"])(p,{underline:!1,href:"https://github.com/soliury/noder-react-native",target:"_blank"},{default:Object(a["withCtx"])((function(){return[u]})),_:1})])]})),_:1})}var d=Object(a["defineComponent"])({name:"ClientQrCodeComp",components:{ElCard:c["a"],ElImage:r["a"],ElLink:o["a"]}}),b=(n("fe05"),n("6b0d")),f=n.n(b);const p=f()(d,[["render",s]]);t["a"]=p},"7d2e":function(e,t,n){"use strict";n("d593")},"8c98":function(e,t,n){"use strict";var c=n("7a23"),o={class:"lift-content"},r={class:"right-content"};function a(e,t,n,a,l,i){return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createElementVNode"])("div",o,[Object(c["renderSlot"])(e.$slots,"default")]),Object(c["createElementVNode"])("div",r,[Object(c["renderSlot"])(e.$slots,"right")])],64)}var l=Object(c["defineComponent"])({name:"PageWrapper"}),i=(n("961b"),n("6b0d")),u=n.n(i);const s=u()(l,[["render",a]]);t["a"]=s},"93f3":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var c=[{key:"all",name:"全部"},{key:"good",name:"精华"},{key:"share",name:"分享"},{key:"ask",name:"问答"},{key:"job",name:"招聘"},{key:"dev",name:"客户端测试"}]},"961b":function(e,t,n){"use strict";n("0f6d")},a3cb:function(e,t,n){},afbc:function(e,t,n){"use strict";var c=n("0613"),o=n("6c02"),r=[{path:"/",name:"index",component:function(){return Promise.all([n.e("chunk-588ce536"),n.e("chunk-1a683f4b"),n.e("chunk-54115dd3")]).then(n.bind(null,"37f9"))}},{path:"/login",name:"login",component:function(){return Promise.all([n.e("chunk-4f1d36c4"),n.e("chunk-588ce536"),n.e("chunk-0f12c864")]).then(n.bind(null,"9ed6"))}},{path:"/detail",name:"detail",component:function(){return Promise.all([n.e("chunk-4f1d36c4"),n.e("chunk-8a8e1dbc")]).then(n.bind(null,"8248"))}},{path:"/add-topic",name:"addTopic",meta:{requiredLogin:!0},component:function(){return Promise.all([n.e("chunk-4f1d36c4"),n.e("chunk-588ce536"),n.e("chunk-1a683f4b"),n.e("chunk-52e07ad6")]).then(n.bind(null,"b55f"))}},{path:"/edit-topic/:id",name:"editTopic",meta:{requiredLogin:!0},component:function(){return Promise.all([n.e("chunk-4f1d36c4"),n.e("chunk-588ce536"),n.e("chunk-1a683f4b"),n.e("chunk-52e07ad6")]).then(n.bind(null,"b55f"))}},{path:"/message",name:"message",meta:{requiredLogin:!0},component:function(){return Promise.resolve().then(n.bind(null,"1d11"))}},{path:"/collect",name:"collect",meta:{requiredLogin:!0},component:function(){return n.e("chunk-35dc3348").then(n.bind(null,"3ae0"))}},{path:"/user/:userName",name:"userDetail",meta:{requiredLogin:!0},component:function(){return n.e("chunk-78fe3498").then(n.bind(null,"dc30"))}}],a=Object(o["a"])({history:Object(o["b"])("/vue3-cnode"),routes:r});a.beforeEach((function(e,t,n){"login"===e.name&&c["a"].state.user.token?n("/"):e.meta.requiredLogin&&!c["a"].state.user.token?n({name:"login"}):n()})),t["a"]=a},b32d:function(e,t,n){"use strict";var c=n("bc3a"),o=n.n(c),r=n("7a23"),a=function(){var e=Object(r["ref"])(!1),t=function(e){return"https://cnodejs.org"+e},n=o.a.create({timeout:6e4,withCredentials:!1,headers:{"Content-Type":"application/json; charset=utf-8"}});return n.interceptors.request.use((function(t){return e.value=!0,t})),n.interceptors.response.use((function(t){return t&&403===t.status?console.error("登录失败"):t&&200!==t.status&&console.error("请求失败"),e.value=!1,t}),(function(t){return e.value=!1,Promise.reject(t)})),{isLoading:e,adornUrl:t,httpRequest:n}};t["a"]=a},b54e:function(e,t,n){"use strict";n("20b3")},bd99:function(e,t,n){"use strict";window.__POWERED_BY_QIANKUN__&&(n.p=window.__INJECTED_PUBLIC_PATH_BY_QIANKUN__)},c463:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t),n.d(t,"bootstrap",(function(){return ee})),n.d(t,"mount",(function(){return te})),n.d(t,"unmount",(function(){return ne}));var c=n("9ab4"),o=(n("bd99"),n("7a23")),r=(n("5e0e"),n("d47a"),n("330d"),n("9d28"),n("797a"),n("b6c4")),a=n("c5ff"),l=n("cf2e");function i(e,t,n,c,i,u){var s=Object(o["resolveComponent"])("header-comp"),d=Object(o["resolveComponent"])("router-view"),b=Object(o["resolveComponent"])("footer-comp"),f=l["a"],p=a["a"],m=r["a"];return Object(o["openBlock"])(),Object(o["createBlock"])(m,{locale:e.locale},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{ref:"scrollbarRef",height:"100vh",onScroll:e.scroll},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s),Object(o["createVNode"])(d),Object(o["createVNode"])(b),e.top>200?(Object(o["openBlock"])(),Object(o["createBlock"])(f,{key:0,class:"back-top",size:"large",icon:e.CaretTop,circle:"",onClick:e.backTop},null,8,["icon","onClick"])):Object(o["createCommentVNode"])("",!0)]})),_:1},8,["onScroll"])]})),_:1},8,["locale"])}var u=n("3ef4"),s=n("bf4f"),d=n("3ef0"),b=n.n(d),f=(n("2c92"),n("26f5"),n("0388")),p=n("def7"),m={class:"navbar"},j={class:"navbar-content"},O=["src"],h={class:"navbar-link navbar-noright-link"},g=Object(o["createTextVNode"])("首页"),k={key:0},v=Object(o["createTextVNode"])("消息"),C=Object(o["createTextVNode"])("消息"),N={key:1},y=Object(o["createTextVNode"])("收藏"),E=Object(o["createTextVNode"])("GitHub仓库"),_={key:2},V=Object(o["createTextVNode"])("登录"),x={key:3},B=Object(o["createTextVNode"])("退出");function w(e,t,n,c,r,a){var l=p["a"],i=f["a"];return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",m,[Object(o["createElementVNode"])("div",j,[Object(o["createElementVNode"])("span",{class:"navbar-logo",onClick:t[0]||(t[0]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.gotoIndex&&e.gotoIndex.apply(e,t)})},[Object(o["createElementVNode"])("img",{src:e.logoImage},null,8,O)]),Object(o["createElementVNode"])("span",h,[Object(o["createElementVNode"])("span",null,[Object(o["createVNode"])(l,{underline:!1,onClick:e.gotoIndex},{default:Object(o["withCtx"])((function(){return[g]})),_:1},8,["onClick"])]),""!==e.token?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",k,[e.count>0?(Object(o["openBlock"])(),Object(o["createBlock"])(i,{key:0,value:e.count,class:"badge-item"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{underline:!1,onClick:e.gotoMessage},{default:Object(o["withCtx"])((function(){return[v]})),_:1},8,["onClick"])]})),_:1},8,["value"])):(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:1,underline:!1,onClick:e.gotoMessage},{default:Object(o["withCtx"])((function(){return[C]})),_:1},8,["onClick"]))])):Object(o["createCommentVNode"])("",!0),""!==e.token?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",N,[Object(o["createVNode"])(l,{underline:!1,onClick:e.gotoCollect},{default:Object(o["withCtx"])((function(){return[y]})),_:1},8,["onClick"])])):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("span",null,[Object(o["createVNode"])(l,{underline:!1,href:"https://github.com/guoqirong/vue3-cnode",target:"_blank"},{default:Object(o["withCtx"])((function(){return[E]})),_:1})]),""===e.token?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",_,[Object(o["createVNode"])(l,{underline:!1,onClick:e.gotoLogin},{default:Object(o["withCtx"])((function(){return[V]})),_:1},8,["onClick"])])):Object(o["createCommentVNode"])("",!0),""!==e.token?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",x,[Object(o["createVNode"])(l,{underline:!1,onClick:e.logout},{default:Object(o["withCtx"])((function(){return[B]})),_:1},8,["onClick"])])):Object(o["createCommentVNode"])("",!0)])])])}var D=n("5502"),L=n("6c02"),S=n("b32d"),T=n("1d11"),U=Object(o["defineComponent"])({name:"HeaderComp",components:{ElLink:p["a"],ElBadge:f["a"]},setup:function(){var e=Object(D["b"])(),t=e.state,c=e.commit,r=Object(L["c"])(),a=Object(L["d"])(),l=Object(S["a"])(),i=l.adornUrl,u=l.httpRequest,s=Object(o["computed"])((function(){return n("e347")})),d=Object(o["computed"])((function(){return t.user.token})),b=function(){"/index"!==r.path&&a.push({path:"/"})};T["emitter"].on("read-msg",(function(){p()}));var f=Object(o["ref"])(0);Object(o["watch"])(d,(function(e){e?p():c("user/updateUserData",{})}));var p=function(){u({url:i("/api/v1/message/count"),method:"get",params:{accesstoken:d.value||""}}).then((function(e){var t=e.data;f.value=t.data})).catch((function(e){console.error(e)}))},m=function(){"/message"!==r.path&&a.push({path:"/message"})},j=function(){"/collect"!==r.path&&a.push({path:"/collect"})},O=function(){"/login"!==r.path&&a.push({path:"/login"})},h=function(){localStorage.removeItem("loginname"),localStorage.removeItem("token"),c("user/updateToken",""),c("user/updateSimpleUserData",{}),b()};return{logoImage:s,token:d,gotoIndex:b,count:f,gotoMessage:m,gotoCollect:j,gotoLogin:O,logout:h}}}),P=(n("491b"),n("6b0d")),I=n.n(P);const M=I()(U,[["render",w]]);var q=M,R={class:"body-footer"},A=Object(o["createElementVNode"])("div",{class:"footer-content"},[Object(o["createElementVNode"])("div",null,"CNode 社区为国内最专业的 Node.js 开源技术社区，致力于 Node.js 的技术研究。"),Object(o["createElementVNode"])("div",null,"CNode 社区版权归xxxxxx所有")],-1),F=[A];function H(e,t,n,c,r,a){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",R,F)}var $=Object(o["defineComponent"])({name:"FooterComp"});n("b54e");const Q=I()($,[["render",H]]);var Y=Q,z=Object(o["defineComponent"])({components:{HeaderComp:q,FooterComp:Y,ElConfigProvider:r["a"],ElScrollbar:a["a"],ElButton:l["a"]},setup:function(){var e=Object(S["a"])(),t=e.isLoading,n=e.adornUrl,c=e.httpRequest,r=Object(D["b"])(),a=r.state,l=r.commit,i=Object(o["computed"])((function(){return a.user.token}));Object(o["watch"])(i,(function(e){e&&d(a.user.simpleUserData.loginname)})),Object(o["watch"])(t,(function(e){l("user/updateLoading",e)}));var d=function(e){c({url:n("/api/v1/user/"+e),method:"get"}).then((function(e){var t=e.data;l("user/updateUserData",t.data)})).catch((function(e){u["a"].error("请求失败"),console.error(e)}))};Object(o["onMounted"])((function(){l("user/updateSimpleUserData",{loginname:localStorage.getItem("loginname")||""}),l("user/updateToken",localStorage.getItem("token")||"")}));var f=Object(o["ref"])(0),p=Object(o["ref"])(),m=function(e){f.value=e.scrollTop},j=function(){var e;null===(e=p.value)||void 0===e||e.setScrollTop(0)};return{locale:b.a,top:f,scrollbarRef:p,scroll:m,CaretTop:s["a"],backTop:j}}});n("53f3");const K=I()(z,[["render",i]]);var W=K,J=n("afbc"),G=n("0613"),X=void 0;function Z(e){return Object(c["b"])(this,void 0,void 0,(function(){var t,n,r;return Object(c["c"])(this,(function(c){switch(c.label){case 0:return t=null!==e&&void 0!==e?e:{},n=t.container,r=t.entry,[4,Object(o["createApp"])(W).use(G["a"]).use(J["a"]).mount(n?n.querySelector("#app"):"#app")];case 1:return X=c.sent(),G["a"].commit("grobal/updateEntryUrl",r),[2]}}))}))}function ee(){return Object(c["b"])(this,void 0,Promise,(function(){return Object(c["c"])(this,(function(e){switch(e.label){case 0:return console.log("[vue] vue app bootstraped"),[4,new Promise((function(e){e(!0)}))];case 1:return[2,e.sent()]}}))}))}function te(e){console.log("[vue] props from main framework",e),Z(e)}function ne(){var e,t;return Object(c["b"])(this,void 0,void 0,(function(){return Object(c["c"])(this,(function(n){return X&&(null===(t=(e=X.$options).unmounted)||void 0===t||t.call(e),X.$el.innerHTML="",X=void 0),[2]}))}))}window.__POWERED_BY_QIANKUN__||Z()},d257:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return i}));var c=n("93f3"),o=function(e,t){var n=new Date(e);if(""!==e&&!n.getFullYear())return console.error("时间格式错误！"),"";/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length)));var c={"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds()};for(var o in c)if(new RegExp("("+o+")").test(t)){var a=c[o]+"";t=t.replace(RegExp.$1,1===RegExp.$1.length?a:r(a))}return t},r=function(e){return("00"+e).substr(e.length)},a=function(e,t){var n,o;return e?"置顶":null!==(o=null===(n=c["a"].find((function(e){return e.key===t})))||void 0===n?void 0:n.name)&&void 0!==o?o:"未知"},l=function(e,t){return void 0!==e&&void 0!==t?parseInt(String(Math.random()*(t-e+1)+e),10):void 0!==e?parseInt(String(Math.random()*e+1),10):0},i=function(e){var t=e.replace(/“|”/g,'"');return t=t.replace(/href="+(\/.?user.?\/|user.?\/)/g,'href="./#/user/'),t=t.replace(/&lt;/g,"<"),t.replace(/&gt;/g,">")}},d593:function(e,t,n){},e347:function(e,t,n){e.exports=n.p+"img/logo.e2b40b75.svg"},e75a:function(e,t,n){},fe05:function(e,t,n){"use strict";n("e75a")}})}));
//# sourceMappingURL=app.4db3814c.js.map