(function(e){function t(t){for(var c,a,l=t[0],i=t[1],u=t[2],s=0,d=[];s<l.length;s++)a=l[s],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(c in i)Object.prototype.hasOwnProperty.call(i,c)&&(e[c]=i[c]);b&&b(t);while(d.length)d.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],c=!0,a=1;a<n.length;a++){var l=n[a];0!==o[l]&&(c=!1)}c&&(r.splice(t--,1),e=i(i.s=n[0]))}return e}var c={},a={app:0},o={app:0},r=[];function l(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-c28b52e8":"bedf65aa","chunk-588ce536":"ae8d85d8","chunk-a7e61c38":"d0768c46","chunk-ea90bb18":"9196e8ad","chunk-c655ceae":"4157b184","chunk-17c529b8":"1d2b05a8","chunk-c30bdc32":"77f49b44","chunk-ec24e74c":"ada818f6","chunk-1c9a8564":"46701d03","chunk-58cc6a38":"f9a17ea8","chunk-5a768342":"2c0a1627"}[e]+".js"}function i(t){if(c[t])return c[t].exports;var n=c[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n={"chunk-c28b52e8":1,"chunk-588ce536":1,"chunk-a7e61c38":1,"chunk-ea90bb18":1,"chunk-c655ceae":1,"chunk-17c529b8":1,"chunk-c30bdc32":1,"chunk-ec24e74c":1,"chunk-1c9a8564":1,"chunk-58cc6a38":1,"chunk-5a768342":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var c="css/"+({}[e]||e)+"."+{"chunk-c28b52e8":"14f8c775","chunk-588ce536":"aabf391c","chunk-a7e61c38":"d7e93396","chunk-ea90bb18":"24f16de0","chunk-c655ceae":"c10d6c04","chunk-17c529b8":"784047bf","chunk-c30bdc32":"4aaabd91","chunk-ec24e74c":"06c90cb2","chunk-1c9a8564":"5418439f","chunk-58cc6a38":"d5bdf12a","chunk-5a768342":"a0a0d70d"}[e]+".css",o=i.p+c,r=document.getElementsByTagName("link"),l=0;l<r.length;l++){var u=r[l],s=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(s===c||s===o))return t()}var d=document.getElementsByTagName("style");for(l=0;l<d.length;l++){u=d[l],s=u.getAttribute("data-href");if(s===c||s===o)return t()}var b=document.createElement("link");b.rel="stylesheet",b.type="text/css",b.onload=t,b.onerror=function(t){var c=t&&t.target&&t.target.src||o,r=new Error("Loading CSS chunk "+e+" failed.\n("+c+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=c,delete a[e],b.parentNode.removeChild(b),n(r)},b.href=o;var m=document.getElementsByTagName("head")[0];m.appendChild(b)})).then((function(){a[e]=0})));var c=o[e];if(0!==c)if(c)t.push(c[2]);else{var r=new Promise((function(t,n){c=o[e]=[t,n]}));t.push(c[2]=r);var u,s=document.createElement("script");s.charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.src=l(e);var d=new Error;u=function(t){s.onerror=s.onload=null,clearTimeout(b);var n=o[e];if(0!==n){if(n){var c=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+c+": "+a+")",d.name="ChunkLoadError",d.type=c,d.request=a,n[1](d)}o[e]=void 0}};var b=setTimeout((function(){u({type:"timeout",target:s})}),12e4);s.onerror=s.onload=u,document.head.appendChild(s)}return Promise.all(t)},i.m=e,i.c=c,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)i.d(n,c,function(t){return e[t]}.bind(null,c));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],s=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var b=s;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"0613":function(e,t,n){"use strict";var c=n("5502"),a={namespaced:!0,state:{token:"",simpleUserData:{},userData:{},isLoading:!1},mutations:{updateToken:function(e,t){e.token=t},updateSimpleUserData:function(e,t){e.simpleUserData=t},updateUserData:function(e,t){e.userData=t},updateLoading:function(e,t){e.isLoading=t}}};t["a"]=Object(c["a"])({modules:{user:a}})},"0f6d":function(e,t,n){},1420:function(e,t,n){"use strict";n("809a"),n("7a64"),n("0997"),n("83b2"),n("26f5");var c=n("9caa"),a=n("bfd2"),o=n("4c02"),r=n("def7"),l=n("7a23"),i={class:"not-login"},u=Object(l["createElementVNode"])("div",{class:"title"}," CNode：Node.js专业中文社区 ",-1),s={class:"describe"},d=Object(l["createElementVNode"])("span",{class:"not-bottom"},"当前为游客状态，您可以",-1),b=Object(l["createTextVNode"])("登录"),m={class:"card-title"},f={class:"user-skeleton"},p={class:"user-img"},j={class:"user-name"},O={key:0,class:"user-score"},h=Object(l["createElementVNode"])("span",{class:"card-title"},"我的主题",-1),k=["title"],g={key:0,class:"recent_topics"},v=Object(l["createElementVNode"])("div",null,"暂无数据",-1),C=[v],N=Object(l["createElementVNode"])("span",{class:"card-title"},"我的参与",-1),y=["title"],E={key:0,class:"recent_topics"},V=Object(l["createElementVNode"])("div",null,"暂无数据",-1),_=[V];function x(e,t,n,v,V,x){var B=r["a"],w=o["a"],D=c["b"],L=a["a"],S=c["a"];return Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],null,[e.token||e.authorData?Object(l["createCommentVNode"])("",!0):(Object(l["openBlock"])(),Object(l["createBlock"])(w,{key:0,class:"box-card"},{default:Object(l["withCtx"])((function(){return[Object(l["createElementVNode"])("span",i,[u,Object(l["createElementVNode"])("div",s,[d,Object(l["createVNode"])(B,{underline:!1,onClick:e.gotoLogin},{default:Object(l["withCtx"])((function(){return[b]})),_:1},8,["onClick"])])])]})),_:1})),e.token||e.authorData?(Object(l["openBlock"])(),Object(l["createBlock"])(w,{key:1,class:"box-card"},{header:Object(l["withCtx"])((function(){return[Object(l["createElementVNode"])("span",m,Object(l["toDisplayString"])(e.title),1)]})),default:Object(l["withCtx"])((function(){return[Object(l["createVNode"])(S,{loading:e.loading,animated:""},{template:Object(l["withCtx"])((function(){return[Object(l["createElementVNode"])("div",f,[Object(l["createVNode"])(D,{class:"skeleton-user-img"}),Object(l["createVNode"])(D,{class:"skeleton-user-name"}),Object(l["createVNode"])(D,{class:"skeleton-user-score"})])]})),default:Object(l["withCtx"])((function(){return[Object(l["createElementVNode"])("div",{class:"user",onClick:t[0]||(t[0]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.gotoUserDetail&&e.gotoUserDetail.apply(e,t)})},[Object(l["createElementVNode"])("div",p,[(Object(l["openBlock"])(),Object(l["createBlock"])(L,{shape:"square",size:40,src:e.userData.avatar_url||"",key:e.userData.avatar_url||"",alt:e.userData.loginname||""},null,8,["src","alt"]))]),Object(l["createElementVNode"])("div",j,Object(l["toDisplayString"])(e.userData.loginname||""),1),e.userData.score?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",O,"积分："+Object(l["toDisplayString"])(e.userData.score||""),1)):Object(l["createCommentVNode"])("",!0)])]})),_:1},8,["loading"])]})),_:1})):Object(l["createCommentVNode"])("",!0),e.isTopicsRepliesList&&e.token&&e.userData.recent_topics?(Object(l["openBlock"])(),Object(l["createBlock"])(w,{key:2,class:"box-card list-card"},{header:Object(l["withCtx"])((function(){return[h]})),default:Object(l["withCtx"])((function(){return[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(e.userData.recent_topics,(function(e,t){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:t,class:"recent_topics"},[Object(l["createElementVNode"])("div",{title:e.title},Object(l["toDisplayString"])(e.title),9,k)])})),128)),e.userData.recent_topics&&e.userData.recent_topics.length<1?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",g,C)):Object(l["createCommentVNode"])("",!0)]})),_:1})):Object(l["createCommentVNode"])("",!0),e.isTopicsRepliesList&&e.token&&e.userData.recent_replies?(Object(l["openBlock"])(),Object(l["createBlock"])(w,{key:3,class:"box-card list-card"},{header:Object(l["withCtx"])((function(){return[N]})),default:Object(l["withCtx"])((function(){return[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(e.userData.recent_replies,(function(e,t){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:t,class:"recent_topics"},[Object(l["createElementVNode"])("div",{title:e.title},Object(l["toDisplayString"])(e.title),9,y)])})),128)),e.userData.recent_replies&&e.userData.recent_replies.length<1?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",E,_)):Object(l["createCommentVNode"])("",!0)]})),_:1})):Object(l["createCommentVNode"])("",!0)],64)}var B=n("6c02"),w=n("5502"),D=Object(l["defineComponent"])({name:"UserInfoComp",components:{ElSkeleton:c["a"],ElSkeletonItem:c["b"]},props:{title:{type:String,default:"个人信息"},authorData:{type:Object,default:void 0},authorLoading:Boolean,isTopicsRepliesList:{type:Boolean,default:!0}},setup:function(e){var t=Object(w["b"])().state,n=Object(B["c"])(),c=Object(B["d"])(),a=Object(l["computed"])((function(){return t.user.token})),o=Object(l["computed"])((function(){var n;return null!==(n=e.authorLoading)&&void 0!==n?n:t.user.isLoading})),r=Object(l["computed"])((function(){var n;return null!==(n=e.authorData)&&void 0!==n?n:t.user.userData})),i=function(){"/login"!==n.path&&c.push({path:"/login"})},u=function(){c.push({path:"/user/"+r.value.loginname})};return{token:a,loading:o,userData:r,gotoLogin:i,gotoUserDetail:u}}}),L=(n("7d2e"),n("6b0d")),S=n.n(L);const T=S()(D,[["render",x]]);t["a"]=T},"1d11":function(e,t,n){"use strict";n.r(t),n.d(t,"emitter",(function(){return P}));n("83b2"),n("809a"),n("0a78"),n("7a64"),n("797a");var c=n("8c98"),a=n("4c02"),o=n("9caa"),r=n("d09f"),l=n("bfd2"),i=n("cf2e"),u=n("7a23"),s={class:"my-message"},d=Object(u["createElementVNode"])("span",{class:"card-title"},"未读信息",-1),b=Object(u["createTextVNode"])("全部已读"),m={class:"user-img"},f={class:"read-messages-title"},p={class:"title"},j={class:"desc"},O={class:"read-btn"},h=Object(u["createTextVNode"])("已读"),k=["innerHTML"],g={class:"topic-title"},v=Object(u["createElementVNode"])("span",{class:"card-title"},"已读信息",-1),C={class:"user-img"},N={class:"read-messages-title"},y={class:"title"},E={class:"desc"},V=["innerHTML"],_={class:"topic-title"};function x(e,t,n,x,B,w){var D=i["a"],L=l["a"],S=r["a"],T=o["a"],M=a["a"],P=Object(u["resolveComponent"])("user-info-comp"),U=Object(u["resolveComponent"])("client-qr-code-comp"),q=c["a"];return Object(u["openBlock"])(),Object(u["createElementBlock"])("div",s,[Object(u["createVNode"])(q,null,{right:Object(u["withCtx"])((function(){return[Object(u["createVNode"])(P),Object(u["createVNode"])(U)]})),default:Object(u["withCtx"])((function(){return[Object(u["createVNode"])(M,{class:"box-card"},{header:Object(u["withCtx"])((function(){return[d,e.message&&e.message.hasnot_read_messages&&e.message.hasnot_read_messages.length>0?(Object(u["openBlock"])(),Object(u["createBlock"])(D,{key:0,class:"all-read",onClick:e.readAll},{default:Object(u["withCtx"])((function(){return[b]})),_:1},8,["onClick"])):Object(u["createCommentVNode"])("",!0)]})),default:Object(u["withCtx"])((function(){return[Object(u["createVNode"])(T,{class:"message-skeleton",loading:e.isLoading,animated:"",rows:6},{default:Object(u["withCtx"])((function(){return[e.message&&e.message.hasnot_read_messages&&e.message.hasnot_read_messages.length>0?(Object(u["openBlock"])(!0),Object(u["createElementBlock"])(u["Fragment"],{key:0},Object(u["renderList"])(e.message.hasnot_read_messages,(function(t,n){return Object(u["openBlock"])(),Object(u["createElementBlock"])("div",{key:n,class:"notread-item"},[Object(u["createElementVNode"])("div",m,[(Object(u["openBlock"])(),Object(u["createBlock"])(L,{shape:"square",size:40,src:t.author.avatar_url,key:t.author.avatar_url,alt:t.author.loginname},null,8,["src","alt"]))]),Object(u["createElementVNode"])("div",f,[Object(u["createElementVNode"])("div",p,Object(u["toDisplayString"])(t.author.loginname+"回复了您的话题"),1),Object(u["createElementVNode"])("div",j,Object(u["toDisplayString"])(e.formatDate(t.create_at,"yyyy-MM-dd")),1)]),Object(u["createElementVNode"])("div",O,[Object(u["createVNode"])(D,{onClick:function(n){return e.readOne(t.id)}},{default:Object(u["withCtx"])((function(){return[h]})),_:2},1032,["onClick"])]),Object(u["createElementVNode"])("div",{class:"reply-content",innerHTML:t.reply.content},null,8,k),Object(u["createElementVNode"])("div",g,"话题："+Object(u["toDisplayString"])(t.topic.title),1)])})),128)):(Object(u["openBlock"])(),Object(u["createBlock"])(S,{key:1,description:"暂无数据"}))]})),_:1},8,["loading"])]})),_:1}),Object(u["createVNode"])(M,{class:"box-card"},{header:Object(u["withCtx"])((function(){return[v]})),default:Object(u["withCtx"])((function(){return[Object(u["createVNode"])(T,{class:"message-skeleton",loading:e.isLoading,animated:"",rows:6},{default:Object(u["withCtx"])((function(){return[e.message&&e.message.has_read_messages&&e.message.has_read_messages.length>0?(Object(u["openBlock"])(!0),Object(u["createElementBlock"])(u["Fragment"],{key:0},Object(u["renderList"])(e.message.has_read_messages,(function(t,n){return Object(u["openBlock"])(),Object(u["createElementBlock"])("div",{key:n,class:"read-item"},[Object(u["createElementVNode"])("div",C,[(Object(u["openBlock"])(),Object(u["createBlock"])(L,{shape:"square",size:40,src:t.author.avatar_url,key:t.author.avatar_url,alt:t.author.loginname},null,8,["src","alt"]))]),Object(u["createElementVNode"])("div",N,[Object(u["createElementVNode"])("div",y,Object(u["toDisplayString"])(t.author.loginname+"回复了您的话题"),1),Object(u["createElementVNode"])("div",E,Object(u["toDisplayString"])(e.formatDate(t.create_at,"yyyy-MM-dd")),1)]),Object(u["createElementVNode"])("div",{class:"reply-content",innerHTML:t.reply.content},null,8,V),Object(u["createElementVNode"])("div",_,"话题："+Object(u["toDisplayString"])(t.topic.title),1)])})),128)):(Object(u["openBlock"])(),Object(u["createBlock"])(S,{key:1,description:"暂无数据"}))]})),_:1},8,["loading"])]})),_:1})]})),_:1})])}var B=n("7780"),w=n("1420"),D=n("b32d"),L=n("5502"),S=n("3ef4"),T=n("d257"),M=n("1344"),P=Object(M["a"])(),U=Object(u["defineComponent"])({components:{ElSkeleton:o["a"],ElEmpty:r["a"],ClientQrCodeComp:B["a"],UserInfoComp:w["a"]},setup:function(){var e=Object(L["b"])().state,t=Object(u["computed"])((function(){return e.user.token})),n=Object(D["a"])(),c=n.isLoading,a=n.adornUrl,o=n.httpRequest,r=Object(u["ref"])(),l=function(){t.value&&o({url:a("/api/v1/messages"),method:"get",params:{accesstoken:t.value,mdrender:!0}}).then((function(e){var t=e.data;t.data.has_read_messages.forEach((function(e){e.reply.content=Object(T["a"])(e.reply.content)})),t.data.hasnot_read_messages.forEach((function(e){e.reply.content=Object(T["a"])(e.reply.content)})),r.value=t.data})).catch((function(e){S["a"].error("请求失败"),console.error(e)}))};l();var i=Object(D["a"])().httpRequest,s=function(){i({url:a("/api/v1/message/mark_all"),method:"post",params:{accesstoken:t.value}}).then((function(){P.emit("read-msg"),l()})).catch((function(e){S["a"].error("请求失败"),console.error(e)}))},d=function(e){i({url:a("/api/v1/message/mark_one/"+e),method:"post",params:{accesstoken:t.value}}).then((function(){P.emit("read-msg"),l()})).catch((function(e){S["a"].error("请求失败"),console.error(e)}))};return{message:r,isLoading:c,readAll:s,readOne:d,formatDate:T["b"]}}}),q=(n("408d"),n("6b0d")),I=n.n(q);const R=I()(U,[["render",x]]);t["default"]=R},"20b3":function(e,t,n){},"3c5a":function(e,t,n){},"408d":function(e,t,n){"use strict";n("a3cb")},"491b":function(e,t,n){"use strict";n("c463")},7780:function(e,t,n){"use strict";n("83b2"),n("26f5"),n("effa");var c=n("4c02"),a=n("def7"),o=n("03ae"),r=n("7a23"),l=Object(r["createElementVNode"])("span",{class:"card-title"},"客户端二维码",-1),i={class:"client-box"},u=Object(r["createTextVNode"])("客户端源码地址");function s(e,t,n,s,d,b){var m=o["a"],f=a["a"],p=c["a"];return Object(r["openBlock"])(),Object(r["createBlock"])(p,{class:"box-card"},{header:Object(r["withCtx"])((function(){return[l]})),default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(m,{class:"qr-image",src:"https://static.cnodejs.org/FtG0YVgQ6iginiLpf9W4_ShjiLfU",fit:"fill"}),Object(r["createElementVNode"])("div",i,[Object(r["createVNode"])(f,{underline:!1,href:"https://github.com/soliury/noder-react-native",target:"_blank"},{default:Object(r["withCtx"])((function(){return[u]})),_:1})])]})),_:1})}var d=Object(r["defineComponent"])({name:"ClientQrCodeComp",components:{ElCard:c["a"],ElImage:o["a"],ElLink:a["a"]}}),b=(n("fe05"),n("6b0d")),m=n.n(b);const f=m()(d,[["render",s]]);t["a"]=f},"7d2e":function(e,t,n){"use strict";n("d593")},"8c98":function(e,t,n){"use strict";var c=n("7a23"),a={class:"lift-content"},o={class:"right-content"};function r(e,t,n,r,l,i){return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createElementVNode"])("div",a,[Object(c["renderSlot"])(e.$slots,"default")]),Object(c["createElementVNode"])("div",o,[Object(c["renderSlot"])(e.$slots,"right")])],64)}var l=Object(c["defineComponent"])({name:"PageWrapper"}),i=(n("961b"),n("6b0d")),u=n.n(i);const s=u()(l,[["render",r]]);t["a"]=s},"8ead":function(e,t,n){"use strict";n("3c5a")},"93f3":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var c=[{key:"all",name:"全部"},{key:"good",name:"精华"},{key:"share",name:"分享"},{key:"ask",name:"问答"},{key:"job",name:"招聘"},{key:"dev",name:"客户端测试"}]},"961b":function(e,t,n){"use strict";n("0f6d")},a3cb:function(e,t,n){},afbc:function(e,t,n){"use strict";var c=n("0613"),a=n("6c02"),o=[{path:"/",name:"index",component:function(){return Promise.all([n.e("chunk-ec24e74c"),n.e("chunk-588ce536"),n.e("chunk-ea90bb18"),n.e("chunk-58cc6a38")]).then(n.bind(null,"37f9"))}},{path:"/login",name:"login",component:function(){return Promise.all([n.e("chunk-c28b52e8"),n.e("chunk-588ce536"),n.e("chunk-a7e61c38")]).then(n.bind(null,"9ed6"))}},{path:"/detail",name:"detail",component:function(){return Promise.all([n.e("chunk-c28b52e8"),n.e("chunk-c655ceae"),n.e("chunk-c30bdc32")]).then(n.bind(null,"8248"))}},{path:"/add-topic",name:"addTopic",meta:{requiredLogin:!0},component:function(){return Promise.all([n.e("chunk-c28b52e8"),n.e("chunk-588ce536"),n.e("chunk-ea90bb18"),n.e("chunk-c655ceae"),n.e("chunk-17c529b8")]).then(n.bind(null,"b55f"))}},{path:"/edit-topic/:id",name:"editTopic",meta:{requiredLogin:!0},component:function(){return Promise.all([n.e("chunk-c28b52e8"),n.e("chunk-588ce536"),n.e("chunk-ea90bb18"),n.e("chunk-c655ceae"),n.e("chunk-17c529b8")]).then(n.bind(null,"b55f"))}},{path:"/message",name:"message",meta:{requiredLogin:!0},component:function(){return Promise.resolve().then(n.bind(null,"1d11"))}},{path:"/collect",name:"collect",meta:{requiredLogin:!0},component:function(){return Promise.all([n.e("chunk-ec24e74c"),n.e("chunk-1c9a8564")]).then(n.bind(null,"3ae0"))}},{path:"/user/:userName",name:"userDetail",meta:{requiredLogin:!0},component:function(){return Promise.all([n.e("chunk-ec24e74c"),n.e("chunk-5a768342")]).then(n.bind(null,"dc30"))}}],r=Object(a["a"])({history:Object(a["b"])("/vue3-cnode"),routes:o});r.beforeEach((function(e,t,n){"login"===e.name&&c["a"].state.user.token?n("/"):e.meta.requiredLogin&&!c["a"].state.user.token?n({name:"login"}):n()})),t["a"]=r},b32d:function(e,t,n){"use strict";var c=n("bc3a"),a=n.n(c),o=n("7a23"),r=function(){var e=Object(o["ref"])(!1),t=function(e){return"https://cnodejs.org"+e},n=a.a.create({timeout:6e4,withCredentials:!1,headers:{"Content-Type":"application/json; charset=utf-8"}});return n.interceptors.request.use((function(t){return e.value=!0,t})),n.interceptors.response.use((function(t){return t&&403===t.status?console.error("登录失败"):t&&200!==t.status&&console.error("请求失败"),e.value=!1,t}),(function(t){return e.value=!1,Promise.reject(t)})),{isLoading:e,adornUrl:t,httpRequest:n}};t["a"]=r},b54e:function(e,t,n){"use strict";n("20b3")},c463:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);var c=n("7a23"),a=(n("5e0e"),n("d47a"),n("330d"),n("9d28"),n("797a"),n("b6c4")),o=n("c5ff"),r=n("cf2e");function l(e,t,n,l,i,u){var s=Object(c["resolveComponent"])("header-comp"),d=Object(c["resolveComponent"])("router-view"),b=Object(c["resolveComponent"])("footer-comp"),m=r["a"],f=o["a"],p=a["a"];return Object(c["openBlock"])(),Object(c["createBlock"])(p,{locale:e.locale},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(f,{ref:"scrollbarRef",height:"100vh",onScroll:e.scroll},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(s),Object(c["createVNode"])(d),Object(c["createVNode"])(b),e.top>200?(Object(c["openBlock"])(),Object(c["createBlock"])(m,{key:0,class:"back-top",size:"large",icon:e.CaretTop,circle:"",onClick:e.backTop},null,8,["icon","onClick"])):Object(c["createCommentVNode"])("",!0)]})),_:1},8,["onScroll"])]})),_:1},8,["locale"])}var i=n("3ef4"),u=n("bf4f"),s=n("3ef0"),d=n.n(s),b=(n("2c92"),n("26f5"),n("0388")),m=n("def7"),f={class:"navbar"},p={class:"navbar-content"},j=["src"],O={class:"navbar-link navbar-noright-link"},h=Object(c["createTextVNode"])("首页"),k={key:0},g=Object(c["createTextVNode"])("消息"),v=Object(c["createTextVNode"])("消息"),C={key:1},N=Object(c["createTextVNode"])("收藏"),y=Object(c["createTextVNode"])("GitHub仓库"),E={key:2},V=Object(c["createTextVNode"])("登录"),_={key:3},x=Object(c["createTextVNode"])("退出");function B(e,t,n,a,o,r){var l=m["a"],i=b["a"];return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",f,[Object(c["createElementVNode"])("div",p,[Object(c["createElementVNode"])("span",{class:"navbar-logo",onClick:t[0]||(t[0]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.gotoIndex&&e.gotoIndex.apply(e,t)})},[Object(c["createElementVNode"])("img",{src:e.logoImage},null,8,j)]),Object(c["createElementVNode"])("span",O,[Object(c["createElementVNode"])("span",null,[Object(c["createVNode"])(l,{underline:!1,onClick:e.gotoIndex},{default:Object(c["withCtx"])((function(){return[h]})),_:1},8,["onClick"])]),""!==e.token?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",k,[e.count>0?(Object(c["openBlock"])(),Object(c["createBlock"])(i,{key:0,value:e.count,class:"badge-item"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(l,{underline:!1,onClick:e.gotoMessage},{default:Object(c["withCtx"])((function(){return[g]})),_:1},8,["onClick"])]})),_:1},8,["value"])):(Object(c["openBlock"])(),Object(c["createBlock"])(l,{key:1,underline:!1,onClick:e.gotoMessage},{default:Object(c["withCtx"])((function(){return[v]})),_:1},8,["onClick"]))])):Object(c["createCommentVNode"])("",!0),""!==e.token?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",C,[Object(c["createVNode"])(l,{underline:!1,onClick:e.gotoCollect},{default:Object(c["withCtx"])((function(){return[N]})),_:1},8,["onClick"])])):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("span",null,[Object(c["createVNode"])(l,{underline:!1,href:"https://github.com/guoqirong/vue3-cnode",target:"_blank"},{default:Object(c["withCtx"])((function(){return[y]})),_:1})]),""===e.token?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",E,[Object(c["createVNode"])(l,{underline:!1,onClick:e.gotoLogin},{default:Object(c["withCtx"])((function(){return[V]})),_:1},8,["onClick"])])):Object(c["createCommentVNode"])("",!0),""!==e.token?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",_,[Object(c["createVNode"])(l,{underline:!1,onClick:e.logout},{default:Object(c["withCtx"])((function(){return[x]})),_:1},8,["onClick"])])):Object(c["createCommentVNode"])("",!0)])])])}var w=n("5502"),D=n("6c02"),L=n("b32d"),S=n("1d11"),T=Object(c["defineComponent"])({name:"HeaderComp",components:{ElLink:m["a"],ElBadge:b["a"]},setup:function(){var e=Object(w["b"])(),t=e.state,a=e.commit,o=Object(D["c"])(),r=Object(D["d"])(),l=Object(L["a"])(),i=l.adornUrl,u=l.httpRequest,s=Object(c["computed"])((function(){return n("e347")})),d=Object(c["computed"])((function(){return t.user.token})),b=function(){"/index"!==o.path&&r.push({path:"/"})};S["emitter"].on("read-msg",(function(){f()}));var m=Object(c["ref"])(0);Object(c["watch"])(d,(function(e){e?f():a("user/updateUserData",{})}));var f=function(){u({url:i("/api/v1/message/count"),method:"get",params:{accesstoken:d.value||""}}).then((function(e){var t=e.data;m.value=t.data})).catch((function(e){console.error(e)}))},p=function(){"/message"!==o.path&&r.push({path:"/message"})},j=function(){"/collect"!==o.path&&r.push({path:"/collect"})},O=function(){"/login"!==o.path&&r.push({path:"/login"})},h=function(){localStorage.removeItem("loginname"),localStorage.removeItem("token"),a("user/updateToken",""),a("user/updateSimpleUserData",{}),b()};return{logoImage:s,token:d,gotoIndex:b,count:m,gotoMessage:p,gotoCollect:j,gotoLogin:O,logout:h}}}),M=(n("491b"),n("6b0d")),P=n.n(M);const U=P()(T,[["render",B]]);var q=U,I={class:"body-footer"},R=Object(c["createElementVNode"])("div",{class:"footer-content"},[Object(c["createElementVNode"])("div",null,"CNode 社区为国内最专业的 Node.js 开源技术社区，致力于 Node.js 的技术研究。"),Object(c["createElementVNode"])("div",null,"CNode 社区版权归xxxxxx所有")],-1),F=[R];function A(e,t,n,a,o,r){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",I,F)}var H=Object(c["defineComponent"])({name:"FooterComp"});n("b54e");const $=P()(H,[["render",A]]);var z=$,Q=Object(c["defineComponent"])({components:{HeaderComp:q,FooterComp:z,ElConfigProvider:a["a"],ElScrollbar:o["a"],ElButton:r["a"]},setup:function(){var e=Object(L["a"])(),t=e.isLoading,n=e.adornUrl,a=e.httpRequest,o=Object(w["b"])(),r=o.state,l=o.commit,s=Object(c["computed"])((function(){return r.user.token}));Object(c["watch"])(s,(function(e){e?b(r.user.simpleUserData.loginname):l("user/updateUserData",{})})),Object(c["watch"])(t,(function(e){l("user/updateLoading",e)}));var b=function(e){a({url:n("/api/v1/user/"+e),method:"get"}).then((function(e){var t=e.data;l("user/updateUserData",t.data)})).catch((function(e){i["a"].error("请求失败"),console.error(e)}))};Object(c["onMounted"])((function(){l("user/updateSimpleUserData",{loginname:localStorage.getItem("loginname")||""}),l("user/updateToken",localStorage.getItem("token")||"")}));var m=Object(c["ref"])(0),f=Object(c["ref"])(),p=function(e){m.value=e.scrollTop},j=function(){var e;null===(e=f.value)||void 0===e||e.setScrollTop(0)};return{locale:d.a,top:m,scrollbarRef:f,scroll:p,CaretTop:u["a"],backTop:j}}});n("8ead");const Y=P()(Q,[["render",l]]);var G=Y,J=n("afbc"),W=n("0613");Object(c["createApp"])(G).use(W["a"]).use(J["a"]).mount("#app")},d257:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return i}));var c=n("93f3"),a=function(e,t){var n=new Date(e);if(""!==e&&!n.getFullYear())return console.error("时间格式错误！"),"";/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length)));var c={"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds()};for(var a in c)if(new RegExp("("+a+")").test(t)){var r=c[a]+"";t=t.replace(RegExp.$1,1===RegExp.$1.length?r:o(r))}return t},o=function(e){return("00"+e).substr(e.length)},r=function(e,t){var n,a;return e?"置顶":null!==(a=null===(n=c["a"].find((function(e){return e.key===t})))||void 0===n?void 0:n.name)&&void 0!==a?a:"未知"},l=function(e,t){return void 0!==e&&void 0!==t?parseInt(String(Math.random()*(t-e+1)+e),10):void 0!==e?parseInt(String(Math.random()*e+1),10):0},i=function(e){var t=e.replace(/“|”/g,'"');return t=t.replace(/href="+(\/.?user.?\/|user.?\/)/g,'href="./#/user/'),t=t.replace(/&lt;/g,"<"),t.replace(/&gt;/g,">")}},d593:function(e,t,n){},e347:function(e,t,n){e.exports=n.p+"img/logo.e2b40b75.svg"},e75a:function(e,t,n){},fe05:function(e,t,n){"use strict";n("e75a")}});
//# sourceMappingURL=app.1bc63b33.js.map