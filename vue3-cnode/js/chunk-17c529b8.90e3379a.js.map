{"version":3,"sources":["webpack:///./src/views/edit-topic/index.scss?fd37","webpack:///./src/views/edit-topic/index.vue?1730","webpack:///./src/views/edit-topic/index.vue","webpack:///./src/views/edit-topic/index.vue?52cf"],"names":["_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","render","_ctx","_cache","$props","$setup","$data","$options","_component_el_page_header","_component_el_option","_component_el_select","_component_el_form_item","_component_el_input","_component_editor","_component_el_button","_component_el_form","_component_el_skeleton","_component_el_card","_component_user_info_comp","_component_client_qr_code_comp","header","_a","onBack","goBack","content","route","name","default","loading","isLoading","animated","rows","ref","model","topicForm","rules","label","prop","modelValue","tab","$event","placeholder","topicTypeList","item","key","value","_","title","init","type","IsSubmitLoading","onClick","onSubmit","form","isTopicsRepliesList","components","ElCard","ElPageHeader","ElSkeleton","ElForm","ElFormItem","ElSelect","ElButton","Editor","UserInfoComp","ClientQrCodeComp","setup","_this","this","state","token","user","router","id","undefined","push","params","listParm","String","query","path","adornUrl","httpRequest","getData","url","method","mdrender","accesstoken","then","data","Object","assign","catch","e","error","console","required","message","trigger","height","width","language_url","language","browser_spellcheck","branding","elementpath","statusbar","paste_data_images","menubar","fontsize_formats","font_formats","file_picker_types","images_upload_credentials","plugins","toolbar","formEl","validate","valid","fields","setEditData","log","sent","_b","submitHttpRequest","topic_id","success","filter","includes","__exports__"],"mappings":"kHAAA,W,uOCCIA,EAAa,CAAEC,MAAO,mBACtBC,EAAa,CAAED,MAAO,gBACtBE,EAAa,CAAEF,MAAO,cACtBG,EAA2B,6BAAiB,MAC5CC,EAAa,CAAEJ,MAAO,iBACnB,SAASK,EAAOC,EAAMC,EAAQC,EAAQC,EAAQC,EAAOC,GACxD,IAAIC,EAA4B,OAC5BC,EAAuB,OACvBC,EAAuB,OACvBC,EAA0B,OAC1BC,EAAsB,OACtBC,EAAoB,8BAAkB,UACtCC,EAAuB,OACvBC,EAAqB,OACrBC,EAAyB,OACzBC,EAAqB,OACrBC,EAA4B,8BAAkB,kBAC9CC,EAAiC,8BAAkB,uBACvD,OAAQ,yBAAc,gCAAoB,MAAOxB,EAAY,CACzD,gCAAoB,MAAOE,EAAY,CACnC,yBAAaoB,EAAoB,CAAErB,MAAO,YAAc,CACpDwB,OAAQ,sBAAS,WACb,IAAIC,EACJ,MAAO,CACH,yBAAab,EAA2B,CACpCZ,MAAO,aACP0B,OAAQpB,EAAKqB,OACbC,QAA8E,cAA9C,QAArBH,EAAKnB,EAAKuB,aAA0B,IAAPJ,OAAgB,EAASA,EAAGK,MAAuB,OAAS,QACrG,KAAM,EAAG,CAAC,SAAU,gBAG/BC,QAAS,sBAAS,WAAc,MAAO,CACnC,gCAAoB,OAAQ7B,EAAY,CACpC,yBAAakB,EAAwB,CACjCpB,MAAO,gBACPgC,QAAS1B,EAAK2B,UACdC,SAAU,GACVC,KAAM,IACP,CACCJ,QAAS,sBAAS,WAAc,MAAO,CACnC,yBAAaZ,EAAoB,CAC7BiB,IAAK,OACLpC,MAAO,YACPqC,MAAO/B,EAAKgC,UACZC,MAAOjC,EAAKiC,MACZ,cAAe,OACf,iBAAkB,OACnB,CACCR,QAAS,sBAAS,WAAc,MAAO,CACnC,yBAAahB,EAAyB,CAClCyB,MAAO,KACPC,KAAM,OACP,CACCV,QAAS,sBAAS,WAAc,MAAO,CACnC,yBAAajB,EAAsB,CAC/B4B,WAAYpC,EAAKgC,UAAUK,IAC3B,sBAAuBpC,EAAO,KAAOA,EAAO,GAAK,SAAUqC,GAAU,OAAStC,EAAKgC,UAAa,IAAIM,IACpGC,YAAa,IACd,CACCd,QAAS,sBAAS,WAAc,MAAO,EAClC,wBAAW,GAAO,gCAAoB,cAAW,KAAM,wBAAYzB,EAAKwC,eAAe,SAAUC,GAC9F,OAAQ,yBAAc,yBAAalC,EAAsB,CACrDmC,IAAKD,EAAKC,IACVR,MAAOO,EAAKjB,KACZmB,MAAOF,EAAKC,KACb,KAAM,EAAG,CAAC,QAAS,aACtB,UAERE,EAAG,GACJ,EAAG,CAAC,mBAEXA,EAAG,IAEP,yBAAanC,EAAyB,CAClCyB,MAAO,KACPC,KAAM,SACP,CACCV,QAAS,sBAAS,WAAc,MAAO,CACnC,yBAAaf,EAAqB,CAC9B0B,WAAYpC,EAAKgC,UAAUa,MAC3B,sBAAuB5C,EAAO,KAAOA,EAAO,GAAK,SAAUqC,GAAU,OAAStC,EAAKgC,UAAe,MAAIM,KACvG,KAAM,EAAG,CAAC,mBAEjBM,EAAG,IAEP,yBAAanC,EAAyB,CAClCyB,MAAO,KACPC,KAAM,WACP,CACCV,QAAS,sBAAS,WAAc,MAAO,CACnC,yBAAad,EAAmB,CAC5B,UAAW,mDACXmC,KAAM9C,EAAK8C,KACXV,WAAYpC,EAAKgC,UAAUV,QAC3B,sBAAuBrB,EAAO,KAAOA,EAAO,GAAK,SAAUqC,GAAU,OAAStC,EAAKgC,UAAiB,QAAIM,KACzG,KAAM,EAAG,CAAC,OAAQ,mBAEzBM,EAAG,IAEP,yBAAanC,EAAyB,CAAEf,MAAO,WAAa,CACxD+B,QAAS,sBAAS,WAAc,MAAO,CACnC,yBAAab,EAAsB,CAC/BmC,KAAM,UACNrB,QAAS1B,EAAKgD,gBACdC,QAAShD,EAAO,KAAOA,EAAO,GAAK,SAAUqC,GAAU,OAAQtC,EAAKkD,SAASlD,EAAKmD,SACnF,CACC1B,QAAS,sBAAS,WAAc,MAAO,CACnC5B,MAEJ+C,EAAG,GACJ,EAAG,CAAC,gBAEXA,EAAG,QAGXA,EAAG,GACJ,EAAG,CAAC,QAAS,cAEpBA,EAAG,GACJ,EAAG,CAAC,kBAGfA,EAAG,MAGX,gCAAoB,MAAO9C,EAAY,CACnC,yBAAakB,EAA2B,CAAEoC,qBAAqB,IAC/D,yBAAanC,O,4HCrHV,+BAAgB,CAC3BoC,WAAY,CACRC,OAAQ,OACRC,aAAc,OACdC,WAAY,OACZC,OAAQ,OACRC,WAAY,OACZC,SAAU,OACVC,SAAU,OACVC,OAAQ,OACRC,aAAc,OACdC,iBAAkB,QAEtBC,MAAO,WACH,IAAIC,EAAQC,KACRC,EAAQ,iBAAWA,MAEnBC,EAAQ,uBAAS,WACjB,OAAOD,EAAME,KAAKD,SAElB7C,EAAQ,iBACR+C,EAAS,iBAETtC,EAAY,sBAAS,CACrBuC,QAAIC,EACJ3B,MAAO,GACPR,IAAK,GACLf,QAAS,KAGTD,EAAS,WACU,aAAfE,EAAMC,KACN8C,EAAOG,KAAK,CACRjD,KAAM,QACNkD,OAAQ,CACJC,SAAUC,OAAOrD,EAAMsD,MAAMF,aAKrCL,EAAOG,KAAK,CACRK,KAAM,UACND,MAAO,CACHN,GAAIhD,EAAMmD,OAAOH,GACjBI,SAAUpD,EAAMsD,MAAMF,aAKlCxD,EAAK,iBAAkBQ,EAAYR,EAAGQ,UAAWoD,EAAW5D,EAAG4D,SAAUC,EAAc7D,EAAG6D,YAC1FC,EAAU,WACVD,EAAY,CACRE,IAAKH,EAAS,iBAAmBxD,EAAMmD,OAAOH,IAC9CY,OAAQ,MACRT,OAAQ,CACJU,UAAU,EACVC,YAAalB,EAAME,KAAKD,OAAS,MAEtCkB,MAAK,SAAUnE,GACd,IAAIoE,EAAOpE,EAAGoE,KACdA,EAAKA,KAAKjE,QAAU,eAAWiE,EAAKA,KAAKjE,SACzCkE,OAAOC,OAAOzD,EAAWuD,EAAKA,SAC/BG,OAAM,SAAUC,GACf,OAAUC,MAAM,QAChBC,QAAQD,MAAMD,OAGlBpE,EAAMmD,OAAOH,IACbU,IAEJ,IAAI9B,EAAO,mBAEPlB,EAAQ,sBAAS,CACjBY,MAAO,CACH,CAAEiD,UAAU,EAAMC,QAAS,QAASC,QAAS,SAEjD3D,IAAK,CACD,CAAEyD,UAAU,EAAMC,QAAS,QAASC,QAAS,WAEjD1E,QAAS,CACL,CAAEwE,UAAU,EAAMC,QAAS,QAASC,QAAS,WAIjDlD,EAAO,CACPmD,OAAQ,IACRC,MAAO,OACPC,aAAc,0BACdC,SAAU,QACVC,oBAAoB,EACpBC,UAAU,EACVC,aAAa,EACbC,WAAW,EACXC,mBAAmB,EACnBC,SAAS,EACTC,iBAAkB,oDAClBC,aAAc,kMACdC,kBAAmB,QACnBC,2BAA2B,EAC3BC,QAAS,CACL,iEACA,6CACA,wDAEJC,QAAS,iOAGT9D,EAAW,SAAU+D,GAAU,OAAO,eAAUhD,OAAO,OAAQ,GAAQ,WACvE,OAAO,eAAYC,MAAM,SAAU/C,GAC/B,OAAQA,EAAGe,OACP,KAAK,EACD,OAAK+E,EAEE,CAAC,EAAaA,EAAOC,UAAS,SAAUC,EAAOC,GAC1CD,EACAE,IAGAxB,QAAQyB,IAAI,gBAAiBF,OAN9B,CAAC,GAShB,KAAK,EAED,OADAjG,EAAGoG,OACI,CAAC,WAKpBC,EAAK,iBAAkBxE,EAAkBwE,EAAG7F,UAAW8F,EAAoBD,EAAGxC,YAC9EqC,EAAc,WACdI,EAAkB,CACdvC,IAAKH,EAAS,kBAAmC,aAAfxD,EAAMC,KAAsB,GAAK,YACnE2D,OAAQ,OACRI,KAAM,CACFmC,SAAU1F,EAAUuC,GACpB1B,MAAOb,EAAUa,MACjBvB,QAASU,EAAUV,QACnBe,IAAK,MACLgD,YAAajB,EAAMzB,SAExB2C,MAAK,SAAUnE,GACd,IAAIoE,EAAOpE,EAAGoE,MACD,OAATA,QAA0B,IAATA,OAAkB,EAASA,EAAKoC,WACjD,OAAUA,QAAuB,aAAfpG,EAAMC,KAAsB,OAAS,QACvDH,QAELqE,OAAM,SAAUC,GACf,OAAUC,MAAqB,aAAfrE,EAAMC,KAAsB,OAAS,QACrDqE,QAAQD,MAAMD,OAGtB,MAAO,CACHtE,OAAQA,EACRE,MAAOA,EACPI,UAAWA,EACXwB,KAAMA,EACNnB,UAAWA,EACXC,MAAOA,EACPa,KAAMA,EACNN,cAAe,OAAcoF,QAAO,SAAUnF,GAAQ,OAAQ,CAAC,MAAO,QAAQoF,SAASpF,EAAKC,QAC5FQ,SAAUA,EACVF,gBAAiBA,M,iCCrK7B,MAAM8E,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAAS/H,KAErD,gB","file":"js/chunk-17c529b8.90e3379a.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!./index.scss?vue&type=style&index=0&lang=scss\"","import { resolveComponent as _resolveComponent, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, withCtx as _withCtx, createTextVNode as _createTextVNode, createElementVNode as _createElementVNode } from \"vue\";\r\nvar _hoisted_1 = { class: \"edit-topic-body\" };\r\nvar _hoisted_2 = { class: \"lift-content\" };\r\nvar _hoisted_3 = { class: \"edit-topic\" };\r\nvar _hoisted_4 = /*#__PURE__*/ _createTextVNode(\"提交\");\r\nvar _hoisted_5 = { class: \"right-content\" };\r\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\r\n    var _component_el_page_header = _resolveComponent(\"el-page-header\");\r\n    var _component_el_option = _resolveComponent(\"el-option\");\r\n    var _component_el_select = _resolveComponent(\"el-select\");\r\n    var _component_el_form_item = _resolveComponent(\"el-form-item\");\r\n    var _component_el_input = _resolveComponent(\"el-input\");\r\n    var _component_editor = _resolveComponent(\"editor\");\r\n    var _component_el_button = _resolveComponent(\"el-button\");\r\n    var _component_el_form = _resolveComponent(\"el-form\");\r\n    var _component_el_skeleton = _resolveComponent(\"el-skeleton\");\r\n    var _component_el_card = _resolveComponent(\"el-card\");\r\n    var _component_user_info_comp = _resolveComponent(\"user-info-comp\");\r\n    var _component_client_qr_code_comp = _resolveComponent(\"client-qr-code-comp\");\r\n    return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\r\n        _createElementVNode(\"div\", _hoisted_2, [\r\n            _createVNode(_component_el_card, { class: \"box-card\" }, {\r\n                header: _withCtx(function () {\r\n                    var _a;\r\n                    return [\r\n                        _createVNode(_component_el_page_header, {\r\n                            class: \"card-title\",\r\n                            onBack: _ctx.goBack,\r\n                            content: ((_a = _ctx.route) === null || _a === void 0 ? void 0 : _a.name) === 'addTopic' ? '发布话题' : '编辑话题'\r\n                        }, null, 8, [\"onBack\", \"content\"])\r\n                    ];\r\n                }),\r\n                default: _withCtx(function () { return [\r\n                    _createElementVNode(\"span\", _hoisted_3, [\r\n                        _createVNode(_component_el_skeleton, {\r\n                            class: \"edit-skeleton\",\r\n                            loading: _ctx.isLoading,\r\n                            animated: \"\",\r\n                            rows: 20\r\n                        }, {\r\n                            default: _withCtx(function () { return [\r\n                                _createVNode(_component_el_form, {\r\n                                    ref: \"form\",\r\n                                    class: \"edit-form\",\r\n                                    model: _ctx.topicForm,\r\n                                    rules: _ctx.rules,\r\n                                    \"label-width\": \"auto\",\r\n                                    \"label-position\": \"top\"\r\n                                }, {\r\n                                    default: _withCtx(function () { return [\r\n                                        _createVNode(_component_el_form_item, {\r\n                                            label: \"版块\",\r\n                                            prop: \"tab\"\r\n                                        }, {\r\n                                            default: _withCtx(function () { return [\r\n                                                _createVNode(_component_el_select, {\r\n                                                    modelValue: _ctx.topicForm.tab,\r\n                                                    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = function ($event) { return ((_ctx.topicForm.tab) = $event); }),\r\n                                                    placeholder: \"\"\r\n                                                }, {\r\n                                                    default: _withCtx(function () { return [\r\n                                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.topicTypeList, function (item) {\r\n                                                            return (_openBlock(), _createBlock(_component_el_option, {\r\n                                                                key: item.key,\r\n                                                                label: item.name,\r\n                                                                value: item.key\r\n                                                            }, null, 8, [\"label\", \"value\"]));\r\n                                                        }), 128))\r\n                                                    ]; }),\r\n                                                    _: 1\r\n                                                }, 8, [\"modelValue\"])\r\n                                            ]; }),\r\n                                            _: 1\r\n                                        }),\r\n                                        _createVNode(_component_el_form_item, {\r\n                                            label: \"标题\",\r\n                                            prop: \"title\"\r\n                                        }, {\r\n                                            default: _withCtx(function () { return [\r\n                                                _createVNode(_component_el_input, {\r\n                                                    modelValue: _ctx.topicForm.title,\r\n                                                    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = function ($event) { return ((_ctx.topicForm.title) = $event); })\r\n                                                }, null, 8, [\"modelValue\"])\r\n                                            ]; }),\r\n                                            _: 1\r\n                                        }),\r\n                                        _createVNode(_component_el_form_item, {\r\n                                            label: \"内容\",\r\n                                            prop: \"content\"\r\n                                        }, {\r\n                                            default: _withCtx(function () { return [\r\n                                                _createVNode(_component_editor, {\r\n                                                    \"api-key\": \"mh2f2ffdlr2zzaky3yk52tx8rtxrxnbt1a6p7p7jx96hy70r\",\r\n                                                    init: _ctx.init,\r\n                                                    modelValue: _ctx.topicForm.content,\r\n                                                    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = function ($event) { return ((_ctx.topicForm.content) = $event); })\r\n                                                }, null, 8, [\"init\", \"modelValue\"])\r\n                                            ]; }),\r\n                                            _: 1\r\n                                        }),\r\n                                        _createVNode(_component_el_form_item, { class: \"is-last\" }, {\r\n                                            default: _withCtx(function () { return [\r\n                                                _createVNode(_component_el_button, {\r\n                                                    type: \"primary\",\r\n                                                    loading: _ctx.IsSubmitLoading,\r\n                                                    onClick: _cache[3] || (_cache[3] = function ($event) { return (_ctx.onSubmit(_ctx.form)); })\r\n                                                }, {\r\n                                                    default: _withCtx(function () { return [\r\n                                                        _hoisted_4\r\n                                                    ]; }),\r\n                                                    _: 1\r\n                                                }, 8, [\"loading\"])\r\n                                            ]; }),\r\n                                            _: 1\r\n                                        })\r\n                                    ]; }),\r\n                                    _: 1\r\n                                }, 8, [\"model\", \"rules\"])\r\n                            ]; }),\r\n                            _: 1\r\n                        }, 8, [\"loading\"])\r\n                    ])\r\n                ]; }),\r\n                _: 1\r\n            })\r\n        ]),\r\n        _createElementVNode(\"div\", _hoisted_5, [\r\n            _createVNode(_component_user_info_comp, { isTopicsRepliesList: false }),\r\n            _createVNode(_component_client_qr_code_comp)\r\n        ])\r\n    ]));\r\n}\r\n","import { __awaiter, __generator } from \"tslib\";\r\nimport { computed, defineComponent, reactive, ref } from 'vue';\r\nimport { ElButton, ElCard, ElForm, ElFormItem, ElMessage, ElPageHeader, ElSelect, ElSkeleton } from 'element-plus';\r\nimport UserInfoComp from '@/components/user-info/index.vue';\r\nimport ClientQrCodeComp from '@/components/client-qr-code/index.vue';\r\nimport Editor from '@tinymce/tinymce-vue';\r\nimport { topicTypeList } from '@/constant';\r\nimport { useRoute, useRouter } from 'vue-router';\r\nimport useHttpRequest from '@/utils/request';\r\nimport { useStore } from 'vuex';\r\nimport { changeLtGt } from '@/utils';\r\nexport default defineComponent({\r\n    components: {\r\n        ElCard: ElCard,\r\n        ElPageHeader: ElPageHeader,\r\n        ElSkeleton: ElSkeleton,\r\n        ElForm: ElForm,\r\n        ElFormItem: ElFormItem,\r\n        ElSelect: ElSelect,\r\n        ElButton: ElButton,\r\n        Editor: Editor,\r\n        UserInfoComp: UserInfoComp,\r\n        ClientQrCodeComp: ClientQrCodeComp\r\n    },\r\n    setup: function () {\r\n        var _this = this;\r\n        var state = useStore().state;\r\n        // 用户登录态\r\n        var token = computed(function () {\r\n            return state.user.token;\r\n        });\r\n        var route = useRoute();\r\n        var router = useRouter();\r\n        // 表单值对象\r\n        var topicForm = reactive({\r\n            id: undefined,\r\n            title: '',\r\n            tab: '',\r\n            content: '',\r\n        });\r\n        // 返回\r\n        var goBack = function () {\r\n            if (route.name === 'addTopic') {\r\n                router.push({\r\n                    name: 'index',\r\n                    params: {\r\n                        listParm: String(route.query.listParm),\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                router.push({\r\n                    path: \"/detail\",\r\n                    query: {\r\n                        id: route.params.id,\r\n                        listParm: route.query.listParm,\r\n                    }\r\n                });\r\n            }\r\n        };\r\n        var _a = useHttpRequest(), isLoading = _a.isLoading, adornUrl = _a.adornUrl, httpRequest = _a.httpRequest;\r\n        var getData = function () {\r\n            httpRequest({\r\n                url: adornUrl(\"/api/v1/topic/\" + route.params.id),\r\n                method: 'get',\r\n                params: {\r\n                    mdrender: true,\r\n                    accesstoken: state.user.token || ''\r\n                }\r\n            }).then(function (_a) {\r\n                var data = _a.data;\r\n                data.data.content = changeLtGt(data.data.content);\r\n                Object.assign(topicForm, data.data);\r\n            }).catch(function (e) {\r\n                ElMessage.error('请求失败');\r\n                console.error(e);\r\n            });\r\n        };\r\n        if (route.params.id)\r\n            getData();\r\n        // 表单ref\r\n        var form = ref();\r\n        // 表单校验规则\r\n        var rules = reactive({\r\n            title: [\r\n                { required: true, message: '请输入标题', trigger: 'blur' },\r\n            ],\r\n            tab: [\r\n                { required: true, message: '请选择版块', trigger: 'change' },\r\n            ],\r\n            content: [\r\n                { required: true, message: '请输入内容', trigger: 'blur' },\r\n            ],\r\n        });\r\n        // 富文本初始配置项\r\n        var init = {\r\n            height: 500,\r\n            width: '100%',\r\n            language_url: '/tinymce-langs/zh_CN.js',\r\n            language: 'zh_CN',\r\n            browser_spellcheck: true,\r\n            branding: false,\r\n            elementpath: true,\r\n            statusbar: true,\r\n            paste_data_images: true,\r\n            menubar: false,\r\n            fontsize_formats: '14px 16px 18px 20px 24px 26px 28px 30px 32px 36px',\r\n            font_formats: '微软雅黑=Microsoft YaHei,Helvetica Neue;PingFang SC;sans-serif;苹果苹方=PingFang SC,Microsoft YaHei,sans-serif;宋体=simsun;serifsans-serif;Terminal=terminal;monaco;Times New Roman=times new roman;times',\r\n            file_picker_types: 'image',\r\n            images_upload_credentials: false,\r\n            plugins: [\r\n                'advlist autolink lists link image charmap print preview anchor',\r\n                'searchreplace visualblocks code fullscreen',\r\n                'insertdatetime media table paste code help wordcount',\r\n            ],\r\n            toolbar: 'fontselect fontsizeselect link lineheight forecolor backcolor bold italic underline strikethrough | alignleft aligncenter alignright alignjustify | image quicklink h2 h3 blockquote table numlist bullist preview fullscreen',\r\n        };\r\n        // 表单提交事件\r\n        var onSubmit = function (formEl) { return __awaiter(_this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!formEl)\r\n                            return [2 /*return*/];\r\n                        return [4 /*yield*/, formEl.validate(function (valid, fields) {\r\n                                if (valid) {\r\n                                    setEditData();\r\n                                }\r\n                                else {\r\n                                    console.log('error submit!', fields);\r\n                                }\r\n                            })];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        }); };\r\n        // 添加或修改请求\r\n        var _b = useHttpRequest(), IsSubmitLoading = _b.isLoading, submitHttpRequest = _b.httpRequest;\r\n        var setEditData = function () {\r\n            submitHttpRequest({\r\n                url: adornUrl(\"/api/v1/topics\" + (route.name === 'addTopic' ? '' : '/update')),\r\n                method: 'post',\r\n                data: {\r\n                    topic_id: topicForm.id,\r\n                    title: topicForm.title,\r\n                    content: topicForm.content,\r\n                    tab: 'dev',\r\n                    accesstoken: token.value,\r\n                }\r\n            }).then(function (_a) {\r\n                var data = _a.data;\r\n                if (data === null || data === void 0 ? void 0 : data.success) {\r\n                    ElMessage.success(route.name === 'addTopic' ? '发布成功' : '修改成功');\r\n                    goBack();\r\n                }\r\n            }).catch(function (e) {\r\n                ElMessage.error(route.name === 'addTopic' ? '发布失败' : '修改失败');\r\n                console.error(e);\r\n            });\r\n        };\r\n        return {\r\n            goBack: goBack,\r\n            route: route,\r\n            isLoading: isLoading,\r\n            form: form,\r\n            topicForm: topicForm,\r\n            rules: rules,\r\n            init: init,\r\n            topicTypeList: topicTypeList.filter(function (item) { return !['all', 'good'].includes(item.key); }),\r\n            onSubmit: onSubmit,\r\n            IsSubmitLoading: IsSubmitLoading,\r\n        };\r\n    },\r\n});\r\n","/* unplugin-vue-components disabled */import { render } from \"./index.vue?vue&type=template&id=d711d154&ts=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.scss?vue&type=style&index=0&lang=scss\"\n\nimport exportComponent from \"D:\\\\project\\\\vue\\\\vue3-cnode\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}