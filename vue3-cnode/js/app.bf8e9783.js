(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["vue3-cnode-app"]=t():e["vue3-cnode-app"]=t()})(window,(function(){return function(e){function t(t){for(var c,o,u=t[0],i=t[1],l=t[2],d=0,s=[];d<u.length;d++)o=u[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&s.push(r[o][0]),r[o]=0;for(c in i)Object.prototype.hasOwnProperty.call(i,c)&&(e[c]=i[c]);f&&f(t);while(s.length)s.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],c=!0,o=1;o<n.length;o++){var u=n[o];0!==r[u]&&(c=!1)}c&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var c={},o={app:0},r={app:0},a=[];function u(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-25db5ae2":"3571865d","chunk-09912cf4":"f058d858","chunk-4f1d36c4":"ad173389","chunk-588ce536":"53841d9b","chunk-c77f8bb8":"b1f77fb8","chunk-288249eb":"77bd7325","chunk-a35f6824":"a7055d10","chunk-fbefc694":"a9c81631","chunk-1c9a8564":"fb3d7bd2","chunk-265dfc74":"0c0b13b3","chunk-5a768342":"1be9d3d5","chunk-bd011d9e":"888ccb85"}[e]+".js"}function i(t){if(c[t])return c[t].exports;var n=c[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n={"chunk-25db5ae2":1,"chunk-09912cf4":1,"chunk-4f1d36c4":1,"chunk-588ce536":1,"chunk-c77f8bb8":1,"chunk-288249eb":1,"chunk-a35f6824":1,"chunk-fbefc694":1,"chunk-1c9a8564":1,"chunk-265dfc74":1,"chunk-5a768342":1,"chunk-bd011d9e":1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=new Promise((function(t,n){for(var c="css/"+({}[e]||e)+"."+{"chunk-25db5ae2":"9f0adbda","chunk-09912cf4":"c7581607","chunk-4f1d36c4":"4581cc28","chunk-588ce536":"aabf391c","chunk-c77f8bb8":"616e5c51","chunk-288249eb":"d7db344c","chunk-a35f6824":"2b0bdc1c","chunk-fbefc694":"98c5473c","chunk-1c9a8564":"5418439f","chunk-265dfc74":"1bab269b","chunk-5a768342":"a0a0d70d","chunk-bd011d9e":"c8578b7b"}[e]+".css",r=i.p+c,a=document.getElementsByTagName("link"),u=0;u<a.length;u++){var l=a[u],d=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(d===c||d===r))return t()}var s=document.getElementsByTagName("style");for(u=0;u<s.length;u++){l=s[u],d=l.getAttribute("data-href");if(d===c||d===r)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var c=t&&t.target&&t.target.src||r,a=new Error("Loading CSS chunk "+e+" failed.\n("+c+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=c,delete o[e],f.parentNode.removeChild(f),n(a)},f.href=r;var b=document.getElementsByTagName("head")[0];b.appendChild(f)})).then((function(){o[e]=0})));var c=r[e];if(0!==c)if(c)t.push(c[2]);else{var a=new Promise((function(t,n){c=r[e]=[t,n]}));t.push(c[2]=a);var l,d=document.createElement("script");d.charset="utf-8",d.timeout=120,i.nc&&d.setAttribute("nonce",i.nc),d.src=u(e);var s=new Error;l=function(t){d.onerror=d.onload=null,clearTimeout(f);var n=r[e];if(0!==n){if(n){var c=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;s.message="Loading chunk "+e+" failed.\n("+c+": "+o+")",s.name="ChunkLoadError",s.type=c,s.request=o,n[1](s)}r[e]=void 0}};var f=setTimeout((function(){l({type:"timeout",target:d})}),12e4);d.onerror=d.onload=l,document.head.appendChild(d)}return Promise.all(t)},i.m=e,i.c=c,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)i.d(n,c,function(t){return e[t]}.bind(null,c));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/vue3-cnode/",i.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp_vue3-cnode"]=window["webpackJsonp_vue3-cnode"]||[],d=l.push.bind(l);l.push=t,l=l.slice();for(var s=0;s<l.length;s++)t(l[s]);var f=d;return a.push([0,"chunk-vendors"]),n()}({0:function(e,t,n){e.exports=n("cd49")},"0613":function(e,t,n){"use strict";var c=n("5502"),o={namespaced:!0,state:{entryUrl:""},mutations:{updateEntryUrl:function(e,t){e.entryUrl=t}}},r={namespaced:!0,state:{token:"",simpleUserData:{},userData:{},isLoading:!1},mutations:{updateToken:function(e,t){e.token=t},updateSimpleUserData:function(e,t){e.simpleUserData=t},updateUserData:function(e,t){e.userData=t},updateLoading:function(e,t){e.isLoading=t}}};t["a"]=Object(c["a"])({modules:{grobal:o,user:r}})},"1d78":function(e,t,n){},"1f2a":function(e,t,n){"use strict";var c=n("1344"),o=Object(c["a"])(),r=function(){return[o]};t["a"]=r},"20b3":function(e,t,n){},"491b":function(e,t,n){"use strict";n("c463")},"93f3":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var c=[{key:"all",name:"全部"},{key:"good",name:"精华"},{key:"share",name:"分享"},{key:"ask",name:"问答"},{key:"job",name:"招聘"},{key:"dev",name:"客户端测试"}]},afbc:function(e,t,n){"use strict";n.d(t,"b",(function(){return r}));var c=n("0613"),o=n("6c02"),r="";window.__POWERED_BY_QIANKUN__&&(r="/vue3-cnode");var a=[{path:r+"/",name:"index",component:function(){return Promise.all([n.e("chunk-25db5ae2"),n.e("chunk-fbefc694"),n.e("chunk-588ce536"),n.e("chunk-c77f8bb8"),n.e("chunk-265dfc74")]).then(n.bind(null,"37f9"))}},{path:r+"/login",name:"login",component:function(){return Promise.all([n.e("chunk-4f1d36c4"),n.e("chunk-588ce536"),n.e("chunk-bd011d9e")]).then(n.bind(null,"9ed6"))}},{path:r+"/detail",name:"detail",component:function(){return Promise.all([n.e("chunk-25db5ae2"),n.e("chunk-4f1d36c4"),n.e("chunk-a35f6824")]).then(n.bind(null,"8248"))}},{path:r+"/add-topic",name:"addTopic",meta:{requiredLogin:!0},component:function(){return Promise.all([n.e("chunk-25db5ae2"),n.e("chunk-4f1d36c4"),n.e("chunk-588ce536"),n.e("chunk-c77f8bb8"),n.e("chunk-288249eb")]).then(n.bind(null,"b55f"))}},{path:r+"/edit-topic/:id",name:"editTopic",meta:{requiredLogin:!0},component:function(){return Promise.all([n.e("chunk-25db5ae2"),n.e("chunk-4f1d36c4"),n.e("chunk-588ce536"),n.e("chunk-c77f8bb8"),n.e("chunk-288249eb")]).then(n.bind(null,"b55f"))}},{path:r+"/message",name:"message",meta:{requiredLogin:!0},component:function(){return Promise.all([n.e("chunk-25db5ae2"),n.e("chunk-09912cf4")]).then(n.bind(null,"1d11"))}},{path:r+"/collect",name:"collect",meta:{requiredLogin:!0},component:function(){return Promise.all([n.e("chunk-25db5ae2"),n.e("chunk-fbefc694"),n.e("chunk-1c9a8564")]).then(n.bind(null,"3ae0"))}},{path:r+"/user/:userName",name:"userDetail",meta:{requiredLogin:!0},component:function(){return Promise.all([n.e("chunk-25db5ae2"),n.e("chunk-fbefc694"),n.e("chunk-5a768342")]).then(n.bind(null,"dc30"))}}],u=Object(o["a"])({history:Object(o["b"])("/vue3-cnode"),routes:a});u.beforeEach((function(e,t,n){"login"===e.name&&c["a"].state.user.token?n("/"):e.meta.requiredLogin&&!c["a"].state.user.token?n({name:"login"}):n()})),t["a"]=u},b32d:function(e,t,n){"use strict";var c=n("bc3a"),o=n.n(c),r=n("7a23"),a=function(){var e=Object(r["ref"])(!1),t=function(e){return"https://cnodejs.org"+e},n=o.a.create({timeout:6e4,withCredentials:!1,headers:{"Content-Type":"application/json; charset=utf-8"}});return n.interceptors.request.use((function(t){return e.value=!0,t})),n.interceptors.response.use((function(t){return t&&403===t.status?console.error("登录失败"):t&&200!==t.status&&console.error("请求失败"),e.value=!1,t}),(function(t){return e.value=!1,Promise.reject(t)})),{isLoading:e,adornUrl:t,httpRequest:n}};t["a"]=a},b54e:function(e,t,n){"use strict";n("20b3")},bd99:function(e,t,n){"use strict";window.__POWERED_BY_QIANKUN__&&(n.p=window.__INJECTED_PUBLIC_PATH_BY_QIANKUN__)},c463:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t),n.d(t,"bootstrap",(function(){return te})),n.d(t,"mount",(function(){return ne})),n.d(t,"unmount",(function(){return ce}));var c=n("9ab4"),o=(n("bd99"),n("7a23")),r=(n("0a35"),n("330d"),n("9d28"),n("797a"),n("b6c4")),a=n("c5ff"),u=n("cf2e");function i(e,t,n,c,i,l){var d=Object(o["resolveComponent"])("header-comp"),s=Object(o["resolveComponent"])("router-view"),f=Object(o["resolveComponent"])("footer-comp"),b=u["a"],p=a["a"],h=r["a"];return Object(o["openBlock"])(),Object(o["createBlock"])(h,{locale:e.locale},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{ref:"scrollbarRef",height:"100vh",onScroll:e.scroll},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d),Object(o["createVNode"])(s),Object(o["createVNode"])(f),e.top>200?(Object(o["openBlock"])(),Object(o["createBlock"])(b,{key:0,class:"back-top",size:"large",icon:e.CaretTop,circle:"",onClick:e.backTop},null,8,["icon","onClick"])):Object(o["createCommentVNode"])("",!0)]})),_:1},8,["onScroll"])]})),_:1},8,["locale"])}var l=n("3ef4"),d=n("bf4f"),s=n("3ef0"),f=n.n(s),b=(n("2c92"),n("26f5"),n("0388")),p=n("def7"),h={class:"navbar"},m={class:"navbar-content"},k=["src"],g={class:"navbar-link navbar-noright-link"},v=Object(o["createTextVNode"])("首页"),j={key:0},O=Object(o["createTextVNode"])("消息"),y=Object(o["createTextVNode"])("消息"),C={key:1},N=Object(o["createTextVNode"])("收藏"),_=Object(o["createTextVNode"])("GitHub仓库"),x={key:2},w=Object(o["createTextVNode"])("登录"),E={key:3},V=Object(o["createTextVNode"])("退出");function B(e,t,n,c,r,a){var u=p["a"],i=b["a"];return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",h,[Object(o["createElementVNode"])("div",m,[Object(o["createElementVNode"])("span",{class:"navbar-logo",onClick:t[0]||(t[0]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.gotoIndex&&e.gotoIndex.apply(e,t)})},[Object(o["createElementVNode"])("img",{src:e.logoImage},null,8,k)]),Object(o["createElementVNode"])("span",g,[Object(o["createElementVNode"])("span",null,[Object(o["createVNode"])(u,{underline:!1,onClick:e.gotoIndex},{default:Object(o["withCtx"])((function(){return[v]})),_:1},8,["onClick"])]),""!==e.token?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",j,[e.count>0?(Object(o["openBlock"])(),Object(o["createBlock"])(i,{key:0,value:e.count,class:"badge-item"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{underline:!1,onClick:e.gotoMessage},{default:Object(o["withCtx"])((function(){return[O]})),_:1},8,["onClick"])]})),_:1},8,["value"])):(Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:1,underline:!1,onClick:e.gotoMessage},{default:Object(o["withCtx"])((function(){return[y]})),_:1},8,["onClick"]))])):Object(o["createCommentVNode"])("",!0),""!==e.token?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",C,[Object(o["createVNode"])(u,{underline:!1,onClick:e.gotoCollect},{default:Object(o["withCtx"])((function(){return[N]})),_:1},8,["onClick"])])):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("span",null,[Object(o["createVNode"])(u,{underline:!1,href:"https://github.com/guoqirong/vue3-cnode",target:"_blank"},{default:Object(o["withCtx"])((function(){return[_]})),_:1})]),""===e.token?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",x,[Object(o["createVNode"])(u,{underline:!1,onClick:e.gotoLogin},{default:Object(o["withCtx"])((function(){return[w]})),_:1},8,["onClick"])])):Object(o["createCommentVNode"])("",!0),""!==e.token?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",E,[Object(o["createVNode"])(u,{underline:!1,onClick:e.logout},{default:Object(o["withCtx"])((function(){return[V]})),_:1},8,["onClick"])])):Object(o["createCommentVNode"])("",!0)])])])}var T=n("5502"),P=n("6c02"),U=n("b32d"),S=n("d257"),D=n("1f2a"),L=Object(o["defineComponent"])({name:"HeaderComp",setup:function(){var e=Object(T["b"])(),t=e.state,c=e.commit,r=Object(P["c"])(),a=Object(U["a"])(),u=a.adornUrl,i=a.httpRequest,l=Object(o["computed"])((function(){return n("e347")})),d=Object(o["computed"])((function(){return t.user.token})),s=function(){"/index"!==r.path&&Object(S["e"])({path:"/"})},f=Object(D["a"])()[0];f.on("read-msg",(function(){p()}));var b=Object(o["ref"])(0);Object(o["watch"])(d,(function(e){e?p():c("user/updateUserData",{})}));var p=function(){i({url:u("/api/v1/message/count"),method:"get",params:{accesstoken:d.value||""}}).then((function(e){var t=e.data;b.value=t.data})).catch((function(e){console.error(e)}))};d.value&&p();var h=function(){"/message"!==r.path&&Object(S["e"])({path:"/message"})},m=function(){"/collect"!==r.path&&Object(S["e"])({path:"/collect"})},k=function(){"/login"!==r.path&&Object(S["e"])({path:"/login"})},g=function(){localStorage.removeItem("loginname"),localStorage.removeItem("token"),c("user/updateToken",""),c("user/updateSimpleUserData",{}),s()};return{logoImage:l,token:d,gotoIndex:s,count:b,gotoMessage:h,gotoCollect:m,gotoLogin:k,logout:g}}}),I=(n("491b"),n("6b0d")),q=n.n(I);const M=q()(L,[["render",B]]);var R=M,A={class:"body-footer"},H=Object(o["createElementVNode"])("div",{class:"footer-content"},[Object(o["createElementVNode"])("div",null,"CNode 社区为国内最专业的 Node.js 开源技术社区，致力于 Node.js 的技术研究。"),Object(o["createElementVNode"])("div",null,"CNode 社区版权归xxxxxx所有")],-1),Y=[H];function F(e,t,n,c,r,a){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",A,Y)}var K=Object(o["defineComponent"])({name:"FooterComp"});n("b54e");const Q=q()(K,[["render",F]]);var $=Q,J=Object(o["defineComponent"])({components:{HeaderComp:R,FooterComp:$},setup:function(){var e=Object(U["a"])(),t=e.isLoading,n=e.adornUrl,c=e.httpRequest,r=Object(T["b"])(),a=r.state,u=r.commit,i=Object(o["computed"])((function(){return a.user.token}));Object(o["watch"])(i,(function(e){e&&s(a.user.simpleUserData.loginname)})),Object(o["watch"])(t,(function(e){u("user/updateLoading",e)}));var s=function(e){c({url:n("/api/v1/user/"+e),method:"get"}).then((function(e){var t=e.data;u("user/updateUserData",t.data)})).catch((function(e){l["a"].error("请求失败"),console.error(e)}))};i.value&&s(a.user.simpleUserData.loginname),Object(o["onMounted"])((function(){u("user/updateSimpleUserData",{loginname:localStorage.getItem("loginname")||""}),u("user/updateToken",localStorage.getItem("token")||"")}));var b=Object(o["ref"])(0),p=Object(o["ref"])(),h=function(e){b.value=e.scrollTop},m=function(){var e;null===(e=p.value)||void 0===e||e.setScrollTop(0)};return{locale:f.a,top:b,scrollbarRef:p,scroll:h,CaretTop:d["a"],backTop:m}}});n("d6f0");const W=q()(J,[["render",i]]);var z,G=W,X=n("afbc"),Z=n("0613");function ee(e){return Object(c["b"])(this,void 0,void 0,(function(){var t,n,r;return Object(c["c"])(this,(function(c){return t=null!==e&&void 0!==e?e:{},n=t.container,r=t.entry,z=Object(o["createApp"])(G),z.use(Z["a"]).use(X["a"]).mount(n?n.querySelector("#app"):"#app"),Z["a"].commit("grobal/updateEntryUrl",r),[2]}))}))}function te(){return Object(c["b"])(this,void 0,Promise,(function(){return Object(c["c"])(this,(function(e){switch(e.label){case 0:return console.log("[vue] vue app bootstraped"),[4,new Promise((function(e){e(!0)}))];case 1:return[2,e.sent()]}}))}))}function ne(e){console.log("[vue] props from main framework",e),ee(e)}function ce(){z&&(console.log("[vue] vue app unmount"),Z["a"].commit("grobal/updateEntryUrl",""),z.unmount(),z._instance=null,z=void 0)}window.__POWERED_BY_QIANKUN__||ee()},d257:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"e",(function(){return s}));var c=n("9ab4"),o=n("93f3"),r=n("afbc"),a=function(e,t){var n=new Date(e);if(""!==e&&!n.getFullYear())return console.error("时间格式错误！"),"";/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length)));var c={"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds()};for(var o in c)if(new RegExp("("+o+")").test(t)){var r=c[o]+"";t=t.replace(RegExp.$1,1===RegExp.$1.length?r:u(r))}return t},u=function(e){return("00"+e).substr(e.length)},i=function(e,t){var n,c;return e?"置顶":null!==(c=null===(n=o["a"].find((function(e){return e.key===t})))||void 0===n?void 0:n.name)&&void 0!==c?c:"未知"},l=function(e,t){return void 0!==e&&void 0!==t?parseInt(String(Math.random()*(t-e+1)+e),10):void 0!==e?parseInt(String(Math.random()*e+1),10):0},d=function(e){var t=e.replace(/“|”/g,'"');return t=t.replace(/href="+(\/.?user.?\/|user.?\/)/g,'href="./#/user/'),t=t.replace(/&lt;/g,"<"),t.replace(/&gt;/g,">")},s=function(e){var t=("string"===typeof e?{path:void 0}:Object(c["a"])({path:void 0},e)).path,n="string"===typeof e?r["b"]+e:Object(c["a"])(Object(c["a"])({},e),t?{path:r["b"]+t}:{});r["a"].push(n)}},d6f0:function(e,t,n){"use strict";n("1d78")},e347:function(e,t,n){e.exports=n.p+"img/logo.e2b40b75.svg"}})}));
//# sourceMappingURL=app.bf8e9783.js.map