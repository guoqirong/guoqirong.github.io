(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a7e61c38"],{"576c":function(e,t,n){},"9ed6":function(e,t,n){"use strict";n.r(t);n("83b2"),n("7aa1"),n("797a"),n("c49e"),n("c4aa");var o=n("4c02"),c=n("d8e8"),a=n("cf2e"),r=n("c349"),l=n("7a23"),i={class:"login-body"},u=Object(l["createElementVNode"])("span",{class:"login-slogan"},"欢迎来到 CNode 中文社区",-1),d=Object(l["createElementVNode"])("span",{class:"login-title"},"token 登录",-1),s=Object(l["createTextVNode"])("登录"),b=Object(l["createTextVNode"])("取消");function f(e,t,n,f,m,j){var O=r["a"],p=c["b"],k=a["a"],g=c["a"],h=o["a"];return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",i,[u,Object(l["createVNode"])(h,{class:"box-card"},{header:Object(l["withCtx"])((function(){return[d]})),default:Object(l["withCtx"])((function(){return[Object(l["createVNode"])(g,{class:"login-form",model:e.form,rules:e.rules,ref:"ruleFormRef","label-width":"0px"},{default:Object(l["withCtx"])((function(){return[Object(l["createVNode"])(p,{prop:"token"},{default:Object(l["withCtx"])((function(){return[Object(l["createVNode"])(O,{modelValue:e.form.token,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.form.token=t}),placeholder:"accesstoken 登录校验",clearable:""},null,8,["modelValue"])]})),_:1}),Object(l["createVNode"])(p,null,{default:Object(l["withCtx"])((function(){return[Object(l["createVNode"])(k,{class:"login-btn",type:"primary",onClick:e.onSubmit,loading:e.isLoading},{default:Object(l["withCtx"])((function(){return[s]})),_:1},8,["onClick","loading"]),Object(l["createVNode"])(k,{class:"cencel-btn",onClick:e.onCancel,loading:e.isLoading},{default:Object(l["withCtx"])((function(){return[b]})),_:1},8,["onClick","loading"])]})),_:1})]})),_:1},8,["model","rules"])]})),_:1})])}var m=n("b32d"),j=n("3ef4"),O=n("6c02"),p=n("5502"),k=Object(l["defineComponent"])({components:{ElForm:c["a"],ElFormItem:c["b"],ElInput:r["a"],ElButton:a["a"]},setup:function(){var e=Object(m["a"])(),t=e.isLoading,n=e.adornUrl,o=e.httpRequest,c=Object(p["b"])().commit,a=Object(O["d"])(),r=Object(l["ref"])(),i=Object(l["reactive"])({token:""}),u=Object(l["reactive"])({token:[{required:!0,message:"请输入token校验",trigger:"blur"}]}),d=function(){r.value&&r.value.validate((function(e){if(!e)return!1;o({url:n("/api/v1/accesstoken"),method:"post",data:{accesstoken:i.token}}).then((function(e){var t=e.data;localStorage.setItem("loginname",t.loginname),localStorage.setItem("token",i.token),c("user/updateToken",i.token),c("user/updateSimpleUserData",t),a.push("/")})).catch((function(e){j["a"].error("登录失败"),console.error(e)}))}))},s=function(){a.go(-1)};return{ruleFormRef:r,form:i,rules:u,onSubmit:d,isLoading:t,onCancel:s}}}),g=(n("c2af"),n("6b0d")),h=n.n(g);const C=h()(k,[["render",f]]);t["default"]=C},c2af:function(e,t,n){"use strict";n("576c")}}]);
//# sourceMappingURL=chunk-a7e61c38.b289bf91.js.map