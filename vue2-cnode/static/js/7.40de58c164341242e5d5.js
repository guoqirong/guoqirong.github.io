(window["webpackJsonp_vue-cnode"]=window["webpackJsonp_vue-cnode"]||[]).push([[7],{Gr3j:function(t,a,e){},hEID:function(t,a,e){"use strict";e.r(a);var s=e("7Qib"),r={data:function(){return{loadData:!1,token:"",message:{}}},computed:{userData:function(){return this.$store.state.user.userData}},mounted:function(){var t=this;this.$nextTick((function(){t.token=localStorage.getItem("token")||"",t.getData()}))},methods:{getData:function(){var t=this;this.token&&(this.loadData=!0,this.$httpRequest({url:this.$httpRequest.adornUrl("/api/v1/messages"),method:"get",params:{accesstoken:this.token,mdrender:!0}}).then((function(a){var e=a.data;t.loadData=!1,e.data.has_read_messages.forEach((function(a){a.reply.content=t.imgpContent(a.reply.content)})),e.data.hasnot_read_messages.forEach((function(a){a.reply.content=t.imgpContent(a.reply.content)})),t.message=e.data})).catch((function(a){t.$message.error("请求失败"),console.error(a)})))},imgpContent:function(t){var a=t,e=a.match(/<img.*?(?:>|\/>)/gi);if(e&&e.length>0)for(var s=0;s<e.length;s++){var r=e[s].split(" "),i="";for(var n in r)i=0==n?r[n]+' style="width: 100%"':i+" "+r[n];a=a.replace(e[s],i)}var o=a.match(/<p.*?(?:>)/gi);if(o&&o.length>0)for(var l=0;l<o.length;l++){var c=o[l].split(""),d="";for(var v in c)1==v?d=d+c[v]+' style="word-wrap: break-word;word-break: break-all;"':d+=c[v];a=a.replace(o[l],d)}return(a=(a=(a=a.replace(/“|”/g,'"')).replace(/href="+(\/.?user.?\/|user.?\/)/g,'href="./#/user/')).replace(/&lt;/g,"<")).replace(/&gt;/g,">")},readAll:function(){var t=this;this.$httpRequest({url:this.$httpRequest.adornUrl("/api/v1/message/mark_all"),method:"post",params:{accesstoken:this.token}}).then((function(t){t.data,location.reload()})).catch((function(a){t.$message.error("请求失败"),console.error(a)}))},readOne:function(t){var a=this;this.$httpRequest({url:this.$httpRequest.adornUrl("/api/v1/message/mark_one/"+t),method:"post",params:{accesstoken:this.token}}).then((function(t){t.data,location.reload()})).catch((function(t){a.$message.error("请求失败"),console.error(t)}))},gotoLogin:function(){Object(s.b)(this.$route,this.$router,{path:"/login"})}}},i=e("JFUb"),n=Object(i.a)(r,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"my-message"},[e("div",{staticClass:"lift-content"},[e("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loadData,expression:"loadData"}],staticClass:"box-card"},[e("div",{staticClass:"card-title",attrs:{slot:"header"},slot:"header"},[e("span",[t._v("未读信息")]),t._v(" "),e("el-button",{staticClass:"all-read",on:{click:t.readAll}},[t._v("全部已读")])],1),t._v(" "),e("div",[t.message.hasnot_read_messages&&t.message.hasnot_read_messages.length>0?e("span",t._l(t.message.hasnot_read_messages,(function(a,s){return e("div",{key:s,staticClass:"notread-item"},[e("div",{staticClass:"user-img"},[e("el-avatar",{key:a.author.avatar_url,attrs:{shape:"square",size:40,src:a.author.avatar_url,alt:a.author.loginname}})],1),t._v(" "),e("div",{staticClass:"read-messages-title"},[e("div",{staticClass:"title"},[t._v(t._s(a.author.loginname+"回复了您的话题"))]),t._v(" "),e("div",{staticClass:"desc"},[t._v(t._s(t.$formatDate(a.create_at,"yyyy-MM-dd")))])]),t._v(" "),e("div",{staticClass:"read-btn"},[e("el-button",{on:{click:function(e){return t.readOne(a.id)}}},[t._v("已读")])],1),t._v(" "),e("div",{staticClass:"reply-content",domProps:{innerHTML:t._s(a.reply.content)}}),t._v(" "),e("div",{staticClass:"topic-title"},[t._v("话题："+t._s(a.topic.title))])])})),0):e("div",{staticClass:"is-notdata"},[t._v("暂无数据")])])]),t._v(" "),e("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loadData,expression:"loadData"}],staticClass:"box-card"},[e("div",{staticClass:"card-title",attrs:{slot:"header"},slot:"header"},[e("span",[t._v("已读信息")])]),t._v(" "),e("div",[t.message.has_read_messages&&t.message.has_read_messages.length>0?e("span",t._l(t.message.has_read_messages,(function(a,s){return e("div",{key:s,staticClass:"read-item"},[e("div",{staticClass:"user-img"},[e("el-avatar",{key:a.author.avatar_url,attrs:{shape:"square",size:40,src:a.author.avatar_url,alt:a.author.loginname}})],1),t._v(" "),e("div",{staticClass:"read-messages-title"},[e("div",{staticClass:"title"},[t._v(t._s(a.author.loginname+"回复了您的话题"))]),t._v(" "),e("div",{staticClass:"desc"},[t._v(t._s(t.$formatDate(a.create_at,"yyyy-MM-dd")))])]),t._v(" "),e("div",{staticClass:"reply-content",domProps:{innerHTML:t._s(a.reply.content)}}),t._v(" "),e("div",{staticClass:"topic-title"},[t._v("话题："+t._s(a.topic.title))])])})),0):e("div",{staticClass:"is-notdata"},[t._v("暂无数据")])])])],1),t._v(" "),e("div",{staticClass:"right-content"},[t.userData?t._e():e("el-card",{staticClass:"box-card"},[e("span",{staticClass:"not-login"},[e("div",{staticClass:"title"},[t._v("\n          CNode：Node.js专业中文社区 \n        ")]),t._v(" "),e("div",{staticClass:"describe"},[e("span",{staticClass:"not-bottom"},[t._v("当前为游客状态，您可以")]),t._v(" "),e("el-link",{attrs:{underline:!1},on:{click:t.gotoLogin}},[t._v("登录")])],1)])]),t._v(" "),t.userData?e("el-card",{staticClass:"box-card"},[e("div",{staticClass:"card-title",attrs:{slot:"header"},slot:"header"},[e("span",[t._v("个人信息")])]),t._v(" "),e("div",{staticClass:"user"},[e("div",{staticClass:"user-img"},[e("el-avatar",{key:t.userData.avatar_url||"",attrs:{shape:"square",size:40,src:t.userData.avatar_url||"",alt:t.userData.loginname||""}})],1),t._v(" "),e("div",{staticClass:"user-name"},[t._v(t._s(t.userData.loginname||""))])])]):t._e(),t._v(" "),e("el-card",{staticClass:"box-card"},[e("div",{staticClass:"card-title",attrs:{slot:"header"},slot:"header"},[e("span",[t._v("客户端二维码")])]),t._v(" "),e("el-image",{staticStyle:{width:"248px",height:"248px"},attrs:{src:"https://static.cnodejs.org/FtG0YVgQ6iginiLpf9W4_ShjiLfU",fit:"fit"}}),t._v(" "),e("div",{staticClass:"client-box"},[e("el-link",{attrs:{underline:!1,href:"https://github.com/soliury/noder-react-native",target:"_blank"}},[t._v("客户端源码地址")])],1)],1)],1)])}),[],!1,(function(t){e("Gr3j")}),null,null);a.default=n.exports}}]);