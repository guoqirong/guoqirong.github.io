(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{Y0Qx:function(t,a,e){"use strict";e.r(a);var i={data:function(){return{loadData:!1,mdrender:!0,tabKey:"",topic:{}}},mounted:function(){this.tabKey=this.$route.query.key,this.getData(this.$route.query.id)},methods:{goBack:function(){this.$bus.$emit("selectTabKey",this.tabKey),this.$router.go(-1)},getData:function(t){var a=this;this.id=t||"",this.loadData=!0,this.$httpRequest({url:this.$httpRequest.adornUrl("/api/v1/topic/"+t),method:"get",params:{mdrender:this.mdrender,accesstoken:localStorage.getItem("token")||""}}).then((function(t){var e=t.data;a.loadData=!1,e.data.content=a.imgContent(e.data.content),e.data.replies.forEach((function(t){t.content=a.imgContent(t.content)})),a.topic=e.data})).catch((function(t){a.$message.error("请求失败"),console.error(t)}))},imgContent:function(t){var a=t,e=a.match(/<img.*?(?:>|\/>)/gi);if(e&&e.length>0)for(var i=0;i<e.length;i++){var o=e[i].split(" "),s="";for(var c in o)s=0==c?o[c]+' style="width: 100%"':s+" "+o[c];a=a.replace(e[i],s)}var r=a.match(/<p.*?(?:>)/gi);if(r&&r.length>0)for(var l=0;l<r.length;l++){var n=r[l].split(""),d="";for(var p in n)1==p?d=d+n[p]+' style="word-wrap: break-word;word-break: break-all;"':d+=n[p];a=a.replace(r[l],d)}return a},collectClick:function(){this.topic.is_collect?this.topicDeCollect():this.topicCollect()},topicCollect:function(){var t=this;this.$httpRequest({url:this.$httpRequest.adornUrl("/api/v1/topic_collect/collect"),method:"post",data:{topic_id:this.topic.id,accesstoken:localStorage.getItem("token")||""}}).then((function(a){a.data,t.topic.is_collect=!0})).catch((function(a){t.$message.error("请求失败"),console.error(a)}))},topicDeCollect:function(){var t=this;this.$httpRequest({url:this.$httpRequest.adornUrl("/api/v1/topic_collect/de_collect"),method:"post",data:{topic_id:this.topic.id,accesstoken:localStorage.getItem("token")||""}}).then((function(a){a.data,t.topic.is_collect=!1})).catch((function(a){t.$message.error("请求失败"),console.error(a)}))}}},o=e("JFUb"),s=Object(o.a)(i,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadData,expression:"loadData"}],staticClass:"detail-body"},[e("div",{staticClass:"lift-content"},[e("el-card",{staticClass:"box-card"},[e("div",{staticClass:"card-title",attrs:{slot:"header"},slot:"header"},[e("el-page-header",{attrs:{content:"话题详情"},on:{back:t.goBack}})],1),t._v(" "),e("span",{staticClass:"my-topic-title"},[e("div",{staticClass:"topic-title"},[e("div",{staticClass:"title-left"},[e("div",{staticClass:"topic-title-tab",style:{width:t.topic.top||"dev"!==t.topic.tab?"40px":""}},[e("el-tag",{attrs:{effect:"dark",type:t.topic.top?"danger":"success"}},[t._v("\n                "+t._s(t.topic.top?"置顶":"good"===t.topic.tab?"精华":"share"===t.topic.tab?"分享":"ask"===t.topic.tab?"问答":"job"===t.topic.tab?"招聘":"dev"===t.topic.tab?"客户端测试":"全部")+"\n              ")])],1),t._v(" "),e("div",{staticClass:"title-name",style:{width:t.topic.top||"dev"!==t.topic.tab?"calc(100% - 40px)":""}},[t._v(t._s(t.topic.title))]),t._v(" "),e("div",{staticClass:"topic-title-desc"},[t._v(t._s("● "+t.$formatDate(t.topic.create_at||"","yyyy-MM-dd")+" ● "+(t.topic.author&&t.topic.author.loginname?t.topic.author.loginname:"")))])]),t._v(" "),e("div",{staticClass:"title-right"},[e("el-button",{attrs:{type:"warning",icon:t.topic.is_collect?"el-icon-star-on":"el-icon-star-off",circle:"",plain:"",size:"small"},on:{click:t.collectClick}})],1)]),t._v(" "),e("div",{staticClass:"topic-content",domProps:{innerHTML:t._s(t.topic.content)}})])]),t._v(" "),t.topic.replies&&t.topic.replies.length>0?e("el-card",{staticClass:"box-card"},[e("div",{staticClass:"card-replies-title",attrs:{slot:"header"},slot:"header"},[e("span",[t._v("回复")])]),t._v(" "),t._l(t.topic.replies,(function(a,i){return e("div",{key:i,staticClass:"replie-item"},[e("div",{staticClass:"replie-user-img"},[e("el-avatar",{attrs:{shape:"square",size:40,src:a.author.avatar_url}})],1),t._v(" "),e("div",{staticClass:"replie-title"},[t._v(t._s(a.author.loginname+"回复了您的话题"))]),t._v(" "),e("div",{staticClass:"replie-desc"},[t._v(t._s(t.$formatDate(a.create_at,"yyyy-MM-dd")))]),t._v(" "),e("div",{staticClass:"replie-content",domProps:{innerHTML:t._s(a.content)}})])}))],2):t._e()],1),t._v(" "),e("div",{staticClass:"right-content"},[e("el-card",{staticClass:"box-card"},[e("div",{staticClass:"card-title",attrs:{slot:"header"},slot:"header"},[e("span",[t._v("作者")])]),t._v(" "),e("div",{staticClass:"author"},[e("div",{staticClass:"author-img"},[e("el-avatar",{key:t.topic.author&&t.topic.author.avatar_url?t.topic.author.avatar_url:"",attrs:{shape:"square",size:40,src:t.topic.author&&t.topic.author.avatar_url?t.topic.author.avatar_url:"",alt:t.topic.author&&t.topic.author.loginname?t.topic.author.loginname:""}})],1),t._v(" "),e("div",{staticClass:"author-name"},[t._v(t._s(t.topic.author&&t.topic.author.loginname?t.topic.author.loginname:""))])])]),t._v(" "),e("el-card",{staticClass:"box-card"},[e("div",{staticClass:"card-title",attrs:{slot:"header"},slot:"header"},[e("span",[t._v("客户端二维码")])]),t._v(" "),e("el-image",{staticStyle:{width:"248px",height:"248px"},attrs:{src:"https://static.cnodejs.org/FtG0YVgQ6iginiLpf9W4_ShjiLfU",fit:"fit"}}),t._v(" "),e("div",{staticClass:"client-box"},[e("el-link",{attrs:{underline:!1,href:"https://github.com/soliury/noder-react-native",target:"_blank"}},[t._v("客户端源码地址")])],1)],1)],1)])}),[],!1,(function(t){e("yhD+")}),null,null);a.default=s.exports},"yhD+":function(t,a,e){}}]);
//# sourceMappingURL=5.9b56f195f12bb5b6efa9.js.map