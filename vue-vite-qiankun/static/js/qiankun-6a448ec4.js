import{r as f,b as Xn,d as er,e as ne,f as re,g as nr,h as K,_ as ce,i as B}from"./@babel-13116c64.js";import{_ as kn,a as Ln,b as ue,o as rr,s as tr,i as $,n as le,f as ar}from"./lodash-af31eb6c.js";import{_ as g,a as ye}from"./tslib-0aa18115.js";import{b as ir,P as or,l as ur,O as sr,x as cr}from"./single-spa-6054e080.js";import{_ as dn,i as xn}from"./import-html-entry-3bb1a303.js";var pn=window.__INJECTED_PUBLIC_PATH_BY_QIANKUN__;function lr(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"/",n=!1;return{beforeLoad:function(){return g(this,void 0,void 0,f.mark(function a(){return f.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:e.__INJECTED_PUBLIC_PATH_BY_QIANKUN__=t;case 1:case"end":return o.stop()}},a)}))},beforeMount:function(){return g(this,void 0,void 0,f.mark(function a(){return f.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:n&&(e.__INJECTED_PUBLIC_PATH_BY_QIANKUN__=t);case 1:case"end":return o.stop()}},a)}))},beforeUnmount:function(){return g(this,void 0,void 0,f.mark(function a(){return f.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:pn===void 0?delete e.__INJECTED_PUBLIC_PATH_BY_QIANKUN__:e.__INJECTED_PUBLIC_PATH_BY_QIANKUN__=pn,n=!0;case 2:case"end":return o.stop()}},a)}))}}}function fr(e){return{beforeLoad:function(){return g(this,void 0,void 0,f.mark(function n(){return f.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.__POWERED_BY_QIANKUN__=!0;case 1:case"end":return a.stop()}},n)}))},beforeMount:function(){return g(this,void 0,void 0,f.mark(function n(){return f.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.__POWERED_BY_QIANKUN__=!0;case 1:case"end":return a.stop()}},n)}))},beforeUnmount:function(){return g(this,void 0,void 0,f.mark(function n(){return f.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:delete e.__POWERED_BY_QIANKUN__;case 1:case"end":return a.stop()}},n)}))}}}function dr(e,t){return kn({},fr(e),lr(e,t),function(n,r){return Ln(n!=null?n:[],r!=null?r:[])})}var fe=function(e){Xn(n,e);var t=er(n);function n(r){return ne(this,n),t.call(this,"[qiankun]: ".concat(r))}return re(n)}(nr(Error)),z={},ee={};function pr(e,t){Object.keys(ee).forEach(function(n){ee[n]instanceof Function&&ee[n](ue(e),ue(t))})}function vr(e,t){return{onGlobalStateChange:function(r,a){if(!(r instanceof Function)){console.error("[qiankun] callback must be function!");return}if(ee[e]&&console.warn("[qiankun] '".concat(e,"' global listener already exists before this, new listener will overwrite it.")),ee[e]=r,a){var i=ue(z);r(i,i)}},setGlobalState:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(r===z)return console.warn("[qiankun] state has not changed\uFF01"),!1;var a=[],i=ue(z);return z=ue(Object.keys(r).reduce(function(o,s){return t||o.hasOwnProperty(s)?(a.push(s),Object.assign(o,K({},s,r[s]))):(console.warn("[qiankun] '".concat(s,"' not declared when init state\uFF01")),o)},z)),a.length===0?(console.warn("[qiankun] state has not changed\uFF01"),!1):(pr(z,i),!0)},offGlobalStateChange:function(){return delete ee[e],!0}}}var k;(function(e){e.Proxy="Proxy",e.Snapshot="Snapshot",e.LegacyProxy="LegacyProxy"})(k||(k={}));var hr="2.7.0";function X(e){return Array.isArray(e)?e:[e]}var wr=typeof window.Zone=="function"?setTimeout:function(e){return Promise.resolve().then(e)},ke=!1;function mr(e){ke||(ke=!0,wr(function(){e(),ke=!1}))}var Le=new WeakMap;function gr(e){var t=e.prototype&&e.prototype.constructor===e&&Object.getOwnPropertyNames(e.prototype).length>1;if(t)return!0;if(Le.has(e))return Le.get(e);var n=t;if(!n){var r=e.toString(),a=/^function\b\s[A-Z].*/,i=/^class\b/;n=a.test(r)||i.test(r)}return Le.set(e,n),n}var yr=typeof document.all=="function"&&typeof document.all=="undefined",vn=new WeakMap,br=function(t){if(vn.has(t))return!0;var n=yr?typeof t=="function"&&typeof t!="undefined":typeof t=="function";return n&&vn.set(t,n),n},xe=new WeakMap;function Sr(e){if(xe.has(e))return xe.get(e);var t=e.name.indexOf("bound ")===0&&!e.hasOwnProperty("prototype");return xe.set(e,t),t}function Pr(e){return function(t){return'<div id="'.concat(In(e),'" data-name="').concat(e,'" data-version="').concat(hr,'">').concat(t,"</div>")}}function In(e){return"__qiankun_microapp_wrapper_for_".concat(tr(e),"__")}var R=new Function("return this")(),Cr=rr(function(){return R.hasOwnProperty("__app_instance_name_map__")||Object.defineProperty(R,"__app_instance_name_map__",{enumerable:!1,configurable:!0,writable:!0,value:{}}),R.__app_instance_name_map__}),Er=function(t){var n=Cr();return t in n?(n[t]++,"".concat(t,"_").concat(n[t])):(R.__app_instance_name_map__[t]=0,t)};function Ie(e){var t=e!=null?e:{},n=t.bootstrap,r=t.mount,a=t.unmount;return $(n)&&$(r)&&$(a)}var Tn=re(function e(){var t=this;ne(this,e),this.promise=new Promise(function(n,r){t.resolve=n,t.reject=r})});function _r(e){return ce(e)!=="object"||e.strictStyleIsolation?!1:!!e.experimentalStyleIsolation}function Mr(e){return typeof e=="string"?document.querySelector(e):e}var Rn=null;function Wn(){return Rn}function hn(e){Rn=e}var wn=new WeakMap;function Hn(e,t){if(br(t)&&!Sr(t)&&!gr(t)){var n=wn.get(t);if(n)return n;var r=Function.prototype.bind.call(t,e);for(var a in t)r[a]=t[a];if(t.hasOwnProperty("prototype")&&!r.hasOwnProperty("prototype")&&Object.defineProperty(r,"prototype",{value:t.prototype,enumerable:!1,writable:!0}),typeof t.toString=="function"){var i=t.hasOwnProperty("toString")&&!r.hasOwnProperty("toString"),o=r.toString===Function.prototype.toString;if(i||o){var s=Object.getOwnPropertyDescriptor(i?t:Function.prototype,"toString");Object.defineProperty(r,"toString",Object.assign(Object.assign({},s),s!=null&&s.get?null:{value:function(){return t.toString()}}))}}return wn.set(t,r),r}return t}function Or(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return n?n.configurable:!0}var Ar=function(){function e(t){var n=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:window;ne(this,e),this.addedPropsMapInSandbox=new Map,this.modifiedPropsOriginalValueMapInSandbox=new Map,this.currentUpdatedPropsValueMap=new Map,this.sandboxRunning=!0,this.latestSetProp=null,this.name=t,this.globalContext=r,this.type=k.LegacyProxy;var a=this.addedPropsMapInSandbox,i=this.modifiedPropsOriginalValueMapInSandbox,o=this.currentUpdatedPropsValueMap,s=r,d=Object.create(null),w=function(l,u,v){var m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;return n.sandboxRunning&&(s.hasOwnProperty(l)?i.has(l)||i.set(l,v):a.set(l,u),o.set(l,u),m&&(s[l]=u),n.latestSetProp=l),!0},p=new Proxy(d,{set:function(l,u,v){var m=s[u];return w(u,v,m,!0)},get:function(l,u){if(u==="top"||u==="parent"||u==="window"||u==="self")return p;var v=s[u];return Hn(s,v)},has:function(l,u){return u in s},getOwnPropertyDescriptor:function(l,u){var v=Object.getOwnPropertyDescriptor(s,u);return v&&!v.configurable&&(v.configurable=!0),v},defineProperty:function(l,u,v){var m=s[u],P=Reflect.defineProperty(s,u,v),E=s[u];return w(u,E,m,!1),P}});this.proxy=p}return re(e,[{key:"setWindowProp",value:function(n,r,a){r===void 0&&a?delete this.globalContext[n]:Or(this.globalContext,n)&&ce(n)!=="symbol"&&(Object.defineProperty(this.globalContext,n,{writable:!0,configurable:!0}),this.globalContext[n]=r)}},{key:"active",value:function(){var n=this;this.sandboxRunning||this.currentUpdatedPropsValueMap.forEach(function(r,a){return n.setWindowProp(a,r)}),this.sandboxRunning=!0}},{key:"inactive",value:function(){var n=this;this.modifiedPropsOriginalValueMapInSandbox.forEach(function(r,a){return n.setWindowProp(a,r)}),this.addedPropsMapInSandbox.forEach(function(r,a){return n.setWindowProp(a,void 0,!0)}),this.sandboxRunning=!1}}]),e}(),se;(function(e){e[e.STYLE=1]="STYLE",e[e.MEDIA=4]="MEDIA",e[e.SUPPORTS=12]="SUPPORTS",e[e.IMPORT=3]="IMPORT",e[e.FONT_FACE=5]="FONT_FACE",e[e.PAGE=6]="PAGE",e[e.KEYFRAMES=7]="KEYFRAMES",e[e.KEYFRAME=8]="KEYFRAME"})(se||(se={}));var pe=function(t){return[].slice.call(t,0)},kr=HTMLBodyElement.prototype.appendChild,jn=function(){function e(){ne(this,e);var t=document.createElement("style");kr.call(document.body,t),this.swapNode=t,this.sheet=t.sheet,this.sheet.disabled=!0}return re(e,[{key:"process",value:function(n){var r=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",i;if(n.textContent!==""){var o=document.createTextNode(n.textContent||"");this.swapNode.appendChild(o);var s=this.swapNode.sheet,d=pe((i=s==null?void 0:s.cssRules)!==null&&i!==void 0?i:[]),w=this.rewrite(d,a);n.textContent=w,this.swapNode.removeChild(o);return}var p=new MutationObserver(function(h){for(var l,u=0;u<h.length;u+=1){var v=h[u];if(e.ModifiedTag in n)return;if(v.type==="childList"){var m=n.sheet,P=pe((l=m==null?void 0:m.cssRules)!==null&&l!==void 0?l:[]),E=r.rewrite(P,a);n.textContent=E,n[e.ModifiedTag]=!0}}});p.observe(n,{childList:!0})}},{key:"rewrite",value:function(n){var r=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",i="";return n.forEach(function(o){switch(o.type){case se.STYLE:i+=r.ruleStyle(o,a);break;case se.MEDIA:i+=r.ruleMedia(o,a);break;case se.SUPPORTS:i+=r.ruleSupport(o,a);break;default:i+="".concat(o.cssText);break}}),i}},{key:"ruleStyle",value:function(n,r){var a=/((?:[^\w\-.#]|^)(body|html|:root))/gm,i=/(html[^\w{[]+)/gm,o=n.selectorText.trim(),s=n.cssText;if(o==="html"||o==="body"||o===":root")return s.replace(a,r);if(i.test(n.selectorText)){var d=/(html[^\w{]+)(\+|~)/gm;d.test(n.selectorText)||(s=s.replace(i,""))}return s=s.replace(/^[\s\S]+{/,function(w){return w.replace(/(^|,\n?)([^,]+)/g,function(p,h,l){return a.test(p)?p.replace(a,function(u){var v=[",","("];return u&&v.includes(u[0])?"".concat(u[0]).concat(r):r}):"".concat(h).concat(r," ").concat(l.replace(/^ */,""))})}),s}},{key:"ruleMedia",value:function(n,r){var a=this.rewrite(pe(n.cssRules),r);return"@media ".concat(n.conditionText," {").concat(a,"}")}},{key:"ruleSupport",value:function(n,r){var a=this.rewrite(pe(n.cssRules),r);return"@supports ".concat(n.conditionText," {").concat(a,"}")}}]),e}();jn.ModifiedTag="Symbol(style-modified-qiankun)";var Te,Ge="data-qiankun",qe=function(t,n,r){Te||(Te=new jn),n.tagName==="LINK"&&console.warn("Feature: sandbox.experimentalStyleIsolation is not support for link element yet.");var a=t;if(!!a){var i=(a.tagName||"").toLowerCase();if(i&&n.tagName==="STYLE"){var o="".concat(i,"[").concat(Ge,'="').concat(r,'"]');Te.process(n,o)}}},me=HTMLHeadElement.prototype.appendChild,Re=HTMLHeadElement.prototype.removeChild,We=HTMLBodyElement.prototype.appendChild,He=HTMLBodyElement.prototype.removeChild,je=HTMLHeadElement.prototype.insertBefore,Lr=HTMLElement.prototype.removeChild,Je="SCRIPT",be="LINK",Bn="STYLE";function xr(e){return!e.type||["text/javascript","module","application/javascript","text/ecmascript","application/ecmascript"].indexOf(e.type)!==-1}function Ze(e){return(e==null?void 0:e.toUpperCase())===be||(e==null?void 0:e.toUpperCase())===Bn||(e==null?void 0:e.toUpperCase())===Je}function $n(e){var t,n;return!e.textContent&&(((t=e.sheet)===null||t===void 0?void 0:t.cssRules.length)||((n=Yn(e))===null||n===void 0?void 0:n.length))}function Dn(e,t){return Object.defineProperties(e,{srcElement:{get:t},target:{get:t}}),e}function Un(e){var t=new CustomEvent("load"),n=Dn(t,function(){return e});$(e.onload)?e.onload(n):e.dispatchEvent(n)}function Fn(e){var t=new CustomEvent("error"),n=Dn(t,function(){return e});$(e.onerror)?e.onerror(n):e.dispatchEvent(n)}function Ir(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:fetch,r=document.createElement("style"),a=e.href;return r.dataset.qiankunHref=a,n(a).then(function(i){return i.text()}).then(function(i){r.appendChild(document.createTextNode(i)),t(r),Un(e)}).catch(function(){return Fn(e)}),r}var Nn=new WeakMap,Ye=new WeakMap,Gn=new WeakMap;function qn(e){e.forEach(function(t){t instanceof HTMLStyleElement&&$n(t)&&t.sheet&&Nn.set(t,t.sheet.cssRules)})}function Yn(e){return Nn.get(e)}function Be(e){return function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,a,i,o=n,s=e.rawDOMAppendOrInsertBefore,d=e.isInvokedByMicroApp,w=e.containerConfigGetter;if(!Ze(o.tagName)||!d(o))return s.call(this,o,r);if(o.tagName){var p=w(o),h=p.appName,l=p.appWrapperGetter,u=p.proxy,v=p.strictGlobal,m=p.dynamicStyleSheetElements,P=p.scopedCSS,E=p.excludeAssetFilter;switch(o.tagName){case be:case Bn:{var b=n,W=b,D=W.href;if(E&&D&&E(D))return s.call(this,o,r);var S=l();if(P){var U=((a=o.tagName)===null||a===void 0?void 0:a.toUpperCase())===be&&o.rel==="stylesheet"&&o.href;if(U){var H=typeof I.fetch=="function"?I.fetch:(i=I.fetch)===null||i===void 0?void 0:i.fn;b=Ir(o,function(A){return qe(S,A,h)},H),Gn.set(o,b)}else qe(S,b,h)}m.push(b);var F=S.contains(r)?r:null;return s.call(S,b,F)}case Je:{var N=o,L=N.src,G=N.text;if(E&&L&&E(L)||!xr(o))return s.call(this,o,r);var V=l(),_=I.fetch,Q=V.contains(r)?r:null;if(L){dn(null,[L],u,{fetch:_,strictGlobal:v,beforeExec:function(){var j=function(){var ae=Object.getOwnPropertyDescriptor(document,"currentScript");return!ae||ae.configurable};j()&&Object.defineProperty(document,"currentScript",{get:function(){return o},configurable:!0})},success:function(){Un(o),o=null},error:function(){Fn(o),o=null}});var J=document.createComment("dynamic script ".concat(L," replaced by qiankun"));return Ye.set(o,J),s.call(V,J,Q)}dn(null,["<script>".concat(G,"<\/script>")],u,{strictGlobal:v});var Z=document.createComment("dynamic inline script replaced by qiankun");return Ye.set(o,Z),s.call(V,Z,Q)}}}return s.call(this,o,r)}}function mn(e,t){return function(r){var a=r.tagName;if(!Ze(a))return e.call(this,r);try{var i;switch(a){case be:{i=Gn.get(r)||r;break}case Je:{i=Ye.get(r)||r;break}default:i=r}var o=t(r),s=o();if(s.contains(i))return Lr.call(s,i)}catch(d){console.warn(d)}return e.call(this,r)}}function Kn(e,t){return HTMLHeadElement.prototype.appendChild===me&&HTMLBodyElement.prototype.appendChild===We&&HTMLHeadElement.prototype.insertBefore===je&&(HTMLHeadElement.prototype.appendChild=Be({rawDOMAppendOrInsertBefore:me,containerConfigGetter:t,isInvokedByMicroApp:e}),HTMLBodyElement.prototype.appendChild=Be({rawDOMAppendOrInsertBefore:We,containerConfigGetter:t,isInvokedByMicroApp:e}),HTMLHeadElement.prototype.insertBefore=Be({rawDOMAppendOrInsertBefore:je,containerConfigGetter:t,isInvokedByMicroApp:e})),HTMLHeadElement.prototype.removeChild===Re&&HTMLBodyElement.prototype.removeChild===He&&(HTMLHeadElement.prototype.removeChild=mn(Re,function(n){return t(n).appWrapperGetter}),HTMLBodyElement.prototype.removeChild=mn(He,function(n){return t(n).appWrapperGetter})),function(){HTMLHeadElement.prototype.appendChild=me,HTMLHeadElement.prototype.removeChild=Re,HTMLBodyElement.prototype.appendChild=We,HTMLBodyElement.prototype.removeChild=He,HTMLHeadElement.prototype.insertBefore=je}}function Vn(e,t){e.forEach(function(n){var r=t(n);if(r&&n instanceof HTMLStyleElement&&$n(n)){var a=Yn(n);if(a)for(var i=0;i<a.length;i++){var o=a[i],s=n.sheet;s.insertRule(o.cssText,s.cssRules.length)}}})}var ve=0,$e=0;function Se(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,i=arguments.length>5?arguments[5]:void 0,o=[],s=Kn(function(){return ir(window.location).some(function(d){return d===e})},function(){return{appName:e,appWrapperGetter:t,proxy:n,strictGlobal:!1,scopedCSS:a,dynamicStyleSheetElements:o,excludeAssetFilter:i}});return r||ve++,r&&$e++,function(){!r&&ve!==0&&ve--,r&&$e--;var w=$e===0&&ve===0;return w&&s(),qn(o),function(){Vn(o,function(h){var l=t();return l.contains(h)?!1:(document.head.appendChild.call(l,h),!0)}),r&&(o=[])}}}Object.defineProperty(R,"__proxyAttachContainerConfigMap__",{enumerable:!1,writable:!0});R.__proxyAttachContainerConfigMap__=R.__proxyAttachContainerConfigMap__||new WeakMap;var Ke=R.__proxyAttachContainerConfigMap__,Ve=new WeakMap,gn=new WeakMap;function Tr(){var e=gn.get(document.createElement);if(!e){var t=document.createElement;Document.prototype.createElement=function(r,a){var i=t.call(this,r,a);if(Ze(r)){var o=Wn()||{},s=o.window;if(s){var d=Ke.get(s);d&&Ve.set(i,d)}}return i},document.hasOwnProperty("createElement")&&(document.createElement=Document.prototype.createElement),gn.set(Document.prototype.createElement,t)}return function(){e&&(Document.prototype.createElement=e,document.createElement=e)}}var he=0,De=0;function Qn(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,i=arguments.length>5?arguments[5]:void 0,o=Ke.get(n);o||(o={appName:e,proxy:n,appWrapperGetter:t,dynamicStyleSheetElements:[],strictGlobal:!0,excludeAssetFilter:i,scopedCSS:a},Ke.set(n,o));var s=o,d=s.dynamicStyleSheetElements,w=Tr(),p=Kn(function(h){return Ve.has(h)},function(h){return Ve.get(h)});return r||he++,r&&De++,function(){!r&&he!==0&&he--,r&&De--;var l=De===0&&he===0;return l&&(p(),w()),qn(d),function(){Vn(d,function(v){var m=t();return m.contains(v)?!1:(me.call(m,v),!0)})}}}function Rr(){var e=function(a){return le},t=[],n=[];return window.g_history&&$(window.g_history.listen)&&(e=window.g_history.listen.bind(window.g_history),window.g_history.listen=function(r){t.push(r);var a=e(r);return n.push(a),function(){a(),n.splice(n.indexOf(a),1),t.splice(t.indexOf(r),1)}}),function(){var a=le;return t.length&&(a=function(){t.forEach(function(o){return window.g_history.listen(o)})}),n.forEach(function(i){return i()}),window.g_history&&$(window.g_history.listen)&&(window.g_history.listen=e),a}}var yn=window.setInterval,bn=window.clearInterval;function Wr(e){var t=[];return e.clearInterval=function(n){return t=t.filter(function(r){return r!==n}),bn.call(window,n)},e.setInterval=function(n,r){for(var a=arguments.length,i=new Array(a>2?a-2:0),o=2;o<a;o++)i[o-2]=arguments[o];var s=yn.apply(void 0,[n,r].concat(i));return t=[].concat(B(t),[s]),s},function(){return t.forEach(function(r){return e.clearInterval(r)}),e.setInterval=yn,e.clearInterval=bn,le}}var Sn=window.addEventListener,Pn=window.removeEventListener;function Hr(e){var t=new Map;return e.addEventListener=function(n,r,a){var i=t.get(n)||[];return t.set(n,[].concat(B(i),[r])),Sn.call(window,n,r,a)},e.removeEventListener=function(n,r,a){var i=t.get(n);return i&&i.length&&i.indexOf(r)!==-1&&i.splice(i.indexOf(r),1),Pn.call(window,n,r,a)},function(){return t.forEach(function(r,a){return B(r).forEach(function(i){return e.removeEventListener(a,i)})}),e.addEventListener=Sn,e.removeEventListener=Pn,le}}function jr(e,t,n,r,a){var i,o,s=[function(){return Wr(n.proxy)},function(){return Hr(n.proxy)},function(){return Rr()}],d=(i={},K(i,k.LegacyProxy,[].concat(s,[function(){return Se(e,t,n.proxy,!0,r,a)}])),K(i,k.Proxy,[].concat(s,[function(){return Qn(e,t,n.proxy,!0,r,a)}])),K(i,k.Snapshot,[].concat(s,[function(){return Se(e,t,n.proxy,!0,r,a)}])),i);return(o=d[n.type])===null||o===void 0?void 0:o.map(function(w){return w()})}function Br(e,t,n,r,a){var i,o,s=(i={},K(i,k.LegacyProxy,[function(){return Se(e,t,n.proxy,!1,r,a)}]),K(i,k.Proxy,[function(){return Qn(e,t,n.proxy,!1,r,a)}]),K(i,k.Snapshot,[function(){return Se(e,t,n.proxy,!1,r,a)}]),i);return(o=s[n.type])===null||o===void 0?void 0:o.map(function(d){return d()})}function $r(e){return e.filter(function(n){return n in this?!1:this[n]=!0},Object.create(null))}var Dr=Object.defineProperty,Ur=window.__QIANKUN_DEVELOPMENT__?["__REACT_ERROR_OVERLAY_GLOBAL_HOOK__"]:[],Cn=["System","__cjsWrapper"].concat(Ur),En={undefined:!0,Array:!0,Object:!0,String:!0,Boolean:!0,Math:!0,Number:!0,Symbol:!0,parseFloat:!0,Float32Array:!0,isNaN:!0,Infinity:!0,Reflect:!0,Float64Array:!0,Function:!0,Map:!0,NaN:!0,Promise:!0,Proxy:!0,Set:!0,parseInt:!0,requestAnimationFrame:!0},Fr=new Map([["fetch",!0],["mockDomAPIInBlackList",!1]]);function Nr(e){var t=new Map,n={};return Object.getOwnPropertyNames(e).filter(function(r){var a=Object.getOwnPropertyDescriptor(e,r);return!(a!=null&&a.configurable)}).forEach(function(r){var a=Object.getOwnPropertyDescriptor(e,r);if(a){var i=Object.prototype.hasOwnProperty.call(a,"get");(r==="top"||r==="parent"||r==="self"||r==="window")&&(a.configurable=!0,i||(a.writable=!0)),i&&t.set(r,!0),Dr(n,r,Object.freeze(a))}}),{fakeWindow:n,propertiesWithGetter:t}}var Ue=0,Gr=function(){function e(t){var n=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:window;ne(this,e),this.updatedValueSet=new Set,this.sandboxRunning=!0,this.latestSetProp=null,this.name=t,this.globalContext=r,this.type=k.Proxy;var a=this.updatedValueSet,i=Nr(r),o=i.fakeWindow,s=i.propertiesWithGetter,d=new Map,w=function(l){return o.hasOwnProperty(l)||r.hasOwnProperty(l)},p=new Proxy(o,{set:function(l,u,v){if(n.sandboxRunning){if(n.registerRunningApp(t,p),!l.hasOwnProperty(u)&&r.hasOwnProperty(u)){var m=Object.getOwnPropertyDescriptor(r,u),P=m.writable,E=m.configurable,b=m.enumerable;P&&Object.defineProperty(l,u,{configurable:E,enumerable:b,writable:P,value:v})}else l[u]=v;return Cn.indexOf(u)!==-1&&(r[u]=v),a.add(u),n.latestSetProp=u,!0}return!0},get:function(l,u){if(n.registerRunningApp(t,p),u===Symbol.unscopables)return En;if(u==="window"||u==="self"||u==="globalThis")return p;if(u==="top"||u==="parent")return r===r.parent?p:r[u];if(u==="hasOwnProperty")return w;if(u==="document")return document;if(u==="eval")return eval;var v=s.has(u)?r[u]:u in l?l[u]:r[u],m=Fr.get(u)?R:r;return Hn(m,v)},has:function(l,u){return u in En||u in l||u in r},getOwnPropertyDescriptor:function(l,u){if(l.hasOwnProperty(u)){var v=Object.getOwnPropertyDescriptor(l,u);return d.set(u,"target"),v}if(r.hasOwnProperty(u)){var m=Object.getOwnPropertyDescriptor(r,u);return d.set(u,"globalContext"),m&&!m.configurable&&(m.configurable=!0),m}},ownKeys:function(l){return $r(Reflect.ownKeys(r).concat(Reflect.ownKeys(l)))},defineProperty:function(l,u,v){var m=d.get(u);switch(m){case"globalContext":return Reflect.defineProperty(r,u,v);default:return Reflect.defineProperty(l,u,v)}},deleteProperty:function(l,u){return n.registerRunningApp(t,p),l.hasOwnProperty(u)&&(delete l[u],a.delete(u)),!0},getPrototypeOf:function(){return Reflect.getPrototypeOf(r)}});this.proxy=p,Ue++}return re(e,[{key:"registerRunningApp",value:function(n,r){if(this.sandboxRunning){var a=Wn();(!a||a.name!==n)&&hn({name:n,window:r}),mr(function(){hn(null)})}}},{key:"active",value:function(){this.sandboxRunning||Ue++,this.sandboxRunning=!0}},{key:"inactive",value:function(){var n=this;--Ue===0&&Cn.forEach(function(r){n.proxy.hasOwnProperty(r)&&delete n.globalContext[r]}),this.sandboxRunning=!1}}]),e}();function _n(e,t){for(var n in e)(e.hasOwnProperty(n)||n==="clearInterval")&&t(n)}var qr=function(){function e(t){ne(this,e),this.sandboxRunning=!0,this.modifyPropsMap={},this.name=t,this.proxy=window,this.type=k.Snapshot}return re(e,[{key:"active",value:function(){var n=this;this.windowSnapshot={},_n(window,function(r){n.windowSnapshot[r]=window[r]}),Object.keys(this.modifyPropsMap).forEach(function(r){window[r]=n.modifyPropsMap[r]}),this.sandboxRunning=!0}},{key:"inactive",value:function(){var n=this;this.modifyPropsMap={},_n(window,function(r){window[r]!==n.windowSnapshot[r]&&(n.modifyPropsMap[r]=window[r],window[r]=n.windowSnapshot[r])}),this.sandboxRunning=!1}}]),e}();function Yr(e,t,n,r,a,i){var o;window.Proxy?o=r?new Ar(e,i):new Gr(e,i):o=new qr(e);var s=Br(e,t,o,n,a),d=[],w=[];return{instance:o,mount:function(){return g(this,void 0,void 0,f.mark(function h(){var l,u;return f.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:o.active(),l=w.slice(0,s.length),u=w.slice(s.length),l.length&&l.forEach(function(P){return P()}),d=jr(e,t,o,n,a),u.length&&u.forEach(function(P){return P()}),w=[];case 7:case"end":return m.stop()}},h)}))},unmount:function(){return g(this,void 0,void 0,f.mark(function h(){return f.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:w=[].concat(B(s),B(d)).map(function(v){return v()}),o.inactive();case 2:case"end":return u.stop()}},h)}))}}}function Qe(e,t){if(!e)throw t?new fe(t):new fe("element not existed!")}function oe(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:window;return e.length?e.reduce(function(r,a){return r.then(function(){return a(t,n)})},Promise.resolve()):Promise.resolve()}function we(e,t){return g(this,void 0,void 0,f.mark(function n(){return f.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",typeof e=="function"?e(t):!!e);case 1:case"end":return a.stop()}},n)}))}var Jn=document.head.attachShadow||document.head.createShadowRoot;function Mn(e,t,n,r){var a=document.createElement("div");a.innerHTML=e;var i=a.firstChild;if(t)if(!Jn)console.warn("[qiankun]: As current browser not support shadow dom, your strictStyleIsolation configuration will be ignored!");else{var o=i.innerHTML;i.innerHTML="";var s;i.attachShadow?s=i.attachShadow({mode:"open"}):s=i.createShadowRoot(),s.innerHTML=o}if(n){var d=i.getAttribute(Ge);d||i.setAttribute(Ge,r);var w=i.querySelectorAll("style")||[];ar(w,function(p){qe(i,p,r)})}return i}function On(e,t,n,r,a){return function(){if(t){if(n)throw new fe("strictStyleIsolation can not be used with legacy render!");if(r)throw new fe("experimentalStyleIsolation can not be used with legacy render!");var i=document.getElementById(In(e));return Qe(i,"Wrapper element for ".concat(e," is not existed!")),i}var o=a();return Qe(o,"Wrapper element for ".concat(e," is not existed!")),n&&Jn?o.shadowRoot:o}}var Kr=HTMLElement.prototype.appendChild,Vr=HTMLElement.prototype.removeChild;function Qr(e,t,n){var r=function(i,o){var s=i.element,d=i.loading,w=i.container;if(n)return n({loading:d,appContent:s?t:""});var p=Mr(w);if(o!=="unmounted"){var h=function(){switch(o){case"loading":case"mounting":return"Target container with ".concat(w," not existed while ").concat(e," ").concat(o,"!");case"mounted":return"Target container with ".concat(w," not existed after ").concat(e," ").concat(o,"!");default:return"Target container with ".concat(w," not existed while ").concat(e," rendering!")}}();Qe(p,h)}if(p&&!p.contains(s)){for(;p.firstChild;)Vr.call(p,p.firstChild);s&&Kr.call(p,s)}};return r}function Jr(e,t,n,r){if(Ie(e))return e;if(r){var a=n[r];if(Ie(a))return a}var i=n[t];if(Ie(i))return i;throw new fe("You need to export lifecycle functions in ".concat(t," entry"))}var Y;function Zr(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r;return g(this,void 0,void 0,f.mark(function a(){var i=this,o,s,d,w,p,h,l,u,v,m,P,E,b,W,D,S,U,H,F,N,L,G,V,_,Q,J,Z,A,j,te,ae,Pe,ze,Ce,Xe,Ee,en,_e,nn,rn,ie,tn,an,on,Me,de,un,sn,cn,Oe,ln;return f.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return o=e.entry,s=e.name,d=Er(s),w=t.singular,p=w===void 0?!1:w,h=t.sandbox,l=h===void 0?!0:h,u=t.excludeAssetFilter,v=t.globalContext,m=v===void 0?window:v,P=ye(t,["singular","sandbox","excludeAssetFilter","globalContext"]),M.next=7,xn(o,P);case 7:return E=M.sent,b=E.template,W=E.execScripts,D=E.assetPublicPath,M.next=13,we(p,e);case 13:if(!M.sent){M.next=16;break}return M.next=16,Y&&Y.promise;case 16:return S=Pr(d)(b),U=ce(l)==="object"&&!!l.strictStyleIsolation,H=_r(l),F=Mn(S,U,H,d),N="container"in e?e.container:void 0,L="render"in e?e.render:void 0,G=Qr(d,S,L),G({element:F,loading:!0,container:N},"loading"),V=On(d,!!L,U,H,function(){return F}),_=m,Q=function(){return Promise.resolve()},J=function(){return Promise.resolve()},Z=ce(l)==="object"&&!!l.loose,l&&(A=Yr(d,V,H,Z,u,_),_=A.instance.proxy,Q=A.mount,J=A.unmount),j=kn({},dr(_,D),n,function(q,x){return Ln(q!=null?q:[],x!=null?x:[])}),te=j.beforeUnmount,ae=te===void 0?[]:te,Pe=j.afterUnmount,ze=Pe===void 0?[]:Pe,Ce=j.afterMount,Xe=Ce===void 0?[]:Ce,Ee=j.beforeMount,en=Ee===void 0?[]:Ee,_e=j.beforeLoad,nn=_e===void 0?[]:_e,M.next=34,oe(X(nn),e,_);case 34:return M.next=36,W(_,l&&!Z);case 36:return rn=M.sent,ie=Jr(rn,s,_,(r=A==null?void 0:A.instance)===null||r===void 0?void 0:r.latestSetProp),tn=ie.bootstrap,an=ie.mount,on=ie.unmount,Me=ie.update,de=vr(d),un=de.onGlobalStateChange,sn=de.setGlobalState,cn=de.offGlobalStateChange,Oe=function(x){return F=x},ln=function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:N,T,Ae,fn={name:d,bootstrap:tn,mount:[function(){return g(i,void 0,void 0,f.mark(function y(){return f.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:case 1:case"end":return c.stop()}},y)}))},function(){return g(i,void 0,void 0,f.mark(function y(){return f.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,we(p,e);case 2:if(c.t0=c.sent,!c.t0){c.next=5;break}c.t0=Y;case 5:if(!c.t0){c.next=7;break}return c.abrupt("return",Y.promise);case 7:return c.abrupt("return",void 0);case 8:case"end":return c.stop()}},y)}))},function(){return g(i,void 0,void 0,f.mark(function y(){return f.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:T=F,Ae=On(d,!!L,U,H,function(){return T});case 2:case"end":return c.stop()}},y)}))},function(){return g(i,void 0,void 0,f.mark(function y(){var C;return f.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:C=x!==N,(C||!T)&&(T=Mn(S,U,H,d),Oe(T)),G({element:T,loading:!0,container:x},"mounting");case 3:case"end":return O.stop()}},y)}))},Q,function(){return g(i,void 0,void 0,f.mark(function y(){return f.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",oe(X(en),e,_));case 1:case"end":return c.stop()}},y)}))},function(y){return g(i,void 0,void 0,f.mark(function C(){return f.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",an(Object.assign(Object.assign({},y),{container:Ae(),setGlobalState:sn,onGlobalStateChange:un})));case 1:case"end":return O.stop()}},C)}))},function(){return g(i,void 0,void 0,f.mark(function y(){return f.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",G({element:T,loading:!1,container:x},"mounted"));case 1:case"end":return c.stop()}},y)}))},function(){return g(i,void 0,void 0,f.mark(function y(){return f.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",oe(X(Xe),e,_));case 1:case"end":return c.stop()}},y)}))},function(){return g(i,void 0,void 0,f.mark(function y(){return f.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,we(p,e);case 2:if(!c.sent){c.next=4;break}Y=new Tn;case 4:case"end":return c.stop()}},y)}))},function(){return g(i,void 0,void 0,f.mark(function y(){return f.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:case 1:case"end":return c.stop()}},y)}))}],unmount:[function(){return g(i,void 0,void 0,f.mark(function y(){return f.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",oe(X(ae),e,_));case 1:case"end":return c.stop()}},y)}))},function(y){return g(i,void 0,void 0,f.mark(function C(){return f.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",on(Object.assign(Object.assign({},y),{container:Ae()})));case 1:case"end":return O.stop()}},C)}))},J,function(){return g(i,void 0,void 0,f.mark(function y(){return f.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",oe(X(ze),e,_));case 1:case"end":return c.stop()}},y)}))},function(){return g(i,void 0,void 0,f.mark(function y(){return f.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:G({element:null,loading:!1,container:x},"unmounted"),cn(d),T=null,Oe(T);case 4:case"end":return c.stop()}},y)}))},function(){return g(i,void 0,void 0,f.mark(function y(){return f.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,we(p,e);case 2:if(c.t0=c.sent,!c.t0){c.next=5;break}c.t0=Y;case 5:if(!c.t0){c.next=7;break}Y.resolve();case 7:case"end":return c.stop()}},y)}))}]};return typeof Me=="function"&&(fn.update=Me),fn},M.abrupt("return",ln);case 42:case"end":return M.stop()}},a)}))}var Fe=window.requestIdleCallback||function(t){var n=Date.now();return setTimeout(function(){t({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-n))}})},1)},zr=navigator.connection?navigator.connection.saveData||navigator.connection.type!=="wifi"&&navigator.connection.type!=="ethernet"&&/([23])g/.test(navigator.connection.effectiveType):!1;function Zn(e,t){var n=this;!navigator.onLine||zr||Fe(function(){return g(n,void 0,void 0,f.mark(function r(){var a,i,o;return f.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,xn(e,t);case 2:a=d.sent,i=a.getExternalScripts,o=a.getExternalStyleSheets,Fe(o),Fe(i);case 7:case"end":return d.stop()}},r)}))})}function Ne(e,t){window.addEventListener("single-spa:first-mount",function n(){var r=e.filter(function(a){return or(a.name)===ur});r.forEach(function(a){var i=a.entry;return Zn(i,t)}),window.removeEventListener("single-spa:first-mount",n)})}function An(e,t){e.forEach(function(n){var r=n.entry;return Zn(r,t)})}function Xr(e,t,n){var r=this,a=function(o){return e.filter(function(s){return o.includes(s.name)})};if(Array.isArray(t))Ne(a(t),n);else if($(t))(function(){return g(r,void 0,void 0,f.mark(function i(){var o,s,d,w,p;return f.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,t(e);case 2:o=l.sent,s=o.criticalAppNames,d=s===void 0?[]:s,w=o.minorAppsName,p=w===void 0?[]:w,An(a(d),n),Ne(a(p),n);case 9:case"end":return l.stop()}},i)}))})();else switch(t){case!0:Ne(e,n);break;case"all":An(e,n);break}}var ge=[],I={},et=!0,zn=new Tn,nt=function(t){var n=t.sandbox,r=t.singular;return n&&!window.Proxy?(console.warn("[qiankun] Miss window.Proxy, proxySandbox will degenerate into snapshotSandbox"),r===!1&&console.warn("[qiankun] Setting singular as false may cause unexpected behavior while your browser not support window.Proxy"),Object.assign(Object.assign({},t),{sandbox:ce(n)==="object"?Object.assign(Object.assign({},n),{loose:!0}):{loose:!0}})):t};function st(e,t){var n=this,r=e.filter(function(a){return!ge.some(function(i){return i.name===a.name})});ge=[].concat(B(ge),B(r)),r.forEach(function(a){var i=a.name,o=a.activeRule,s=a.loader,d=s===void 0?le:s,w=a.props,p=ye(a,["name","activeRule","loader","props"]);sr({name:i,app:function(){return g(n,void 0,void 0,f.mark(function l(){var u=this,v,m,P;return f.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return d(!0),b.next=3,zn.promise;case 3:return b.next=5,Zr(Object.assign({name:i,props:w},p),I,t);case 5:return b.t0=b.sent,v=(0,b.t0)(),m=v.mount,P=ye(v,["mount"]),b.abrupt("return",Object.assign({mount:[function(){return g(u,void 0,void 0,f.mark(function W(){return f.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.abrupt("return",d(!0));case 1:case"end":return S.stop()}},W)}))}].concat(B(X(m)),[function(){return g(u,void 0,void 0,f.mark(function W(){return f.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.abrupt("return",d(!1));case 1:case"end":return S.stop()}},W)}))}])},P));case 10:case"end":return b.stop()}},l)}))},activeWhen:o,customProps:w})})}function ct(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};I=Object.assign({prefetch:!0,singular:!0,sandbox:!0},e);var t=I,n=t.prefetch;t.sandbox,t.singular;var r=t.urlRerouteOnly,a=r===void 0?et:r,i=ye(I,["prefetch","sandbox","singular","urlRerouteOnly"]);n&&Xr(ge,n,i),I=nt(I),cr({urlRerouteOnly:a}),zn.resolve()}export{st as r,ct as s};
